const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PageRouter-DVocmFZ6.js","assets/index-CxkYhlkB.js","assets/PageRouter-DJw1hYb5.css"])))=>i.map(i=>d[i]);
var aa=Object.defineProperty;var Fr=t=>{throw TypeError(t)};var sa=(t,e,f)=>e in t?aa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:f}):t[e]=f;var we=(t,e,f)=>sa(t,typeof e!="symbol"?e+"":e,f),$n=(t,e,f)=>e.has(t)||Fr("Cannot "+f);var M=(t,e,f)=>($n(t,e,"read from private field"),f?f.call(t):e.get(t)),Rt=(t,e,f)=>e.has(t)?Fr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,f),It=(t,e,f,i)=>($n(t,e,"write to private field"),i?i.call(t,f):e.set(t,f),f),Et=(t,e,f)=>($n(t,e,"access private method"),f);var Yn=(t,e,f,i)=>({set _(o){It(t,e,o,f)},get _(){return M(t,e,i)}});import{d as defaultSxConfig,i as isPlainObject,s as styled$1,a as styleFunctionSx,r as reactExports,u as useTheme,j as jsxRuntimeExports,c as clsx,b as internal_serializeStyles,e as createTheme,f as internal_mutateStyles,g as createTheme$1,T as THEME_ID,h as useDefaultProps$1,k as keyframes,l as css,m as capitalize,n as getAugmentedNamespace,o as getDefaultExportFromCjs,_ as __vitePreload}from"./index-CxkYhlkB.js";function _mergeNamespaces(t,e){for(var f=0;f<e.length;f++){const i=e[f];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const n=Object.getOwnPropertyDescriptor(i,o);n&&Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const splitProps=t=>{var i;const e={systemProps:{},otherProps:{}},f=((i=t==null?void 0:t.theme)==null?void 0:i.unstable_sxConfig)??defaultSxConfig;return Object.keys(t).forEach(o=>{f[o]?e.systemProps[o]=t[o]:e.otherProps[o]=t[o]}),e};function extendSxProp(t){const{sx:e,...f}=t,{systemProps:i,otherProps:o}=splitProps(f);let n;return Array.isArray(e)?n=[i,...e]:typeof e=="function"?n=(...R)=>{const U=e(...R);return isPlainObject(U)?{...i,...U}:i}:n={...i,...e},{...o,sx:n}}const defaultGenerator=t=>t,createClassNameGenerator=()=>{let t=defaultGenerator;return{configure(e){t=e},generate(e){return t(e)},reset(){t=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();function createBox(t={}){const{themeId:e,defaultTheme:f,defaultClassName:i="MuiBox-root",generateClassName:o}=t,n=styled$1("div",{shouldForwardProp:U=>U!=="theme"&&U!=="sx"&&U!=="as"})(styleFunctionSx);return reactExports.forwardRef(function(O,P){const v=useTheme(f),{className:L,component:k="div",...C}=extendSxProp(O);return jsxRuntimeExports.jsx(n,{as:k,ref:P,className:clsx(L,o?o(i):i),theme:e&&v[e]||v,...C})})}const globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(t,e,f="Mui"){const i=globalStateClasses[e];return i?`${f}-${i}`:`${ClassNameGenerator.generate(t)}-${e}`}function generateUtilityClasses(t,e,f="Mui"){const i={};return e.forEach(o=>{i[o]=generateUtilityClass(t,o,f)}),i}function preprocessStyles(t){const{variants:e,...f}=t,i={variants:e,style:internal_serializeStyles(f),isProcessed:!0};return i.style===f||e&&e.forEach(o=>{typeof o.style!="function"&&(o.style=internal_serializeStyles(o.style))}),i}const systemDefaultTheme=createTheme();function shouldForwardProp(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function shallowLayer(t,e){return e&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${e}{${String(t.styles)}}`),t}function defaultOverridesResolver(t){return t?(e,f)=>f[t]:null}function attachTheme(t,e,f){t.theme=isObjectEmpty(t.theme)?f:t.theme[e]||t.theme}function processStyle(t,e,f){const i=typeof e=="function"?e(t):e;if(Array.isArray(i))return i.flatMap(o=>processStyle(t,o,f));if(Array.isArray(i==null?void 0:i.variants)){let o;if(i.isProcessed)o=f?shallowLayer(i.style,f):i.style;else{const{variants:n,...R}=i;o=f?shallowLayer(internal_serializeStyles(R),f):R}return processStyleVariants(t,i.variants,[o],f)}return i!=null&&i.isProcessed?f?shallowLayer(internal_serializeStyles(i.style),f):i.style:f?shallowLayer(internal_serializeStyles(i),f):i}function processStyleVariants(t,e,f=[],i=void 0){var n;let o;t:for(let R=0;R<e.length;R+=1){const U=e[R];if(typeof U.props=="function"){if(o??(o={...t,...t.ownerState,ownerState:t.ownerState}),!U.props(o))continue}else for(const O in U.props)if(t[O]!==U.props[O]&&((n=t.ownerState)==null?void 0:n[O])!==U.props[O])continue t;typeof U.style=="function"?(o??(o={...t,...t.ownerState,ownerState:t.ownerState}),f.push(i?shallowLayer(internal_serializeStyles(U.style(o)),i):U.style(o))):f.push(i?shallowLayer(internal_serializeStyles(U.style),i):U.style)}return f}function createStyled(t={}){const{themeId:e,defaultTheme:f=systemDefaultTheme,rootShouldForwardProp:i=shouldForwardProp,slotShouldForwardProp:o=shouldForwardProp}=t;function n(U){attachTheme(U,e,f)}return(U,O={})=>{internal_mutateStyles(U,s=>s.filter(_=>_!==styleFunctionSx));const{name:P,slot:v,skipVariantsResolver:L,skipSx:k,overridesResolver:C=defaultOverridesResolver(lowercaseFirstLetter(v)),...g}=O,b=P&&P.startsWith("Mui")||v?"components":"custom",u=L!==void 0?L:v&&v!=="Root"&&v!=="root"||!1,m=k||!1;let A=shouldForwardProp;v==="Root"||v==="root"?A=i:v?A=o:isStringTag(U)&&(A=void 0);const l=styled$1(U,{shouldForwardProp:A,label:generateStyledLabel(),...g}),h=s=>{if(s.__emotion_real===s)return s;if(typeof s=="function")return function(a){return processStyle(a,s,a.theme.modularCssLayers?b:void 0)};if(isPlainObject(s)){const _=preprocessStyles(s);return function(T){return _.variants?processStyle(T,_,T.theme.modularCssLayers?b:void 0):T.theme.modularCssLayers?shallowLayer(_.style,b):_.style}}return s},r=(...s)=>{const _=[],a=s.map(h),T=[];if(_.push(n),P&&C&&T.push(function(wt){var Z,nt;const mt=(nt=(Z=wt.theme.components)==null?void 0:Z[P])==null?void 0:nt.styleOverrides;if(!mt)return null;const ut={};for(const gt in mt)ut[gt]=processStyle(wt,mt[gt],wt.theme.modularCssLayers?"theme":void 0);return C(wt,ut)}),P&&!u&&T.push(function(wt){var ut,Z;const pt=wt.theme,mt=(Z=(ut=pt==null?void 0:pt.components)==null?void 0:ut[P])==null?void 0:Z.variants;return mt?processStyleVariants(wt,mt,[],wt.theme.modularCssLayers?"theme":void 0):null}),m||T.push(styleFunctionSx),Array.isArray(a[0])){const ht=a.shift(),wt=new Array(_.length).fill(""),pt=new Array(T.length).fill("");let mt;mt=[...wt,...ht,...pt],mt.raw=[...wt,...ht.raw,...pt],_.unshift(mt)}const I=[..._,...a,...T],J=l(...I);return U.muiName&&(J.muiName=U.muiName),J};return l.withConfig&&(r.withConfig=l.withConfig),r}}function generateStyledLabel(t,e){return void 0}function isObjectEmpty(t){for(const e in t)return!1;return!0}function isStringTag(t){return typeof t=="string"&&t.charCodeAt(0)>96}function lowercaseFirstLetter(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const arg={theme:void 0};function unstable_memoTheme(t){let e,f;return function(o){let n=e;return(n===void 0||o.theme!==f)&&(arg.theme=o.theme,n=preprocessStyles(t(arg)),e=n,f=o.theme),n}}function composeClasses(t,e,f=void 0){const i={};for(const o in t){const n=t[o];let R="",U=!0;for(let O=0;O<n.length;O+=1){const P=n[O];P&&(R+=(U===!0?"":" ")+e(P),U=!1,f&&f[P]&&(R+=" "+f[P]))}i[o]=R}return i}const defaultTheme$1=createTheme$1();function slotShouldForwardProp(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const rootShouldForwardProp=t=>slotShouldForwardProp(t)&&t!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp}),memoTheme=unstable_memoTheme;function useDefaultProps(t){return useDefaultProps$1(t)}function hasCorrectMainProperty(t){return typeof t.main=="string"}function checkSimplePaletteColorValues(t,e=[]){if(!hasCorrectMainProperty(t))return!1;for(const f of e)if(!t.hasOwnProperty(f)||typeof t[f]!="string")return!1;return!0}function createSimplePaletteValueFilter(t=[]){return([,e])=>e&&checkSimplePaletteColorValues(e,t)}function getCircularProgressUtilityClass(t){return generateUtilityClass("MuiCircularProgress",t)}generateUtilityClasses("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const SIZE=44,circularRotateKeyframe=keyframes`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,circularDashKeyframe=keyframes`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,rotateAnimation=typeof circularRotateKeyframe!="string"?css`
        animation: ${circularRotateKeyframe} 1.4s linear infinite;
      `:null,dashAnimation=typeof circularDashKeyframe!="string"?css`
        animation: ${circularDashKeyframe} 1.4s ease-in-out infinite;
      `:null,useUtilityClasses=t=>{const{classes:e,variant:f,color:i,disableShrink:o}=t,n={root:["root",f,`color${capitalize(i)}`],svg:["svg"],circle:["circle",`circle${capitalize(f)}`,o&&"circleDisableShrink"]};return composeClasses(n,getCircularProgressUtilityClass,e)},CircularProgressRoot=styled("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:f}=t;return[e.root,e[f.variant],e[`color${capitalize(f.color)}`]]}})(memoTheme(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:rotateAnimation||{animation:`${circularRotateKeyframe} 1.4s linear infinite`}},...Object.entries(t.palette).filter(createSimplePaletteValueFilter()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),CircularProgressSVG=styled("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),CircularProgressCircle=styled("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:f}=t;return[e.circle,e[`circle${capitalize(f.variant)}`],f.disableShrink&&e.circleDisableShrink]}})(memoTheme(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:dashAnimation||{animation:`${circularDashKeyframe} 1.4s ease-in-out infinite`}}]}))),CircularProgress=reactExports.forwardRef(function(e,f){const i=useDefaultProps({props:e,name:"MuiCircularProgress"}),{className:o,color:n="primary",disableShrink:R=!1,size:U=40,style:O,thickness:P=3.6,value:v=0,variant:L="indeterminate",...k}=i,C={...i,color:n,disableShrink:R,size:U,thickness:P,value:v,variant:L},g=useUtilityClasses(C),b={},u={},m={};if(L==="determinate"){const A=2*Math.PI*((SIZE-P)/2);b.strokeDasharray=A.toFixed(3),m["aria-valuenow"]=Math.round(v),b.strokeDashoffset=`${((100-v)/100*A).toFixed(3)}px`,u.transform="rotate(-90deg)"}return jsxRuntimeExports.jsx(CircularProgressRoot,{className:clsx(g.root,o),style:{width:U,height:U,...u,...O},ownerState:C,ref:f,role:"progressbar",...m,...k,children:jsxRuntimeExports.jsx(CircularProgressSVG,{className:g.svg,ownerState:C,viewBox:`${SIZE/2} ${SIZE/2} ${SIZE} ${SIZE}`,children:jsxRuntimeExports.jsx(CircularProgressCircle,{className:g.circle,style:b,ownerState:C,cx:SIZE,cy:SIZE,r:(SIZE-P)/2,fill:"none",strokeWidth:P})})})}),boxClasses=generateUtilityClasses("MuiBox",["root"]),defaultTheme=createTheme$1(),Box=createBox({themeId:THEME_ID,defaultTheme,defaultClassName:boxClasses.root,generateClassName:ClassNameGenerator.generate});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function signum(t){return t<0?-1:t===0?0:1}function lerp(t,e,f){return(1-f)*t+f*e}function clampInt(t,e,f){return f<t?t:f>e?e:f}function clampDouble(t,e,f){return f<t?t:f>e?e:f}function sanitizeDegreesDouble(t){return t=t%360,t<0&&(t=t+360),t}function rotationDirection(t,e){return sanitizeDegreesDouble(e-t)<=180?1:-1}function differenceDegrees(t,e){return 180-Math.abs(Math.abs(t-e)-180)}function matrixMultiply(t,e){const f=t[0]*e[0][0]+t[1]*e[0][1]+t[2]*e[0][2],i=t[0]*e[1][0]+t[1]*e[1][1]+t[2]*e[1][2],o=t[0]*e[2][0]+t[1]*e[2][1]+t[2]*e[2][2];return[f,i,o]}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SRGB_TO_XYZ=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],XYZ_TO_SRGB=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],WHITE_POINT_D65=[95.047,100,108.883];function argbFromRgb(t,e,f){return(255<<24|(t&255)<<16|(e&255)<<8|f&255)>>>0}function argbFromLinrgb(t){const e=delinearized(t[0]),f=delinearized(t[1]),i=delinearized(t[2]);return argbFromRgb(e,f,i)}function redFromArgb(t){return t>>16&255}function greenFromArgb(t){return t>>8&255}function blueFromArgb(t){return t&255}function argbFromXyz(t,e,f){const i=XYZ_TO_SRGB,o=i[0][0]*t+i[0][1]*e+i[0][2]*f,n=i[1][0]*t+i[1][1]*e+i[1][2]*f,R=i[2][0]*t+i[2][1]*e+i[2][2]*f,U=delinearized(o),O=delinearized(n),P=delinearized(R);return argbFromRgb(U,O,P)}function xyzFromArgb(t){const e=linearized(redFromArgb(t)),f=linearized(greenFromArgb(t)),i=linearized(blueFromArgb(t));return matrixMultiply([e,f,i],SRGB_TO_XYZ)}function argbFromLstar(t){const e=yFromLstar(t),f=delinearized(e);return argbFromRgb(f,f,f)}function lstarFromArgb(t){const e=xyzFromArgb(t)[1];return 116*labF(e/100)-16}function yFromLstar(t){return 100*labInvf((t+16)/116)}function lstarFromY(t){return labF(t/100)*116-16}function linearized(t){const e=t/255;return e<=.040449936?e/12.92*100:Math.pow((e+.055)/1.055,2.4)*100}function delinearized(t){const e=t/100;let f=0;return e<=.0031308?f=e*12.92:f=1.055*Math.pow(e,1/2.4)-.055,clampInt(0,255,Math.round(f*255))}function whitePointD65(){return WHITE_POINT_D65}function labF(t){const e=.008856451679035631,f=24389/27;return t>e?Math.pow(t,1/3):(f*t+16)/116}function labInvf(t){const e=.008856451679035631,f=24389/27,i=t*t*t;return i>e?i:(116*t-16)/f}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ViewingConditions{static make(e=whitePointD65(),f=200/Math.PI*yFromLstar(50)/100,i=50,o=2,n=!1){const R=e,U=R[0]*.401288+R[1]*.650173+R[2]*-.051461,O=R[0]*-.250268+R[1]*1.204414+R[2]*.045854,P=R[0]*-.002079+R[1]*.048952+R[2]*.953127,v=.8+o/10,L=v>=.9?lerp(.59,.69,(v-.9)*10):lerp(.525,.59,(v-.8)*10);let k=n?1:v*(1-1/3.6*Math.exp((-f-42)/92));k=k>1?1:k<0?0:k;const C=v,g=[k*(100/U)+1-k,k*(100/O)+1-k,k*(100/P)+1-k],b=1/(5*f+1),u=b*b*b*b,m=1-u,A=u*f+.1*m*m*Math.cbrt(5*f),l=yFromLstar(i)/e[1],h=1.48+Math.sqrt(l),r=.725/Math.pow(l,.2),s=r,_=[Math.pow(A*g[0]*U/100,.42),Math.pow(A*g[1]*O/100,.42),Math.pow(A*g[2]*P/100,.42)],a=[400*_[0]/(_[0]+27.13),400*_[1]/(_[1]+27.13),400*_[2]/(_[2]+27.13)],T=(2*a[0]+a[1]+.05*a[2])*r;return new ViewingConditions(l,T,r,s,L,C,g,A,Math.pow(A,.25),h)}constructor(e,f,i,o,n,R,U,O,P,v){this.n=e,this.aw=f,this.nbb=i,this.ncb=o,this.c=n,this.nc=R,this.rgbD=U,this.fl=O,this.fLRoot=P,this.z=v}}ViewingConditions.DEFAULT=ViewingConditions.make();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cam16{constructor(e,f,i,o,n,R,U,O,P){this.hue=e,this.chroma=f,this.j=i,this.q=o,this.m=n,this.s=R,this.jstar=U,this.astar=O,this.bstar=P}distance(e){const f=this.jstar-e.jstar,i=this.astar-e.astar,o=this.bstar-e.bstar,n=Math.sqrt(f*f+i*i+o*o);return 1.41*Math.pow(n,.63)}static fromInt(e){return Cam16.fromIntInViewingConditions(e,ViewingConditions.DEFAULT)}static fromIntInViewingConditions(e,f){const i=(e&16711680)>>16,o=(e&65280)>>8,n=e&255,R=linearized(i),U=linearized(o),O=linearized(n),P=.41233895*R+.35762064*U+.18051042*O,v=.2126*R+.7152*U+.0722*O,L=.01932141*R+.11916382*U+.95034478*O,k=.401288*P+.650173*v-.051461*L,C=-.250268*P+1.204414*v+.045854*L,g=-.002079*P+.048952*v+.953127*L,b=f.rgbD[0]*k,u=f.rgbD[1]*C,m=f.rgbD[2]*g,A=Math.pow(f.fl*Math.abs(b)/100,.42),l=Math.pow(f.fl*Math.abs(u)/100,.42),h=Math.pow(f.fl*Math.abs(m)/100,.42),r=signum(b)*400*A/(A+27.13),s=signum(u)*400*l/(l+27.13),_=signum(m)*400*h/(h+27.13),a=(11*r+-12*s+_)/11,T=(r+s-2*_)/9,I=(20*r+20*s+21*_)/20,J=(40*r+20*s+_)/20,wt=Math.atan2(T,a)*180/Math.PI,pt=wt<0?wt+360:wt>=360?wt-360:wt,mt=pt*Math.PI/180,ut=J*f.nbb,Z=100*Math.pow(ut/f.aw,f.c*f.z),nt=4/f.c*Math.sqrt(Z/100)*(f.aw+4)*f.fLRoot,gt=pt<20.14?pt+360:pt,St=.25*(Math.cos(gt*Math.PI/180+2)+3.8),S=5e4/13*St*f.nc*f.ncb*Math.sqrt(a*a+T*T)/(I+.305),p=Math.pow(S,.9)*Math.pow(1.64-Math.pow(.29,f.n),.73),x=p*Math.sqrt(Z/100),H=x*f.fLRoot,W=50*Math.sqrt(p*f.c/(f.aw+4)),j=(1+100*.007)*Z/(1+.007*Z),et=1/.0228*Math.log(1+.0228*H),dt=et*Math.cos(mt),bt=et*Math.sin(mt);return new Cam16(pt,x,Z,nt,H,W,j,dt,bt)}static fromJch(e,f,i){return Cam16.fromJchInViewingConditions(e,f,i,ViewingConditions.DEFAULT)}static fromJchInViewingConditions(e,f,i,o){const n=4/o.c*Math.sqrt(e/100)*(o.aw+4)*o.fLRoot,R=f*o.fLRoot,U=f/Math.sqrt(e/100),O=50*Math.sqrt(U*o.c/(o.aw+4)),P=i*Math.PI/180,v=(1+100*.007)*e/(1+.007*e),L=1/.0228*Math.log(1+.0228*R),k=L*Math.cos(P),C=L*Math.sin(P);return new Cam16(i,f,e,n,R,O,v,k,C)}static fromUcs(e,f,i){return Cam16.fromUcsInViewingConditions(e,f,i,ViewingConditions.DEFAULT)}static fromUcsInViewingConditions(e,f,i,o){const n=f,R=i,U=Math.sqrt(n*n+R*R),P=(Math.exp(U*.0228)-1)/.0228/o.fLRoot;let v=Math.atan2(R,n)*(180/Math.PI);v<0&&(v+=360);const L=e/(1-(e-100)*.007);return Cam16.fromJchInViewingConditions(L,P,v,o)}toInt(){return this.viewed(ViewingConditions.DEFAULT)}viewed(e){const f=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),i=Math.pow(f/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),o=this.hue*Math.PI/180,n=.25*(Math.cos(o+2)+3.8),R=e.aw*Math.pow(this.j/100,1/e.c/e.z),U=n*(5e4/13)*e.nc*e.ncb,O=R/e.nbb,P=Math.sin(o),v=Math.cos(o),L=23*(O+.305)*i/(23*U+11*i*v+108*i*P),k=L*v,C=L*P,g=(460*O+451*k+288*C)/1403,b=(460*O-891*k-261*C)/1403,u=(460*O-220*k-6300*C)/1403,m=Math.max(0,27.13*Math.abs(g)/(400-Math.abs(g))),A=signum(g)*(100/e.fl)*Math.pow(m,1/.42),l=Math.max(0,27.13*Math.abs(b)/(400-Math.abs(b))),h=signum(b)*(100/e.fl)*Math.pow(l,1/.42),r=Math.max(0,27.13*Math.abs(u)/(400-Math.abs(u))),s=signum(u)*(100/e.fl)*Math.pow(r,1/.42),_=A/e.rgbD[0],a=h/e.rgbD[1],T=s/e.rgbD[2],I=1.86206786*_-1.01125463*a+.14918677*T,J=.38752654*_+.62144744*a-.00897398*T,ht=-.0158415*_-.03412294*a+1.04996444*T;return argbFromXyz(I,J,ht)}static fromXyzInViewingConditions(e,f,i,o){const n=.401288*e+.650173*f-.051461*i,R=-.250268*e+1.204414*f+.045854*i,U=-.002079*e+.048952*f+.953127*i,O=o.rgbD[0]*n,P=o.rgbD[1]*R,v=o.rgbD[2]*U,L=Math.pow(o.fl*Math.abs(O)/100,.42),k=Math.pow(o.fl*Math.abs(P)/100,.42),C=Math.pow(o.fl*Math.abs(v)/100,.42),g=signum(O)*400*L/(L+27.13),b=signum(P)*400*k/(k+27.13),u=signum(v)*400*C/(C+27.13),m=(11*g+-12*b+u)/11,A=(g+b-2*u)/9,l=(20*g+20*b+21*u)/20,h=(40*g+20*b+u)/20,s=Math.atan2(A,m)*180/Math.PI,_=s<0?s+360:s>=360?s-360:s,a=_*Math.PI/180,T=h*o.nbb,I=100*Math.pow(T/o.aw,o.c*o.z),J=4/o.c*Math.sqrt(I/100)*(o.aw+4)*o.fLRoot,ht=_<20.14?_+360:_,wt=1/4*(Math.cos(ht*Math.PI/180+2)+3.8),mt=5e4/13*wt*o.nc*o.ncb*Math.sqrt(m*m+A*A)/(l+.305),ut=Math.pow(mt,.9)*Math.pow(1.64-Math.pow(.29,o.n),.73),Z=ut*Math.sqrt(I/100),nt=Z*o.fLRoot,gt=50*Math.sqrt(ut*o.c/(o.aw+4)),St=(1+100*.007)*I/(1+.007*I),V=Math.log(1+.0228*nt)/.0228,S=V*Math.cos(a),p=V*Math.sin(a);return new Cam16(_,Z,I,J,nt,gt,St,S,p)}xyzInViewingConditions(e){const f=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),i=Math.pow(f/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),o=this.hue*Math.PI/180,n=.25*(Math.cos(o+2)+3.8),R=e.aw*Math.pow(this.j/100,1/e.c/e.z),U=n*(5e4/13)*e.nc*e.ncb,O=R/e.nbb,P=Math.sin(o),v=Math.cos(o),L=23*(O+.305)*i/(23*U+11*i*v+108*i*P),k=L*v,C=L*P,g=(460*O+451*k+288*C)/1403,b=(460*O-891*k-261*C)/1403,u=(460*O-220*k-6300*C)/1403,m=Math.max(0,27.13*Math.abs(g)/(400-Math.abs(g))),A=signum(g)*(100/e.fl)*Math.pow(m,1/.42),l=Math.max(0,27.13*Math.abs(b)/(400-Math.abs(b))),h=signum(b)*(100/e.fl)*Math.pow(l,1/.42),r=Math.max(0,27.13*Math.abs(u)/(400-Math.abs(u))),s=signum(u)*(100/e.fl)*Math.pow(r,1/.42),_=A/e.rgbD[0],a=h/e.rgbD[1],T=s/e.rgbD[2],I=1.86206786*_-1.01125463*a+.14918677*T,J=.38752654*_+.62144744*a-.00897398*T,ht=-.0158415*_-.03412294*a+1.04996444*T;return[I,J,ht]}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HctSolver{static sanitizeRadians(e){return(e+Math.PI*8)%(Math.PI*2)}static trueDelinearized(e){const f=e/100;let i=0;return f<=.0031308?i=f*12.92:i=1.055*Math.pow(f,1/2.4)-.055,i*255}static chromaticAdaptation(e){const f=Math.pow(Math.abs(e),.42);return signum(e)*400*f/(f+27.13)}static hueOf(e){const f=matrixMultiply(e,HctSolver.SCALED_DISCOUNT_FROM_LINRGB),i=HctSolver.chromaticAdaptation(f[0]),o=HctSolver.chromaticAdaptation(f[1]),n=HctSolver.chromaticAdaptation(f[2]),R=(11*i+-12*o+n)/11,U=(i+o-2*n)/9;return Math.atan2(U,R)}static areInCyclicOrder(e,f,i){const o=HctSolver.sanitizeRadians(f-e),n=HctSolver.sanitizeRadians(i-e);return o<n}static intercept(e,f,i){return(f-e)/(i-e)}static lerpPoint(e,f,i){return[e[0]+(i[0]-e[0])*f,e[1]+(i[1]-e[1])*f,e[2]+(i[2]-e[2])*f]}static setCoordinate(e,f,i,o){const n=HctSolver.intercept(e[o],f,i[o]);return HctSolver.lerpPoint(e,n,i)}static isBounded(e){return 0<=e&&e<=100}static nthVertex(e,f){const i=HctSolver.Y_FROM_LINRGB[0],o=HctSolver.Y_FROM_LINRGB[1],n=HctSolver.Y_FROM_LINRGB[2],R=f%4<=1?0:100,U=f%2===0?0:100;if(f<4){const O=R,P=U,v=(e-O*o-P*n)/i;return HctSolver.isBounded(v)?[v,O,P]:[-1,-1,-1]}else if(f<8){const O=R,P=U,v=(e-P*i-O*n)/o;return HctSolver.isBounded(v)?[P,v,O]:[-1,-1,-1]}else{const O=R,P=U,v=(e-O*i-P*o)/n;return HctSolver.isBounded(v)?[O,P,v]:[-1,-1,-1]}}static bisectToSegment(e,f){let i=[-1,-1,-1],o=i,n=0,R=0,U=!1,O=!0;for(let P=0;P<12;P++){const v=HctSolver.nthVertex(e,P);if(v[0]<0)continue;const L=HctSolver.hueOf(v);if(!U){i=v,o=v,n=L,R=L,U=!0;continue}(O||HctSolver.areInCyclicOrder(n,L,R))&&(O=!1,HctSolver.areInCyclicOrder(n,f,L)?(o=v,R=L):(i=v,n=L))}return[i,o]}static midpoint(e,f){return[(e[0]+f[0])/2,(e[1]+f[1])/2,(e[2]+f[2])/2]}static criticalPlaneBelow(e){return Math.floor(e-.5)}static criticalPlaneAbove(e){return Math.ceil(e-.5)}static bisectToLimit(e,f){const i=HctSolver.bisectToSegment(e,f);let o=i[0],n=HctSolver.hueOf(o),R=i[1];for(let U=0;U<3;U++)if(o[U]!==R[U]){let O=-1,P=255;o[U]<R[U]?(O=HctSolver.criticalPlaneBelow(HctSolver.trueDelinearized(o[U])),P=HctSolver.criticalPlaneAbove(HctSolver.trueDelinearized(R[U]))):(O=HctSolver.criticalPlaneAbove(HctSolver.trueDelinearized(o[U])),P=HctSolver.criticalPlaneBelow(HctSolver.trueDelinearized(R[U])));for(let v=0;v<8&&!(Math.abs(P-O)<=1);v++){const L=Math.floor((O+P)/2),k=HctSolver.CRITICAL_PLANES[L],C=HctSolver.setCoordinate(o,k,R,U),g=HctSolver.hueOf(C);HctSolver.areInCyclicOrder(n,f,g)?(R=C,P=L):(o=C,n=g,O=L)}}return HctSolver.midpoint(o,R)}static inverseChromaticAdaptation(e){const f=Math.abs(e),i=Math.max(0,27.13*f/(400-f));return signum(e)*Math.pow(i,1/.42)}static findResultByJ(e,f,i){let o=Math.sqrt(i)*11;const n=ViewingConditions.DEFAULT,R=1/Math.pow(1.64-Math.pow(.29,n.n),.73),O=.25*(Math.cos(e+2)+3.8)*(5e4/13)*n.nc*n.ncb,P=Math.sin(e),v=Math.cos(e);for(let L=0;L<5;L++){const k=o/100,C=f===0||o===0?0:f/Math.sqrt(k),g=Math.pow(C*R,1/.9),u=n.aw*Math.pow(k,1/n.c/n.z)/n.nbb,m=23*(u+.305)*g/(23*O+11*g*v+108*g*P),A=m*v,l=m*P,h=(460*u+451*A+288*l)/1403,r=(460*u-891*A-261*l)/1403,s=(460*u-220*A-6300*l)/1403,_=HctSolver.inverseChromaticAdaptation(h),a=HctSolver.inverseChromaticAdaptation(r),T=HctSolver.inverseChromaticAdaptation(s),I=matrixMultiply([_,a,T],HctSolver.LINRGB_FROM_SCALED_DISCOUNT);if(I[0]<0||I[1]<0||I[2]<0)return 0;const J=HctSolver.Y_FROM_LINRGB[0],ht=HctSolver.Y_FROM_LINRGB[1],wt=HctSolver.Y_FROM_LINRGB[2],pt=J*I[0]+ht*I[1]+wt*I[2];if(pt<=0)return 0;if(L===4||Math.abs(pt-i)<.002)return I[0]>100.01||I[1]>100.01||I[2]>100.01?0:argbFromLinrgb(I);o=o-(pt-i)*o/(2*pt)}return 0}static solveToInt(e,f,i){if(f<1e-4||i<1e-4||i>99.9999)return argbFromLstar(i);e=sanitizeDegreesDouble(e);const o=e/180*Math.PI,n=yFromLstar(i),R=HctSolver.findResultByJ(o,f,n);if(R!==0)return R;const U=HctSolver.bisectToLimit(n,o);return argbFromLinrgb(U)}static solveToCam(e,f,i){return Cam16.fromInt(HctSolver.solveToInt(e,f,i))}}HctSolver.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]];HctSolver.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]];HctSolver.Y_FROM_LINRGB=[.2126,.7152,.0722];HctSolver.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hct{static from(e,f,i){return new Hct(HctSolver.solveToInt(e,f,i))}static fromInt(e){return new Hct(e)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(e){this.setInternalState(HctSolver.solveToInt(e,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(e){this.setInternalState(HctSolver.solveToInt(this.internalHue,e,this.internalTone))}get tone(){return this.internalTone}set tone(e){this.setInternalState(HctSolver.solveToInt(this.internalHue,this.internalChroma,e))}constructor(e){this.argb=e;const f=Cam16.fromInt(e);this.internalHue=f.hue,this.internalChroma=f.chroma,this.internalTone=lstarFromArgb(e),this.argb=e}setInternalState(e){const f=Cam16.fromInt(e);this.internalHue=f.hue,this.internalChroma=f.chroma,this.internalTone=lstarFromArgb(e),this.argb=e}inViewingConditions(e){const i=Cam16.fromInt(this.toInt()).xyzInViewingConditions(e),o=Cam16.fromXyzInViewingConditions(i[0],i[1],i[2],ViewingConditions.make());return Hct.from(o.hue,o.chroma,lstarFromY(i[1]))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Blend{static harmonize(e,f){const i=Hct.fromInt(e),o=Hct.fromInt(f),n=differenceDegrees(i.hue,o.hue),R=Math.min(n*.5,15),U=sanitizeDegreesDouble(i.hue+R*rotationDirection(i.hue,o.hue));return Hct.from(U,i.chroma,i.tone).toInt()}static hctHue(e,f,i){const o=Blend.cam16Ucs(e,f,i),n=Cam16.fromInt(o),R=Cam16.fromInt(e);return Hct.from(n.hue,R.chroma,lstarFromArgb(e)).toInt()}static cam16Ucs(e,f,i){const o=Cam16.fromInt(e),n=Cam16.fromInt(f),R=o.jstar,U=o.astar,O=o.bstar,P=n.jstar,v=n.astar,L=n.bstar,k=R+(P-R)*i,C=U+(v-U)*i,g=O+(L-O)*i;return Cam16.fromUcs(k,C,g).toInt()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Contrast{static ratioOfTones(e,f){return e=clampDouble(0,100,e),f=clampDouble(0,100,f),Contrast.ratioOfYs(yFromLstar(e),yFromLstar(f))}static ratioOfYs(e,f){const i=e>f?e:f,o=i===f?e:f;return(i+5)/(o+5)}static lighter(e,f){if(e<0||e>100)return-1;const i=yFromLstar(e),o=f*(i+5)-5,n=Contrast.ratioOfYs(o,i),R=Math.abs(n-f);if(n<f&&R>.04)return-1;const U=lstarFromY(o)+.4;return U<0||U>100?-1:U}static darker(e,f){if(e<0||e>100)return-1;const i=yFromLstar(e),o=(i+5)/f-5,n=Contrast.ratioOfYs(i,o),R=Math.abs(n-f);if(n<f&&R>.04)return-1;const U=lstarFromY(o)-.4;return U<0||U>100?-1:U}static lighterUnsafe(e,f){const i=Contrast.lighter(e,f);return i<0?100:i}static darkerUnsafe(e,f){const i=Contrast.darker(e,f);return i<0?0:i}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DislikeAnalyzer{static isDisliked(e){const f=Math.round(e.hue)>=90&&Math.round(e.hue)<=111,i=Math.round(e.chroma)>16,o=Math.round(e.tone)<65;return f&&i&&o}static fixIfDisliked(e){return DislikeAnalyzer.isDisliked(e)?Hct.from(e.hue,e.chroma,70):e}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DynamicColor{static fromPalette(e){return new DynamicColor(e.name??"",e.palette,e.tone,e.isBackground??!1,e.background,e.secondBackground,e.contrastCurve,e.toneDeltaPair)}constructor(e,f,i,o,n,R,U,O){if(this.name=e,this.palette=f,this.tone=i,this.isBackground=o,this.background=n,this.secondBackground=R,this.contrastCurve=U,this.toneDeltaPair=O,this.hctCache=new Map,!n&&R)throw new Error(`Color ${e} has secondBackgrounddefined, but background is not defined.`);if(!n&&U)throw new Error(`Color ${e} has contrastCurvedefined, but background is not defined.`);if(n&&!U)throw new Error(`Color ${e} has backgrounddefined, but contrastCurve is not defined.`)}getArgb(e){return this.getHct(e).toInt()}getHct(e){const f=this.hctCache.get(e);if(f!=null)return f;const i=this.getTone(e),o=this.palette(e).getHct(i);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(e,o),o}getTone(e){const f=e.contrastLevel<0;if(this.toneDeltaPair){const i=this.toneDeltaPair(e),o=i.roleA,n=i.roleB,R=i.delta,U=i.polarity,O=i.stayTogether,v=this.background(e).getTone(e),L=U==="nearer"||U==="lighter"&&!e.isDark||U==="darker"&&e.isDark,k=L?o:n,C=L?n:o,g=this.name===k.name,b=e.isDark?1:-1,u=k.contrastCurve.get(e.contrastLevel),m=C.contrastCurve.get(e.contrastLevel),A=k.tone(e);let l=Contrast.ratioOfTones(v,A)>=u?A:DynamicColor.foregroundTone(v,u);const h=C.tone(e);let r=Contrast.ratioOfTones(v,h)>=m?h:DynamicColor.foregroundTone(v,m);return f&&(l=DynamicColor.foregroundTone(v,u),r=DynamicColor.foregroundTone(v,m)),(r-l)*b>=R||(r=clampDouble(0,100,l+R*b),(r-l)*b>=R||(l=clampDouble(0,100,r-R*b))),50<=l&&l<60?b>0?(l=60,r=Math.max(r,l+R*b)):(l=49,r=Math.min(r,l+R*b)):50<=r&&r<60&&(O?b>0?(l=60,r=Math.max(r,l+R*b)):(l=49,r=Math.min(r,l+R*b)):b>0?r=60:r=49),g?l:r}else{let i=this.tone(e);if(this.background==null)return i;const o=this.background(e).getTone(e),n=this.contrastCurve.get(e.contrastLevel);if(Contrast.ratioOfTones(o,i)>=n||(i=DynamicColor.foregroundTone(o,n)),f&&(i=DynamicColor.foregroundTone(o,n)),this.isBackground&&50<=i&&i<60&&(Contrast.ratioOfTones(49,o)>=n?i=49:i=60),this.secondBackground){const[R,U]=[this.background,this.secondBackground],[O,P]=[R(e).getTone(e),U(e).getTone(e)],[v,L]=[Math.max(O,P),Math.min(O,P)];if(Contrast.ratioOfTones(v,i)>=n&&Contrast.ratioOfTones(L,i)>=n)return i;const k=Contrast.lighter(v,n),C=Contrast.darker(L,n),g=[];return k!==-1&&g.push(k),C!==-1&&g.push(C),DynamicColor.tonePrefersLightForeground(O)||DynamicColor.tonePrefersLightForeground(P)?k<0?100:k:g.length===1?g[0]:C<0?0:C}return i}}static foregroundTone(e,f){const i=Contrast.lighterUnsafe(e,f),o=Contrast.darkerUnsafe(e,f),n=Contrast.ratioOfTones(i,e),R=Contrast.ratioOfTones(o,e);if(DynamicColor.tonePrefersLightForeground(e)){const O=Math.abs(n-R)<.1&&n<f&&R<f;return n>=f||n>=R||O?i:o}else return R>=f||R>=n?o:i}static tonePrefersLightForeground(e){return Math.round(e)<60}static toneAllowsLightForeground(e){return Math.round(e)<=49}static enableLightForeground(e){return DynamicColor.tonePrefersLightForeground(e)&&!DynamicColor.toneAllowsLightForeground(e)?49:e}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TonalPalette{static fromInt(e){const f=Hct.fromInt(e);return TonalPalette.fromHct(f)}static fromHct(e){return new TonalPalette(e.hue,e.chroma,e)}static fromHueAndChroma(e,f){const i=new KeyColor(e,f).create();return new TonalPalette(e,f,i)}constructor(e,f,i){this.hue=e,this.chroma=f,this.keyColor=i,this.cache=new Map}tone(e){let f=this.cache.get(e);return f===void 0&&(f=Hct.from(this.hue,this.chroma,e).toInt(),this.cache.set(e,f)),f}getHct(e){return Hct.fromInt(this.tone(e))}}class KeyColor{constructor(e,f){this.hue=e,this.requestedChroma=f,this.chromaCache=new Map,this.maxChromaValue=200}create(){let o=0,n=100;for(;o<n;){const R=Math.floor((o+n)/2),U=this.maxChroma(R)<this.maxChroma(R+1);if(this.maxChroma(R)>=this.requestedChroma-.01)if(Math.abs(o-50)<Math.abs(n-50))n=R;else{if(o===R)return Hct.from(this.hue,this.requestedChroma,o);o=R}else U?o=R+1:n=R}return Hct.from(this.hue,this.requestedChroma,o)}maxChroma(e){if(this.chromaCache.has(e))return this.chromaCache.get(e);const f=Hct.from(this.hue,this.maxChromaValue,e).chroma;return this.chromaCache.set(e,f),f}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ContrastCurve{constructor(e,f,i,o){this.low=e,this.normal=f,this.medium=i,this.high=o}get(e){return e<=-1?this.low:e<0?lerp(this.low,this.normal,(e- -1)/1):e<.5?lerp(this.normal,this.medium,(e-0)/.5):e<1?lerp(this.medium,this.high,(e-.5)/.5):this.high}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ToneDeltaPair{constructor(e,f,i,o,n){this.roleA=e,this.roleB=f,this.delta=i,this.polarity=o,this.stayTogether=n}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Variant;(function(t){t[t.MONOCHROME=0]="MONOCHROME",t[t.NEUTRAL=1]="NEUTRAL",t[t.TONAL_SPOT=2]="TONAL_SPOT",t[t.VIBRANT=3]="VIBRANT",t[t.EXPRESSIVE=4]="EXPRESSIVE",t[t.FIDELITY=5]="FIDELITY",t[t.CONTENT=6]="CONTENT",t[t.RAINBOW=7]="RAINBOW",t[t.FRUIT_SALAD=8]="FRUIT_SALAD"})(Variant||(Variant={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isFidelity(t){return t.variant===Variant.FIDELITY||t.variant===Variant.CONTENT}function isMonochrome(t){return t.variant===Variant.MONOCHROME}function findDesiredChromaByTone(t,e,f,i){let o=f,n=Hct.from(t,e,f);if(n.chroma<e){let R=n.chroma;for(;n.chroma<e;){o+=i?-1:1;const U=Hct.from(t,e,o);if(R>U.chroma||Math.abs(U.chroma-e)<.4)break;const O=Math.abs(U.chroma-e),P=Math.abs(n.chroma-e);O<P&&(n=U),R=Math.max(R,U.chroma)}}return o}class MaterialDynamicColors{static highestSurface(e){return e.isDark?MaterialDynamicColors.surfaceBright:MaterialDynamicColors.surfaceDim}}MaterialDynamicColors.contentAccentToneDelta=15;MaterialDynamicColors.primaryPaletteKeyColor=DynamicColor.fromPalette({name:"primary_palette_key_color",palette:t=>t.primaryPalette,tone:t=>t.primaryPalette.keyColor.tone});MaterialDynamicColors.secondaryPaletteKeyColor=DynamicColor.fromPalette({name:"secondary_palette_key_color",palette:t=>t.secondaryPalette,tone:t=>t.secondaryPalette.keyColor.tone});MaterialDynamicColors.tertiaryPaletteKeyColor=DynamicColor.fromPalette({name:"tertiary_palette_key_color",palette:t=>t.tertiaryPalette,tone:t=>t.tertiaryPalette.keyColor.tone});MaterialDynamicColors.neutralPaletteKeyColor=DynamicColor.fromPalette({name:"neutral_palette_key_color",palette:t=>t.neutralPalette,tone:t=>t.neutralPalette.keyColor.tone});MaterialDynamicColors.neutralVariantPaletteKeyColor=DynamicColor.fromPalette({name:"neutral_variant_palette_key_color",palette:t=>t.neutralVariantPalette,tone:t=>t.neutralVariantPalette.keyColor.tone});MaterialDynamicColors.background=DynamicColor.fromPalette({name:"background",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0});MaterialDynamicColors.onBackground=DynamicColor.fromPalette({name:"on_background",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>MaterialDynamicColors.background,contrastCurve:new ContrastCurve(3,3,4.5,7)});MaterialDynamicColors.surface=DynamicColor.fromPalette({name:"surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0});MaterialDynamicColors.surfaceDim=DynamicColor.fromPalette({name:"surface_dim",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:new ContrastCurve(87,87,80,75).get(t.contrastLevel),isBackground:!0});MaterialDynamicColors.surfaceBright=DynamicColor.fromPalette({name:"surface_bright",palette:t=>t.neutralPalette,tone:t=>t.isDark?new ContrastCurve(24,24,29,34).get(t.contrastLevel):98,isBackground:!0});MaterialDynamicColors.surfaceContainerLowest=DynamicColor.fromPalette({name:"surface_container_lowest",palette:t=>t.neutralPalette,tone:t=>t.isDark?new ContrastCurve(4,4,2,0).get(t.contrastLevel):100,isBackground:!0});MaterialDynamicColors.surfaceContainerLow=DynamicColor.fromPalette({name:"surface_container_low",palette:t=>t.neutralPalette,tone:t=>t.isDark?new ContrastCurve(10,10,11,12).get(t.contrastLevel):new ContrastCurve(96,96,96,95).get(t.contrastLevel),isBackground:!0});MaterialDynamicColors.surfaceContainer=DynamicColor.fromPalette({name:"surface_container",palette:t=>t.neutralPalette,tone:t=>t.isDark?new ContrastCurve(12,12,16,20).get(t.contrastLevel):new ContrastCurve(94,94,92,90).get(t.contrastLevel),isBackground:!0});MaterialDynamicColors.surfaceContainerHigh=DynamicColor.fromPalette({name:"surface_container_high",palette:t=>t.neutralPalette,tone:t=>t.isDark?new ContrastCurve(17,17,21,25).get(t.contrastLevel):new ContrastCurve(92,92,88,85).get(t.contrastLevel),isBackground:!0});MaterialDynamicColors.surfaceContainerHighest=DynamicColor.fromPalette({name:"surface_container_highest",palette:t=>t.neutralPalette,tone:t=>t.isDark?new ContrastCurve(22,22,26,30).get(t.contrastLevel):new ContrastCurve(90,90,84,80).get(t.contrastLevel),isBackground:!0});MaterialDynamicColors.onSurface=DynamicColor.fromPalette({name:"on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(4.5,7,11,21)});MaterialDynamicColors.surfaceVariant=DynamicColor.fromPalette({name:"surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:90,isBackground:!0});MaterialDynamicColors.onSurfaceVariant=DynamicColor.fromPalette({name:"on_surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?80:30,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(3,4.5,7,11)});MaterialDynamicColors.inverseSurface=DynamicColor.fromPalette({name:"inverse_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:20});MaterialDynamicColors.inverseOnSurface=DynamicColor.fromPalette({name:"inverse_on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?20:95,background:t=>MaterialDynamicColors.inverseSurface,contrastCurve:new ContrastCurve(4.5,7,11,21)});MaterialDynamicColors.outline=DynamicColor.fromPalette({name:"outline",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?60:50,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1.5,3,4.5,7)});MaterialDynamicColors.outlineVariant=DynamicColor.fromPalette({name:"outline_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:80,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1,1,3,4.5)});MaterialDynamicColors.shadow=DynamicColor.fromPalette({name:"shadow",palette:t=>t.neutralPalette,tone:t=>0});MaterialDynamicColors.scrim=DynamicColor.fromPalette({name:"scrim",palette:t=>t.neutralPalette,tone:t=>0});MaterialDynamicColors.surfaceTint=DynamicColor.fromPalette({name:"surface_tint",palette:t=>t.primaryPalette,tone:t=>t.isDark?80:40,isBackground:!0});MaterialDynamicColors.primary=DynamicColor.fromPalette({name:"primary",palette:t=>t.primaryPalette,tone:t=>isMonochrome(t)?t.isDark?100:0:t.isDark?80:40,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(3,4.5,7,7),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.primaryContainer,MaterialDynamicColors.primary,10,"nearer",!1)});MaterialDynamicColors.onPrimary=DynamicColor.fromPalette({name:"on_primary",palette:t=>t.primaryPalette,tone:t=>isMonochrome(t)?t.isDark?10:90:t.isDark?20:100,background:t=>MaterialDynamicColors.primary,contrastCurve:new ContrastCurve(4.5,7,11,21)});MaterialDynamicColors.primaryContainer=DynamicColor.fromPalette({name:"primary_container",palette:t=>t.primaryPalette,tone:t=>isFidelity(t)?t.sourceColorHct.tone:isMonochrome(t)?t.isDark?85:25:t.isDark?30:90,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1,1,3,4.5),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.primaryContainer,MaterialDynamicColors.primary,10,"nearer",!1)});MaterialDynamicColors.onPrimaryContainer=DynamicColor.fromPalette({name:"on_primary_container",palette:t=>t.primaryPalette,tone:t=>isFidelity(t)?DynamicColor.foregroundTone(MaterialDynamicColors.primaryContainer.tone(t),4.5):isMonochrome(t)?t.isDark?0:100:t.isDark?90:30,background:t=>MaterialDynamicColors.primaryContainer,contrastCurve:new ContrastCurve(3,4.5,7,11)});MaterialDynamicColors.inversePrimary=DynamicColor.fromPalette({name:"inverse_primary",palette:t=>t.primaryPalette,tone:t=>t.isDark?40:80,background:t=>MaterialDynamicColors.inverseSurface,contrastCurve:new ContrastCurve(3,4.5,7,7)});MaterialDynamicColors.secondary=DynamicColor.fromPalette({name:"secondary",palette:t=>t.secondaryPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(3,4.5,7,7),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.secondaryContainer,MaterialDynamicColors.secondary,10,"nearer",!1)});MaterialDynamicColors.onSecondary=DynamicColor.fromPalette({name:"on_secondary",palette:t=>t.secondaryPalette,tone:t=>isMonochrome(t)?t.isDark?10:100:t.isDark?20:100,background:t=>MaterialDynamicColors.secondary,contrastCurve:new ContrastCurve(4.5,7,11,21)});MaterialDynamicColors.secondaryContainer=DynamicColor.fromPalette({name:"secondary_container",palette:t=>t.secondaryPalette,tone:t=>{const e=t.isDark?30:90;return isMonochrome(t)?t.isDark?30:85:isFidelity(t)?findDesiredChromaByTone(t.secondaryPalette.hue,t.secondaryPalette.chroma,e,!t.isDark):e},isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1,1,3,4.5),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.secondaryContainer,MaterialDynamicColors.secondary,10,"nearer",!1)});MaterialDynamicColors.onSecondaryContainer=DynamicColor.fromPalette({name:"on_secondary_container",palette:t=>t.secondaryPalette,tone:t=>isMonochrome(t)?t.isDark?90:10:isFidelity(t)?DynamicColor.foregroundTone(MaterialDynamicColors.secondaryContainer.tone(t),4.5):t.isDark?90:30,background:t=>MaterialDynamicColors.secondaryContainer,contrastCurve:new ContrastCurve(3,4.5,7,11)});MaterialDynamicColors.tertiary=DynamicColor.fromPalette({name:"tertiary",palette:t=>t.tertiaryPalette,tone:t=>isMonochrome(t)?t.isDark?90:25:t.isDark?80:40,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(3,4.5,7,7),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.tertiaryContainer,MaterialDynamicColors.tertiary,10,"nearer",!1)});MaterialDynamicColors.onTertiary=DynamicColor.fromPalette({name:"on_tertiary",palette:t=>t.tertiaryPalette,tone:t=>isMonochrome(t)?t.isDark?10:90:t.isDark?20:100,background:t=>MaterialDynamicColors.tertiary,contrastCurve:new ContrastCurve(4.5,7,11,21)});MaterialDynamicColors.tertiaryContainer=DynamicColor.fromPalette({name:"tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>{if(isMonochrome(t))return t.isDark?60:49;if(!isFidelity(t))return t.isDark?30:90;const e=t.tertiaryPalette.getHct(t.sourceColorHct.tone);return DislikeAnalyzer.fixIfDisliked(e).tone},isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1,1,3,4.5),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.tertiaryContainer,MaterialDynamicColors.tertiary,10,"nearer",!1)});MaterialDynamicColors.onTertiaryContainer=DynamicColor.fromPalette({name:"on_tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>isMonochrome(t)?t.isDark?0:100:isFidelity(t)?DynamicColor.foregroundTone(MaterialDynamicColors.tertiaryContainer.tone(t),4.5):t.isDark?90:30,background:t=>MaterialDynamicColors.tertiaryContainer,contrastCurve:new ContrastCurve(3,4.5,7,11)});MaterialDynamicColors.error=DynamicColor.fromPalette({name:"error",palette:t=>t.errorPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(3,4.5,7,7),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.errorContainer,MaterialDynamicColors.error,10,"nearer",!1)});MaterialDynamicColors.onError=DynamicColor.fromPalette({name:"on_error",palette:t=>t.errorPalette,tone:t=>t.isDark?20:100,background:t=>MaterialDynamicColors.error,contrastCurve:new ContrastCurve(4.5,7,11,21)});MaterialDynamicColors.errorContainer=DynamicColor.fromPalette({name:"error_container",palette:t=>t.errorPalette,tone:t=>t.isDark?30:90,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1,1,3,4.5),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.errorContainer,MaterialDynamicColors.error,10,"nearer",!1)});MaterialDynamicColors.onErrorContainer=DynamicColor.fromPalette({name:"on_error_container",palette:t=>t.errorPalette,tone:t=>isMonochrome(t)?t.isDark?90:10:t.isDark?90:30,background:t=>MaterialDynamicColors.errorContainer,contrastCurve:new ContrastCurve(3,4.5,7,11)});MaterialDynamicColors.primaryFixed=DynamicColor.fromPalette({name:"primary_fixed",palette:t=>t.primaryPalette,tone:t=>isMonochrome(t)?40:90,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1,1,3,4.5),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.primaryFixed,MaterialDynamicColors.primaryFixedDim,10,"lighter",!0)});MaterialDynamicColors.primaryFixedDim=DynamicColor.fromPalette({name:"primary_fixed_dim",palette:t=>t.primaryPalette,tone:t=>isMonochrome(t)?30:80,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1,1,3,4.5),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.primaryFixed,MaterialDynamicColors.primaryFixedDim,10,"lighter",!0)});MaterialDynamicColors.onPrimaryFixed=DynamicColor.fromPalette({name:"on_primary_fixed",palette:t=>t.primaryPalette,tone:t=>isMonochrome(t)?100:10,background:t=>MaterialDynamicColors.primaryFixedDim,secondBackground:t=>MaterialDynamicColors.primaryFixed,contrastCurve:new ContrastCurve(4.5,7,11,21)});MaterialDynamicColors.onPrimaryFixedVariant=DynamicColor.fromPalette({name:"on_primary_fixed_variant",palette:t=>t.primaryPalette,tone:t=>isMonochrome(t)?90:30,background:t=>MaterialDynamicColors.primaryFixedDim,secondBackground:t=>MaterialDynamicColors.primaryFixed,contrastCurve:new ContrastCurve(3,4.5,7,11)});MaterialDynamicColors.secondaryFixed=DynamicColor.fromPalette({name:"secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>isMonochrome(t)?80:90,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1,1,3,4.5),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.secondaryFixed,MaterialDynamicColors.secondaryFixedDim,10,"lighter",!0)});MaterialDynamicColors.secondaryFixedDim=DynamicColor.fromPalette({name:"secondary_fixed_dim",palette:t=>t.secondaryPalette,tone:t=>isMonochrome(t)?70:80,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1,1,3,4.5),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.secondaryFixed,MaterialDynamicColors.secondaryFixedDim,10,"lighter",!0)});MaterialDynamicColors.onSecondaryFixed=DynamicColor.fromPalette({name:"on_secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>10,background:t=>MaterialDynamicColors.secondaryFixedDim,secondBackground:t=>MaterialDynamicColors.secondaryFixed,contrastCurve:new ContrastCurve(4.5,7,11,21)});MaterialDynamicColors.onSecondaryFixedVariant=DynamicColor.fromPalette({name:"on_secondary_fixed_variant",palette:t=>t.secondaryPalette,tone:t=>isMonochrome(t)?25:30,background:t=>MaterialDynamicColors.secondaryFixedDim,secondBackground:t=>MaterialDynamicColors.secondaryFixed,contrastCurve:new ContrastCurve(3,4.5,7,11)});MaterialDynamicColors.tertiaryFixed=DynamicColor.fromPalette({name:"tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>isMonochrome(t)?40:90,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1,1,3,4.5),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.tertiaryFixed,MaterialDynamicColors.tertiaryFixedDim,10,"lighter",!0)});MaterialDynamicColors.tertiaryFixedDim=DynamicColor.fromPalette({name:"tertiary_fixed_dim",palette:t=>t.tertiaryPalette,tone:t=>isMonochrome(t)?30:80,isBackground:!0,background:t=>MaterialDynamicColors.highestSurface(t),contrastCurve:new ContrastCurve(1,1,3,4.5),toneDeltaPair:t=>new ToneDeltaPair(MaterialDynamicColors.tertiaryFixed,MaterialDynamicColors.tertiaryFixedDim,10,"lighter",!0)});MaterialDynamicColors.onTertiaryFixed=DynamicColor.fromPalette({name:"on_tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>isMonochrome(t)?100:10,background:t=>MaterialDynamicColors.tertiaryFixedDim,secondBackground:t=>MaterialDynamicColors.tertiaryFixed,contrastCurve:new ContrastCurve(4.5,7,11,21)});MaterialDynamicColors.onTertiaryFixedVariant=DynamicColor.fromPalette({name:"on_tertiary_fixed_variant",palette:t=>t.tertiaryPalette,tone:t=>isMonochrome(t)?90:30,background:t=>MaterialDynamicColors.tertiaryFixedDim,secondBackground:t=>MaterialDynamicColors.tertiaryFixed,contrastCurve:new ContrastCurve(3,4.5,7,11)});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CorePalette{static of(e){return new CorePalette(e,!1)}static contentOf(e){return new CorePalette(e,!0)}static fromColors(e){return CorePalette.createPaletteFromColors(!1,e)}static contentFromColors(e){return CorePalette.createPaletteFromColors(!0,e)}static createPaletteFromColors(e,f){const i=new CorePalette(f.primary,e);if(f.secondary){const o=new CorePalette(f.secondary,e);i.a2=o.a1}if(f.tertiary){const o=new CorePalette(f.tertiary,e);i.a3=o.a1}if(f.error){const o=new CorePalette(f.error,e);i.error=o.a1}if(f.neutral){const o=new CorePalette(f.neutral,e);i.n1=o.n1}if(f.neutralVariant){const o=new CorePalette(f.neutralVariant,e);i.n2=o.n2}return i}constructor(e,f){const i=Hct.fromInt(e),o=i.hue,n=i.chroma;f?(this.a1=TonalPalette.fromHueAndChroma(o,n),this.a2=TonalPalette.fromHueAndChroma(o,n/3),this.a3=TonalPalette.fromHueAndChroma(o+60,n/2),this.n1=TonalPalette.fromHueAndChroma(o,Math.min(n/12,4)),this.n2=TonalPalette.fromHueAndChroma(o,Math.min(n/6,8))):(this.a1=TonalPalette.fromHueAndChroma(o,Math.max(48,n)),this.a2=TonalPalette.fromHueAndChroma(o,16),this.a3=TonalPalette.fromHueAndChroma(o+60,24),this.n1=TonalPalette.fromHueAndChroma(o,4),this.n2=TonalPalette.fromHueAndChroma(o,8)),this.error=TonalPalette.fromHueAndChroma(25,84)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Scheme{get primary(){return this.props.primary}get onPrimary(){return this.props.onPrimary}get primaryContainer(){return this.props.primaryContainer}get onPrimaryContainer(){return this.props.onPrimaryContainer}get secondary(){return this.props.secondary}get onSecondary(){return this.props.onSecondary}get secondaryContainer(){return this.props.secondaryContainer}get onSecondaryContainer(){return this.props.onSecondaryContainer}get tertiary(){return this.props.tertiary}get onTertiary(){return this.props.onTertiary}get tertiaryContainer(){return this.props.tertiaryContainer}get onTertiaryContainer(){return this.props.onTertiaryContainer}get error(){return this.props.error}get onError(){return this.props.onError}get errorContainer(){return this.props.errorContainer}get onErrorContainer(){return this.props.onErrorContainer}get background(){return this.props.background}get onBackground(){return this.props.onBackground}get surface(){return this.props.surface}get onSurface(){return this.props.onSurface}get surfaceVariant(){return this.props.surfaceVariant}get onSurfaceVariant(){return this.props.onSurfaceVariant}get outline(){return this.props.outline}get outlineVariant(){return this.props.outlineVariant}get shadow(){return this.props.shadow}get scrim(){return this.props.scrim}get inverseSurface(){return this.props.inverseSurface}get inverseOnSurface(){return this.props.inverseOnSurface}get inversePrimary(){return this.props.inversePrimary}static light(e){return Scheme.lightFromCorePalette(CorePalette.of(e))}static dark(e){return Scheme.darkFromCorePalette(CorePalette.of(e))}static lightContent(e){return Scheme.lightFromCorePalette(CorePalette.contentOf(e))}static darkContent(e){return Scheme.darkFromCorePalette(CorePalette.contentOf(e))}static lightFromCorePalette(e){return new Scheme({primary:e.a1.tone(40),onPrimary:e.a1.tone(100),primaryContainer:e.a1.tone(90),onPrimaryContainer:e.a1.tone(10),secondary:e.a2.tone(40),onSecondary:e.a2.tone(100),secondaryContainer:e.a2.tone(90),onSecondaryContainer:e.a2.tone(10),tertiary:e.a3.tone(40),onTertiary:e.a3.tone(100),tertiaryContainer:e.a3.tone(90),onTertiaryContainer:e.a3.tone(10),error:e.error.tone(40),onError:e.error.tone(100),errorContainer:e.error.tone(90),onErrorContainer:e.error.tone(10),background:e.n1.tone(99),onBackground:e.n1.tone(10),surface:e.n1.tone(99),onSurface:e.n1.tone(10),surfaceVariant:e.n2.tone(90),onSurfaceVariant:e.n2.tone(30),outline:e.n2.tone(50),outlineVariant:e.n2.tone(80),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(20),inverseOnSurface:e.n1.tone(95),inversePrimary:e.a1.tone(80)})}static darkFromCorePalette(e){return new Scheme({primary:e.a1.tone(80),onPrimary:e.a1.tone(20),primaryContainer:e.a1.tone(30),onPrimaryContainer:e.a1.tone(90),secondary:e.a2.tone(80),onSecondary:e.a2.tone(20),secondaryContainer:e.a2.tone(30),onSecondaryContainer:e.a2.tone(90),tertiary:e.a3.tone(80),onTertiary:e.a3.tone(20),tertiaryContainer:e.a3.tone(30),onTertiaryContainer:e.a3.tone(90),error:e.error.tone(80),onError:e.error.tone(20),errorContainer:e.error.tone(30),onErrorContainer:e.error.tone(80),background:e.n1.tone(10),onBackground:e.n1.tone(90),surface:e.n1.tone(10),onSurface:e.n1.tone(90),surfaceVariant:e.n2.tone(30),onSurfaceVariant:e.n2.tone(80),outline:e.n2.tone(60),outlineVariant:e.n2.tone(30),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(90),inverseOnSurface:e.n1.tone(20),inversePrimary:e.a1.tone(40)})}constructor(e){this.props=e}toJSON(){return{...this.props}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hexFromArgb(t){const e=redFromArgb(t),f=greenFromArgb(t),i=blueFromArgb(t),o=[e.toString(16),f.toString(16),i.toString(16)];for(const[n,R]of o.entries())R.length===1&&(o[n]="0"+R);return"#"+o.join("")}function argbFromHex(t){t=t.replace("#","");const e=t.length===3,f=t.length===6,i=t.length===8;if(!e&&!f&&!i)throw new Error("unexpected hex "+t);let o=0,n=0,R=0;return e?(o=parseIntHex(t.slice(0,1).repeat(2)),n=parseIntHex(t.slice(1,2).repeat(2)),R=parseIntHex(t.slice(2,3).repeat(2))):f?(o=parseIntHex(t.slice(0,2)),n=parseIntHex(t.slice(2,4)),R=parseIntHex(t.slice(4,6))):i&&(o=parseIntHex(t.slice(2,4)),n=parseIntHex(t.slice(4,6)),R=parseIntHex(t.slice(6,8))),(255<<24|(o&255)<<16|(n&255)<<8|R&255)>>>0}function parseIntHex(t){return parseInt(t,16)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function themeFromSourceColor(t,e=[]){const f=CorePalette.of(t);return{source:t,schemes:{light:Scheme.light(t),dark:Scheme.dark(t)},palettes:{primary:f.a1,secondary:f.a2,tertiary:f.a3,neutral:f.n1,neutralVariant:f.n2,error:f.error},customColors:e.map(i=>customColor(t,i))}}function customColor(t,e){let f=e.value;const i=f,o=t;e.blend&&(f=Blend.harmonize(i,o));const R=CorePalette.of(f).a1;return{color:e,value:f,light:{color:R.tone(40),onColor:R.tone(100),colorContainer:R.tone(90),onColorContainer:R.tone(10)},dark:{color:R.tone(80),onColor:R.tone(20),colorContainer:R.tone(30),onColorContainer:R.tone(90)}}}function applyTheme(t,e){const f=(e==null?void 0:e.target)||document.body,o=(e==null?void 0:e.dark)??!1?t.schemes.dark:t.schemes.light;if(setSchemeProperties(f,o),e!=null&&e.brightnessSuffix&&(setSchemeProperties(f,t.schemes.dark,"-dark"),setSchemeProperties(f,t.schemes.light,"-light")),e!=null&&e.paletteTones){const n=(e==null?void 0:e.paletteTones)??[];for(const[R,U]of Object.entries(t.palettes)){const O=R.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();for(const P of n){const v=`--md-ref-palette-${O}-${O}${P}`,L=hexFromArgb(U.tone(P));f.style.setProperty(v,L)}}}}function setSchemeProperties(t,e,f=""){for(const[i,o]of Object.entries(e.toJSON())){const n=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),R=hexFromArgb(o);t.style.setProperty(`--md-sys-color-${n}${f}`,R)}}var lib={exports:{}},core_min={};function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,f){module.exports=f()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=V,e.bytesToString=y,e.createPromiseCapability=fe,e.createValidAbsoluteUrl=p,e.getModificationDate=le,e.getVerbosityLevel=Z,e.info=nt,e.isArrayBuffer=Ft,e.isArrayEqual=Ht,e.objectFromMap=z,e.objectSize=E,e.setVerbosityLevel=ut,e.shadow=x,e.string32=F,e.stringToBytes=D,e.stringToPDFString=vt,e.stringToUTF8String=Pt,e.unreachable=St,e.utf8StringToString=Dt,e.warn=gt;const f=[1,0,0,1,0,0];e.IDENTITY_MATRIX=f;const i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;const o=1.35;e.LINE_FACTOR=o;const n=.35;e.LINE_DESCENT_FACTOR=n;const R=n/o;e.BASELINE_FACTOR=R;const U={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=U;const O={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=O;const P="pdfjs_internal_editor_";e.AnnotationEditorPrefix=P;const v={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=v;const L={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=L;const k={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=k;const C={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=C;const g={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=g;const b={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=b;const u={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=u;const m={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=m;const A={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=A;const l={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=l;const h={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=h;const r={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=r;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=s;const _={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=_;const a={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=a;const T={O:"PageOpen",C:"PageClose"};e.PageActionEventType=T;const I={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=I;const J={NONE:0,BINARY:1};e.CMapCompressionType=J;const ht={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=ht;const wt={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=wt;const pt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=pt;let mt=I.WARNINGS;function ut(_t){Number.isInteger(_t)&&(mt=_t)}function Z(){return mt}function nt(_t){mt>=I.INFOS&&console.log(`Info: ${_t}`)}function gt(_t){mt>=I.WARNINGS&&console.log(`Warning: ${_t}`)}function St(_t){throw new Error(_t)}function V(_t,ot){_t||St(ot)}function S(_t){if(!_t)return!1;switch(_t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function p(_t,ot=null,it=null){if(!_t)return null;try{if(it&&typeof _t=="string"){if(it.addDefaultProtocol&&_t.startsWith("www.")){const Zt=_t.match(/\./g);Zt&&Zt.length>=2&&(_t=`http://${_t}`)}if(it.tryConvertEncoding)try{_t=Pt(_t)}catch{}}const Ot=ot?new URL(_t,ot):new URL(_t);if(S(Ot))return Ot}catch{}return null}function x(_t,ot,it,Ot=!1){return Object.defineProperty(_t,ot,{value:it,enumerable:!Ot,configurable:!0,writable:!1}),it}const H=function(){function ot(it,Ot){this.constructor===ot&&St("Cannot initialize BaseException."),this.message=it,this.name=Ot}return ot.prototype=new Error,ot.constructor=ot,ot}();e.BaseException=H;class W extends H{constructor(ot,it){super(ot,"PasswordException"),this.code=it}}e.PasswordException=W;class j extends H{constructor(ot,it){super(ot,"UnknownErrorException"),this.details=it}}e.UnknownErrorException=j;class et extends H{constructor(ot){super(ot,"InvalidPDFException")}}e.InvalidPDFException=et;class dt extends H{constructor(ot){super(ot,"MissingPDFException")}}e.MissingPDFException=dt;class bt extends H{constructor(ot,it){super(ot,"UnexpectedResponseException"),this.status=it}}e.UnexpectedResponseException=bt;class lt extends H{constructor(ot){super(ot,"FormatError")}}e.FormatError=lt;class d extends H{constructor(ot){super(ot,"AbortException")}}e.AbortException=d;function y(_t){(typeof _t!="object"||_t===null||_t.length===void 0)&&St("Invalid argument for bytesToString");const ot=_t.length,it=8192;if(ot<it)return String.fromCharCode.apply(null,_t);const Ot=[];for(let Zt=0;Zt<ot;Zt+=it){const ae=Math.min(Zt+it,ot),se=_t.subarray(Zt,ae);Ot.push(String.fromCharCode.apply(null,se))}return Ot.join("")}function D(_t){typeof _t!="string"&&St("Invalid argument for stringToBytes");const ot=_t.length,it=new Uint8Array(ot);for(let Ot=0;Ot<ot;++Ot)it[Ot]=_t.charCodeAt(Ot)&255;return it}function F(_t){return String.fromCharCode(_t>>24&255,_t>>16&255,_t>>8&255,_t&255)}function E(_t){return Object.keys(_t).length}function z(_t){const ot=Object.create(null);for(const[it,Ot]of _t)ot[it]=Ot;return ot}function Y(){const _t=new Uint8Array(4);return _t[0]=1,new Uint32Array(_t.buffer,0,1)[0]===1}function tt(){try{return new Function(""),!0}catch{return!1}}class ft{static get isLittleEndian(){return x(this,"isLittleEndian",Y())}static get isEvalSupported(){return x(this,"isEvalSupported",tt())}static get isOffscreenCanvasSupported(){return x(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?x(this,"platform",{isWin:!1,isMac:!1}):x(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}e.FeatureTest=ft;const B=[...Array(256).keys()].map(_t=>_t.toString(16).padStart(2,"0"));class Q{static makeHexColor(ot,it,Ot){return`#${B[ot]}${B[it]}${B[Ot]}`}static scaleMinMax(ot,it){let Ot;ot[0]?(ot[0]<0&&(Ot=it[0],it[0]=it[1],it[1]=Ot),it[0]*=ot[0],it[1]*=ot[0],ot[3]<0&&(Ot=it[2],it[2]=it[3],it[3]=Ot),it[2]*=ot[3],it[3]*=ot[3]):(Ot=it[0],it[0]=it[2],it[2]=Ot,Ot=it[1],it[1]=it[3],it[3]=Ot,ot[1]<0&&(Ot=it[2],it[2]=it[3],it[3]=Ot),it[2]*=ot[1],it[3]*=ot[1],ot[2]<0&&(Ot=it[0],it[0]=it[1],it[1]=Ot),it[0]*=ot[2],it[1]*=ot[2]),it[0]+=ot[4],it[1]+=ot[4],it[2]+=ot[5],it[3]+=ot[5]}static transform(ot,it){return[ot[0]*it[0]+ot[2]*it[1],ot[1]*it[0]+ot[3]*it[1],ot[0]*it[2]+ot[2]*it[3],ot[1]*it[2]+ot[3]*it[3],ot[0]*it[4]+ot[2]*it[5]+ot[4],ot[1]*it[4]+ot[3]*it[5]+ot[5]]}static applyTransform(ot,it){const Ot=ot[0]*it[0]+ot[1]*it[2]+it[4],Zt=ot[0]*it[1]+ot[1]*it[3]+it[5];return[Ot,Zt]}static applyInverseTransform(ot,it){const Ot=it[0]*it[3]-it[1]*it[2],Zt=(ot[0]*it[3]-ot[1]*it[2]+it[2]*it[5]-it[4]*it[3])/Ot,ae=(-ot[0]*it[1]+ot[1]*it[0]+it[4]*it[1]-it[5]*it[0])/Ot;return[Zt,ae]}static getAxialAlignedBoundingBox(ot,it){const Ot=Q.applyTransform(ot,it),Zt=Q.applyTransform(ot.slice(2,4),it),ae=Q.applyTransform([ot[0],ot[3]],it),se=Q.applyTransform([ot[2],ot[1]],it);return[Math.min(Ot[0],Zt[0],ae[0],se[0]),Math.min(Ot[1],Zt[1],ae[1],se[1]),Math.max(Ot[0],Zt[0],ae[0],se[0]),Math.max(Ot[1],Zt[1],ae[1],se[1])]}static inverseTransform(ot){const it=ot[0]*ot[3]-ot[1]*ot[2];return[ot[3]/it,-ot[1]/it,-ot[2]/it,ot[0]/it,(ot[2]*ot[5]-ot[4]*ot[3])/it,(ot[4]*ot[1]-ot[5]*ot[0])/it]}static singularValueDecompose2dScale(ot){const it=[ot[0],ot[2],ot[1],ot[3]],Ot=ot[0]*it[0]+ot[1]*it[2],Zt=ot[0]*it[1]+ot[1]*it[3],ae=ot[2]*it[0]+ot[3]*it[2],se=ot[2]*it[1]+ot[3]*it[3],Ve=(Ot+se)/2,re=Math.sqrt((Ot+se)**2-4*(Ot*se-ae*Zt))/2,Ae=Ve+re||1,Le=Ve-re||1;return[Math.sqrt(Ae),Math.sqrt(Le)]}static normalizeRect(ot){const it=ot.slice(0);return ot[0]>ot[2]&&(it[0]=ot[2],it[2]=ot[0]),ot[1]>ot[3]&&(it[1]=ot[3],it[3]=ot[1]),it}static intersect(ot,it){const Ot=Math.max(Math.min(ot[0],ot[2]),Math.min(it[0],it[2])),Zt=Math.min(Math.max(ot[0],ot[2]),Math.max(it[0],it[2]));if(Ot>Zt)return null;const ae=Math.max(Math.min(ot[1],ot[3]),Math.min(it[1],it[3])),se=Math.min(Math.max(ot[1],ot[3]),Math.max(it[1],it[3]));return ae>se?null:[Ot,ae,Zt,se]}static bezierBoundingBox(ot,it,Ot,Zt,ae,se,Ve,re){const Ae=[],Le=[[],[]];let Ze,$e,hn,xe,an,dn,bn,yn;for(let _n=0;_n<2;++_n){if(_n===0?($e=6*ot-12*Ot+6*ae,Ze=-3*ot+9*Ot-9*ae+3*Ve,hn=3*Ot-3*ot):($e=6*it-12*Zt+6*se,Ze=-3*it+9*Zt-9*se+3*re,hn=3*Zt-3*it),Math.abs(Ze)<1e-12){if(Math.abs($e)<1e-12)continue;xe=-hn/$e,0<xe&&xe<1&&Ae.push(xe);continue}bn=$e*$e-4*hn*Ze,yn=Math.sqrt(bn),!(bn<0)&&(an=(-$e+yn)/(2*Ze),0<an&&an<1&&Ae.push(an),dn=(-$e-yn)/(2*Ze),0<dn&&dn<1&&Ae.push(dn))}let sn=Ae.length,Ue;const on=sn;for(;sn--;)xe=Ae[sn],Ue=1-xe,Le[0][sn]=Ue*Ue*Ue*ot+3*Ue*Ue*xe*Ot+3*Ue*xe*xe*ae+xe*xe*xe*Ve,Le[1][sn]=Ue*Ue*Ue*it+3*Ue*Ue*xe*Zt+3*Ue*xe*xe*se+xe*xe*xe*re;return Le[0][on]=ot,Le[1][on]=it,Le[0][on+1]=Ve,Le[1][on+1]=re,Le[0].length=Le[1].length=on+2,[Math.min(...Le[0]),Math.min(...Le[1]),Math.max(...Le[0]),Math.max(...Le[1])]}}e.Util=Q;const X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function vt(_t){if(_t[0]>=""){let it;if(_t[0]===""&&_t[1]===""?it="utf-16be":_t[0]===""&&_t[1]===""?it="utf-16le":_t[0]===""&&_t[1]===""&&_t[2]===""&&(it="utf-8"),it)try{const Ot=new TextDecoder(it,{fatal:!0}),Zt=D(_t);return Ot.decode(Zt)}catch(Ot){gt(`stringToPDFString: "${Ot}".`)}}const ot=[];for(let it=0,Ot=_t.length;it<Ot;it++){const Zt=X[_t.charCodeAt(it)];ot.push(Zt?String.fromCharCode(Zt):_t.charAt(it))}return ot.join("")}function Pt(_t){return decodeURIComponent(escape(_t))}function Dt(_t){return unescape(encodeURIComponent(_t))}function Ft(_t){return typeof _t=="object"&&_t!==null&&_t.byteLength!==void 0}function Ht(_t,ot){if(_t.length!==ot.length)return!1;for(let it=0,Ot=_t.length;it<Ot;it++)if(_t[it]!==ot[it])return!1;return!0}function le(_t=new Date){return[_t.getUTCFullYear().toString(),(_t.getUTCMonth()+1).toString().padStart(2,"0"),_t.getUTCDate().toString().padStart(2,"0"),_t.getUTCHours().toString().padStart(2,"0"),_t.getUTCMinutes().toString().padStart(2,"0"),_t.getUTCSeconds().toString().padStart(2,"0")].join("")}function fe(){const _t=Object.create(null);let ot=!1;return Object.defineProperty(_t,"settled",{get(){return ot}}),_t.promise=new Promise(function(it,Ot){_t.resolve=function(Zt){ot=!0,it(Zt)},_t.reject=function(Zt){ot=!0,Ot(Zt)}}),_t}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,e,i,o,n,R,U,O,P,v,Kn,k,C,Jn,b,u;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:A,NodeCMapReaderFactory:l,NodeStandardFontDataFactory:h}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=A,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=l,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=h}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:A}=__w_pdfjs_require__(21);createPDFNetworkStream=l=>new A(l)}else{const{PDFNetworkStream:A}=__w_pdfjs_require__(24),{PDFFetchStream:l}=__w_pdfjs_require__(25);createPDFNetworkStream=h=>(0,_display_utils.isValidFetchUrl)(h.url)?new l(h):new A(h)}function getDocument(A){if(typeof A=="string"||A instanceof URL)A={url:A};else if((0,_util.isArrayBuffer)(A))A={data:A};else if(A instanceof PDFDataRangeTransport)(0,_display_utils.deprecated)("`PDFDataRangeTransport`-instance, please use a parameter object with `range`-property instead."),A={range:A};else if(typeof A!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!A.url&&!A.data&&!A.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const l=new PDFDocumentLoadingTask,h=A.url?getUrlProp(A.url):null,r=A.data?getDataProp(A.data):null,s=A.httpHeaders||null,_=A.withCredentials===!0,a=A.password??null,T=A.range instanceof PDFDataRangeTransport?A.range:null,I=Number.isInteger(A.rangeChunkSize)&&A.rangeChunkSize>0?A.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let J=A.worker instanceof PDFWorker?A.worker:null;const ht=A.verbosity,wt=typeof A.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(A.docBaseUrl)?A.docBaseUrl:null,pt=typeof A.cMapUrl=="string"?A.cMapUrl:null,mt=A.cMapPacked!==!1,ut=A.CMapReaderFactory||DefaultCMapReaderFactory,Z=typeof A.standardFontDataUrl=="string"?A.standardFontDataUrl:null,nt=A.StandardFontDataFactory||DefaultStandardFontDataFactory,gt=A.stopAtErrors!==!0,St=Number.isInteger(A.maxImageSize)&&A.maxImageSize>-1?A.maxImageSize:-1,V=A.isEvalSupported!==!1,S=typeof A.isOffscreenCanvasSupported=="boolean"?A.isOffscreenCanvasSupported:!_is_node.isNodeJS,p=typeof A.disableFontFace=="boolean"?A.disableFontFace:_is_node.isNodeJS,x=A.fontExtraProperties===!0,H=A.enableXfa===!0,W=A.ownerDocument||globalThis.document,j=A.disableRange===!0,et=A.disableStream===!0,dt=A.disableAutoFetch===!0,bt=A.pdfBug===!0,lt=T?T.length:A.length??NaN,d=typeof A.useSystemFonts=="boolean"?A.useSystemFonts:!_is_node.isNodeJS&&!p,y=typeof A.useWorkerFetch=="boolean"?A.useWorkerFetch:ut===_display_utils.DOMCMapReaderFactory&&nt===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(pt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Z,document.baseURI),D=null;(0,_util.setVerbosityLevel)(ht);const F=y?null:{cMapReaderFactory:new ut({baseUrl:pt,isCompressed:mt}),standardFontDataFactory:new nt({baseUrl:Z})};if(!J){const tt={verbosity:ht,port:_worker_options.GlobalWorkerOptions.workerPort};J=tt.port?PDFWorker.fromPort(tt):new PDFWorker(tt),l._worker=J}const E=l.docId,z={docId:E,apiVersion:"3.4.120",data:r,password:a,disableAutoFetch:dt,rangeChunkSize:I,length:lt,docBaseUrl:wt,enableXfa:H,evaluatorOptions:{maxImageSize:St,disableFontFace:p,ignoreErrors:gt,isEvalSupported:V,isOffscreenCanvasSupported:S,fontExtraProperties:x,useSystemFonts:d,cMapUrl:y?pt:null,standardFontDataUrl:y?Z:null}},Y={ignoreErrors:gt,isEvalSupported:V,disableFontFace:p,fontExtraProperties:x,enableXfa:H,ownerDocument:W,disableAutoFetch:dt,pdfBug:bt,styleElement:D};return J.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const tt=_fetchDocument(J,z),ft=new Promise(function(B){let Q;T?Q=new _transport_stream.PDFDataTransportStream({length:lt,initialData:T.initialData,progressiveDone:T.progressiveDone,contentDispositionFilename:T.contentDispositionFilename,disableRange:j,disableStream:et},T):r||(Q=createPDFNetworkStream({url:h,length:lt,httpHeaders:s,withCredentials:_,rangeChunkSize:I,disableRange:j,disableStream:et})),B(Q)});return Promise.all([tt,ft]).then(function([B,Q]){if(l.destroyed)throw new Error("Loading aborted");const X=new _message_handler.MessageHandler(E,B,J.port),vt=new WorkerTransport(X,l,Q,Y,F);l._transport=vt,X.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(A,l){if(A.destroyed)throw new Error("Worker was destroyed");const h=await A.messageHandler.sendWithPromise("GetDocRequest",l,l.data?[l.data.buffer]:null);if(A.destroyed)throw new Error("Worker was destroyed");return h}function getUrlProp(A){if(A instanceof URL)return A.href;try{return new URL(A,window.location).href}catch{if(_is_node.isNodeJS&&typeof A=="string")return A}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(A){if(_is_node.isNodeJS&&typeof Buffer<"u"&&A instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(A);if(A instanceof Uint8Array&&A.byteLength===A.buffer.byteLength)return A;if(typeof A=="string")return(0,_util.stringToBytes)(A);if(typeof A=="object"&&!isNaN(A==null?void 0:A.length)||(0,_util.isArrayBuffer)(A))return new Uint8Array(A);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const f=class f{constructor(){Rt(this,e,null);this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Yn(f,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get onUnsupportedFeature(){return M(this,e)}set onUnsupportedFeature(l){(0,_display_utils.deprecated)("The PDFDocumentLoadingTask onUnsupportedFeature property will be removed in the future."),It(this,e,l)}get promise(){return this._capability.promise}async destroy(){var l;this.destroyed=!0,await((l=this._transport)==null?void 0:l.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,e=new WeakMap,Rt(f,t,0);let PDFDocumentLoadingTask=f;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,h,r=!1,s=null){this.length=l,this.initialData=h,this.progressiveDone=r,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,h){for(const r of this._rangeListeners)r(l,h)}onDataProgress(l,h){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(l,h)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const h of this._progressiveReadListeners)h(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,h){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,h){this._pdfInfo=l,this._transport=h}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,h,r,s,_=!1){this._pageIndex=l,this._pageInfo=h,this._ownerDocument=s,this._transport=r,this._stats=_?new _display_utils.StatTimer:null,this._pdfBug=_,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:h=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:_=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:h,offsetX:r,offsetY:s,dontFlip:_})}getAnnotations({intent:l="display"}={}){const h=this._transport.getRenderingIntent(l);return this._transport.getAnnotations(this._pageIndex,h.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var l;return((l=this._transport._htmlForXfa)==null?void 0:l.children[this._pageIndex])||null}render({canvasContext:l,viewport:h,intent:r="display",annotationMode:s=_util.AnnotationMode.ENABLE,transform:_=null,canvasFactory:a=null,background:T=null,optionalContentConfigPromise:I=null,annotationCanvasMap:J=null,pageColors:ht=null,printAnnotationStorage:wt=null}){var V,S;(V=this._stats)==null||V.time("Overall");const pt=this._transport.getRenderingIntent(r,s,wt);this.pendingCleanup=!1,I||(I=this._transport.getOptionalContentConfig());let mt=this._intentStates.get(pt.cacheKey);mt||(mt=Object.create(null),this._intentStates.set(pt.cacheKey,mt)),mt.streamReaderCancelTimeout&&(clearTimeout(mt.streamReaderCancelTimeout),mt.streamReaderCancelTimeout=null);const ut=a||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),Z=!!(pt.renderingIntent&_util.RenderingIntentFlag.PRINT);mt.displayReadyCapability||(mt.displayReadyCapability=(0,_util.createPromiseCapability)(),mt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(S=this._stats)==null||S.time("Page Request"),this._pumpOperatorList(pt));const nt=p=>{var x,H;mt.renderTasks.delete(gt),(this.cleanupAfterRender||Z)&&(this.pendingCleanup=!0),this._tryCleanup(),p?(gt.capability.reject(p),this._abortOperatorList({intentState:mt,reason:p instanceof Error?p:new Error(p)})):gt.capability.resolve(),(x=this._stats)==null||x.timeEnd("Rendering"),(H=this._stats)==null||H.timeEnd("Overall")},gt=new InternalRenderTask({callback:nt,params:{canvasContext:l,viewport:h,transform:_,background:T},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:J,operatorList:mt.operatorList,pageIndex:this._pageIndex,canvasFactory:ut,useRequestAnimationFrame:!Z,pdfBug:this._pdfBug,pageColors:ht});(mt.renderTasks||(mt.renderTasks=new Set)).add(gt);const St=gt.task;return Promise.all([mt.displayReadyCapability.promise,I]).then(([p,x])=>{var H;if(this.pendingCleanup){nt();return}(H=this._stats)==null||H.time("Rendering"),gt.initializeGraphics({transparency:p,optionalContentConfig:x}),gt.operatorListChanged()}).catch(nt),St}getOperatorList({intent:l="display",annotationMode:h=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}={}){var I;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(T))}const _=this._transport.getRenderingIntent(l,h,r,!0);let a=this._intentStates.get(_.cacheKey);a||(a=Object.create(null),this._intentStates.set(_.cacheKey,a));let T;return a.opListReadCapability||(T=Object.create(null),T.operatorListChanged=s,a.opListReadCapability=(0,_util.createPromiseCapability)(),(a.renderTasks||(a.renderTasks=new Set)).add(T),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(_)),a.opListReadCapability.promise}streamTextContent({disableCombineTextItems:l=!1,includeMarkedContent:h=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:l!==!0,includeMarkedContent:h===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const h=this.streamTextContent(l);return new Promise(function(r,s){function _(){a.read().then(function({value:I,done:J}){if(J){r(T);return}Object.assign(T.styles,I.styles),T.items.push(...I.items),_()},s)}const a=h.getReader(),T={items:[],styles:Object.create(null)};_()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const h of this._intentStates.values())if(this._abortOperatorList({intentState:h,reason:new Error("Page was destroyed."),force:!0}),!h.opListReadCapability)for(const r of h.renderTasks)l.push(r.completed),r.cancel();return this.objs.clear(),this.pendingCleanup=!1,Promise.all(l)}cleanup(l=!1){return this.pendingCleanup=!0,this._tryCleanup(l)}_tryCleanup(l=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:h,operatorList:r}of this._intentStates.values())if(h.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),l&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(l,h){var s,_;const r=this._intentStates.get(h);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(_=r.displayReadyCapability)==null||_.resolve(l))}_renderPageChunk(l,h){for(let r=0,s=l.length;r<s;r++)h.operatorList.fnArray.push(l.fnArray[r]),h.operatorList.argsArray.push(l.argsArray[r]);h.operatorList.lastChunk=l.lastChunk,h.operatorList.separateAnnots=l.separateAnnots;for(const r of h.renderTasks)r.operatorListChanged();l.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:l,cacheKey:h,annotationStorageMap:r}){const _=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:h,annotationStorage:r}).getReader(),a=this._intentStates.get(h);a.streamReader=_;const T=()=>{_.read().then(({value:I,done:J})=>{if(J){a.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(I,a),T())},I=>{if(a.streamReader=null,!this._transport.destroyed){if(a.operatorList){a.operatorList.lastChunk=!0;for(const J of a.renderTasks)J.operatorListChanged();this._tryCleanup()}if(a.displayReadyCapability)a.displayReadyCapability.reject(I);else if(a.opListReadCapability)a.opListReadCapability.reject(I);else throw I}})};T()}_abortOperatorList({intentState:l,reason:h,force:r=!1}){if(l.streamReader){if(l.streamReaderCancelTimeout&&(clearTimeout(l.streamReaderCancelTimeout),l.streamReaderCancelTimeout=null),!r){if(l.renderTasks.size>0)return;if(h instanceof _display_utils.RenderingCancelledException){let s=RENDERING_CANCELLED_TIMEOUT;h.extraDelay>0&&h.extraDelay<1e3&&(s+=h.extraDelay),l.streamReaderCancelTimeout=setTimeout(()=>{l.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:l,reason:h,force:!0})},s);return}}if(l.streamReader.cancel(new _util.AbortException(h.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[s,_]of this._intentStates)if(_===l){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Rt(this,i,new Set);Rt(this,o,Promise.resolve())}postMessage(l,h){const r={data:structuredClone(l,h)};M(this,o).then(()=>{for(const s of M(this,i))s.call(this,r)})}addEventListener(l,h){M(this,i).add(h)}removeEventListener(l,h){M(this,i).delete(h)}terminate(){M(this,i).clear()}}i=new WeakMap,o=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const A=(n=document==null?void 0:document.currentScript)==null?void 0:n.src;A&&(PDFWorkerUtil.fallbackWorkerSrc=A.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(A,l){let h;try{if(h=new URL(A),!h.origin||h.origin==="null")return!1}catch{return!1}const r=new URL(l,h);return h.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(A){const l=`importScripts("${A}");`;return URL.createObjectURL(new Blob([l]))}}const _PDFWorker=class _PDFWorker{constructor({name:A=null,port:l=null,verbosity:h=(0,_util.getVerbosityLevel)()}={}){if(l&&M(_PDFWorker,R).has(l))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=A,this.destroyed=!1,this.verbosity=h,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,l){M(_PDFWorker,R).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(A){this._port=A,this._messageHandler=new _message_handler.MessageHandler("main","worker",A),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:A}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,A)||(A=PDFWorkerUtil.createCDNWrapper(new URL(A,window.location).href));const l=new Worker(A),h=new _message_handler.MessageHandler("main","worker",l),r=()=>{l.removeEventListener("error",s),h.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=()=>{this._webWorker||r()};l.addEventListener("error",s),h.on("test",a=>{if(l.removeEventListener("error",s),this.destroyed){r();return}a?(this._messageHandler=h,this._port=l,this._webWorker=l,this._readyCapability.resolve(),h.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),h.destroy(),l.terminate())}),h.on("ready",a=>{if(l.removeEventListener("error",s),this.destroyed){r();return}try{_()}catch{this._setupFakeWorker()}});const _=()=>{const a=new Uint8Array;h.send("test",a,[a.buffer])};_();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(A=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const h=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(h+"_worker",h,l);A.setup(r,l);const s=new _message_handler.MessageHandler(h,h+"_worker",l);this._messageHandler=s,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})}).catch(A=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${A.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),M(_PDFWorker,R).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(A){if(!(A!=null&&A.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return M(this,R).has(A.port)?M(this,R).get(A.port):new _PDFWorker(A)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var A;try{return((A=globalThis.pdfjsWorker)==null?void 0:A.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};R=new WeakMap,Rt(_PDFWorker,R,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(l,h,r,s,_){Rt(this,v);Rt(this,U,new Map);Rt(this,O,new Map);Rt(this,P,new Map);this.messageHandler=l,this.loadingTask=h,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this._params=s,this.cMapReaderFactory=_==null?void 0:_.cMapReaderFactory,this.standardFontDataFactory=_==null?void 0:_.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(l,h=_util.AnnotationMode.ENABLE,r=null,s=!1){let _=_util.RenderingIntentFlag.DISPLAY,a=null;switch(l){case"any":_=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":_=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(h){case _util.AnnotationMode.DISABLE:_+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:_+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:_+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,a=(_&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${h}`)}return s&&(_+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:_,cacheKey:`${_}_${_annotation_storage.AnnotationStorage.getHash(a)}`,annotationStorageMap:a}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const r of M(this,O).values())l.push(r._destroy());M(this,O).clear(),M(this,P).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const h=this.messageHandler.sendWithPromise("Terminate",null);return l.push(h),Promise.all(l).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),M(this,U).clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:h}=this;l.on("GetReader",(r,s)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=_=>{this._lastProgress={loaded:_.loaded,total:_.total}},s.onPull=()=>{this._fullReader.read().then(function({value:_,done:a}){if(a){s.close();return}(0,_util.assert)(_ instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(_),1,[_])}).catch(_=>{s.error(_)})},s.onCancel=_=>{this._fullReader.cancel(_),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),l.on("ReaderHeadersReady",r=>{const s=(0,_util.createPromiseCapability)(),_=this._fullReader;return _.headersReady.then(()=>{var a;(!_.isStreamingSupported||!_.isRangeSupported)&&(this._lastProgress&&((a=h.onProgress)==null||a.call(h,this._lastProgress)),_.onProgress=T=>{var I;(I=h.onProgress)==null||I.call(h,{loaded:T.loaded,total:T.total})}),s.resolve({isStreamingSupported:_.isStreamingSupported,isRangeSupported:_.isRangeSupported,contentLength:_.contentLength})},s.reject),s.promise}),l.on("GetRangeReader",(r,s)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const _=this._networkStream.getRangeReader(r.begin,r.end);if(!_){s.close();return}s.onPull=()=>{_.read().then(function({value:a,done:T}){if(T){s.close();return}(0,_util.assert)(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{_.cancel(a),s.ready.catch(T=>{if(!this.destroyed)throw T})}}),l.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,h._capability.resolve(new PDFDocumentProxy(r,this))}),l.on("DocException",function(r){let s;switch(r.name){case"PasswordException":s=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":s=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":s=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":s=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":s=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}h._capability.reject(s)}),l.on("PasswordRequest",r=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),h.onPassword){const s=_=>{_ instanceof Error?this._passwordCapability.reject(_):this._passwordCapability.resolve({password:_})};try{h.onPassword(s,r.code)}catch(_){this._passwordCapability.reject(_)}}else this._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return this._passwordCapability.promise}),l.on("DataLoaded",r=>{var s;(s=h.onProgress)==null||s.call(h,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),l.on("StartRenderPage",r=>{if(this.destroyed)return;M(this,O).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),l.on("commonobj",([r,s,_])=>{var a;if(!this.destroyed&&!this.commonObjs.has(r))switch(s){case"Font":const T=this._params;if("error"in _){const ht=_.error;(0,_util.warn)(`Error during font loading: ${ht}`),this.commonObjs.resolve(r,ht);break}let I=null;T.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)&&(I={registerFont(ht,wt){globalThis.FontInspector.fontAdded(ht,wt)}});const J=new _font_loader.FontFaceObject(_,{isEvalSupported:T.isEvalSupported,disableFontFace:T.disableFontFace,ignoreErrors:T.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:I});this.fontLoader.bind(J).catch(ht=>l.sendWithPromise("FontFallback",{id:r})).finally(()=>{!T.fontExtraProperties&&J.data&&(J.data=null),this.commonObjs.resolve(r,J)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,_);break;default:throw new Error(`Got unknown common object type ${s}`)}}),l.on("obj",([r,s,_,a])=>{var I;if(this.destroyed)return;const T=M(this,O).get(s);if(!T.objs.has(r))switch(_){case"Image":T.objs.resolve(r,a);const J=8e6;if(a){let ht;if(a.bitmap){const{width:wt,height:pt}=a;ht=wt*pt*4}else ht=((I=a.data)==null?void 0:I.length)||0;ht>J&&(T.cleanupAfterRender=!0)}break;case"Pattern":T.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${_}`)}}),l.on("DocProgress",r=>{var s;this.destroyed||(s=h.onProgress)==null||s.call(h,{loaded:r.loaded,total:r.total})}),l.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),l.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:l}){var h,r;this.destroyed||(r=(h=this.loadingTask).onUnsupportedFeature)==null||r.call(h,l)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var l;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((l=this._fullReader)==null?void 0:l.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const h=l-1,r=M(this,P).get(h);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:h}).then(_=>{if(this.destroyed)throw new Error("Transport destroyed");const a=new PDFPageProxy(h,_,this,this._params.ownerDocument,this._params.pdfBug);return M(this,O).set(h,a),a});return M(this,P).set(h,s),s}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,h){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:h})}getFieldObjects(){return Et(this,v,Kn).call(this,"GetFieldObjects")}hasJSActions(){return Et(this,v,Kn).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const l="GetMetadata",h=M(this,U).get(l);if(h)return h;const r=this.messageHandler.sendWithPromise(l,null).then(s=>{var _,a;return{info:s[0],metadata:s[1]?new _metadata.Metadata(s[1]):null,contentDispositionFilename:((_=this._fullReader)==null?void 0:_.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return M(this,U).set(l,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const h of M(this,O).values())if(!h.cleanup())throw new Error(`startCleanup: Page ${h.pageNumber} is currently rendering.`);this.commonObjs.clear(),l||this.fontLoader.clear(),M(this,U).clear()}}get loadingParams(){const{disableAutoFetch:l,enableXfa:h}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l,enableXfa:h})}}U=new WeakMap,O=new WeakMap,P=new WeakMap,v=new WeakSet,Kn=function(l,h=null){const r=M(this,U).get(l);if(r)return r;const s=this.messageHandler.sendWithPromise(l,h);return M(this,U).set(l,s),s};class PDFObjects{constructor(){Rt(this,C);Rt(this,k,Object.create(null))}get(l,h=null){if(h){const s=Et(this,C,Jn).call(this,l);return s.capability.promise.then(()=>h(s.data)),null}const r=M(this,k)[l];if(!(r!=null&&r.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${l}.`);return r.data}has(l){const h=M(this,k)[l];return(h==null?void 0:h.capability.settled)||!1}resolve(l,h=null){const r=Et(this,C,Jn).call(this,l);r.data=h,r.capability.resolve()}clear(){var l;for(const h in M(this,k)){const{data:r}=M(this,k)[h];(l=r==null?void 0:r.bitmap)==null||l.close()}It(this,k,Object.create(null))}}k=new WeakMap,C=new WeakSet,Jn=function(l){const h=M(this,k)[l];return h||(M(this,k)[l]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(l){Rt(this,b,null);It(this,b,l),this.onContinue=null}get promise(){return M(this,b).capability.promise}cancel(l=0){M(this,b).cancel(null,l)}get separateAnnots(){const{separateAnnots:l}=M(this,b).operatorList;if(!l)return!1;const{annotationCanvasMap:h}=M(this,b);return l.form||l.canvas&&(h==null?void 0:h.size)>0}}b=new WeakMap,exports.RenderTask=RenderTask;const m=class m{constructor({callback:l,params:h,objs:r,commonObjs:s,annotationCanvasMap:_,operatorList:a,pageIndex:T,canvasFactory:I,useRequestAnimationFrame:J=!1,pdfBug:ht=!1,pageColors:wt=null}){this.callback=l,this.params=h,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=_,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=T,this.canvasFactory=I,this._pdfBug=ht,this.pageColors=wt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=J===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=h.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:h}){var T,I;if(this.cancelled)return;if(this._canvas){if(M(m,u).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");M(m,u).add(this._canvas)}this._pdfBug&&((T=globalThis.StepperManager)!=null&&T.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:_,background:a}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:h},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:_,viewport:s,transparency:l,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(I=this.graphicsReadyCallback)==null||I.call(this)}cancel(l=null,h=0){var r;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),this._canvas&&M(m,u).delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",h))}operatorListChanged(){var l;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(l=this.stepper)==null||l.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&M(m,u).delete(this._canvas),this.callback())))}};u=new WeakMap,Rt(m,u,new WeakSet);let InternalRenderTask=m;const version="3.4.120";exports.version=version;const build="af6414988";exports.build=build},(t,e,f)=>{var O,P,v,Or,k;Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var i=f(1),o=f(4),n=f(8);class R{constructor(){Rt(this,v);Rt(this,O,!1);Rt(this,P,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,b){const u=M(this,P).get(g);return u===void 0?b:Object.assign(b,u)}getRawValue(g){return M(this,P).get(g)}remove(g){if(M(this,P).delete(g),M(this,P).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const b of M(this,P).values())if(b instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,b){const u=M(this,P).get(g);let m=!1;if(u!==void 0)for(const[A,l]of Object.entries(b))u[A]!==l&&(m=!0,u[A]=l);else m=!0,M(this,P).set(g,b);m&&Et(this,v,Or).call(this),b instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(b.constructor._type)}has(g){return M(this,P).has(g)}getAll(){return M(this,P).size>0?(0,i.objectFromMap)(M(this,P)):null}setAll(g){for(const[b,u]of Object.entries(g))this.setValue(b,u)}get size(){return M(this,P).size}resetModified(){M(this,O)&&(It(this,O,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new U(this)}get serializable(){if(M(this,P).size===0)return null;const g=new Map;for(const[b,u]of M(this,P)){const m=u instanceof o.AnnotationEditor?u.serialize():u;m&&g.set(b,m)}return g}static getHash(g){if(!g)return"";const b=new n.MurmurHash3_64;for(const[u,m]of g)b.update(`${u}:${JSON.stringify(m)}`);return b.hexdigest()}}O=new WeakMap,P=new WeakMap,v=new WeakSet,Or=function(){M(this,O)||(It(this,O,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=R;class U extends R{constructor(b){super();Rt(this,k,null);It(this,k,structuredClone(b.serializable))}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return M(this,k)}}k=new WeakMap,e.PrintAnnotationStorage=U},(t,e,f)=>{var R,U,O,P,v,L;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var i=f(5),o=f(1);const k=class k{constructor(g){Rt(this,R,this.focusin.bind(this));Rt(this,U,this.focusout.bind(this));Rt(this,O,!1);Rt(this,P,!1);Rt(this,v,!1);we(this,"_uiManager",null);Rt(this,L,k._zIndex++);this.constructor===k&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager;const{rotation:b,rawDims:{pageWidth:u,pageHeight:m,pageX:A,pageY:l}}=this.parent.viewport;this.rotation=b,this.pageDimensions=[u,m],this.pageTranslation=[A,l];const[h,r]=this.parentDimensions;this.x=g.x/h,this.y=g.y/r,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=M(this,L)}setParent(g){g!==null&&(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions),this.parent=g}focusin(g){M(this,O)?It(this,O,!1):this.parent.setSelected(this)}focusout(g){var u;if(!this.isAttachedToDOM)return;const b=g.relatedTarget;b!=null&&b.closest(`#${this.id}`)||(g.preventDefault(),(u=this.parent)!=null&&u.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(g){const b=this.parent.div.getBoundingClientRect();this.startX=g.clientX-b.x,this.startY=g.clientY-b.y,g.dataTransfer.setData("text/plain",this.id),g.dataTransfer.effectAllowed="move"}setAt(g,b,u,m){const[A,l]=this.parentDimensions;[u,m]=this.screenToPageTranslation(u,m),this.x=(g+u)/A,this.y=(b+m)/l,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(g,b){const[u,m]=this.parentDimensions;[g,b]=this.screenToPageTranslation(g,b),this.x+=g/u,this.y+=b/m,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(g,b){switch(this.parentRotation){case 90:return[b,-g];case 180:return[-g,-b];case 270:return[-b,g];default:return[g,b]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return this._uiManager.viewParameters.rotation}get parentDimensions(){const{realScale:g}=this._uiManager.viewParameters,[b,u]=this.pageDimensions;return[b*g,u*g]}setDims(g,b){const[u,m]=this.parentDimensions;this.div.style.width=`${100*g/u}%`,this.div.style.height=`${100*b/m}%`}fixDims(){const{style:g}=this.div,{height:b,width:u}=g,m=u.endsWith("%"),A=b.endsWith("%");if(m&&A)return;const[l,h]=this.parentDimensions;m||(g.width=`${100*parseFloat(u)/l}%`),A||(g.height=`${100*parseFloat(b)/h}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",M(this,R)),this.div.addEventListener("focusout",M(this,U));const[g,b]=this.getInitialTranslation();return this.translate(g,b),(0,i.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(g){const{isMac:b}=o.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&b){g.preventDefault();return}g.ctrlKey&&!b||g.shiftKey||g.metaKey&&b?this.parent.toggleSelected(this):this.parent.setSelected(this),It(this,O,!0)}getRect(g,b){const u=this.parentScale,[m,A]=this.pageDimensions,[l,h]=this.pageTranslation,r=g/u,s=b/u,_=this.x*m,a=this.y*A,T=this.width*m,I=this.height*A;switch(this.rotation){case 0:return[_+r+l,A-a-s-I+h,_+r+T+l,A-a-s+h];case 90:return[_+s+l,A-a+r+h,_+s+I+l,A-a+r+T+h];case 180:return[_-r-T+l,A-a+s+h,_-r+l,A-a+s+I+h];case 270:return[_-s-I+l,A-a-r-T+h,_-s+l,A-a-r+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,b){const[u,m,A,l]=g,h=A-u,r=l-m;switch(this.rotation){case 0:return[u,b-l,h,r];case 90:return[u,b-m,r,h];case 180:return[A,b-m,h,r];case 270:return[A,b-l,r,h];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){It(this,v,!0)}disableEditMode(){It(this,v,!1)}isInEditMode(){return M(this,v)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var g;(g=this.div)==null||g.addEventListener("focusin",M(this,R))}serialize(){(0,o.unreachable)("An editor must be serializable")}static deserialize(g,b,u){const m=new this.prototype.constructor({parent:b,id:b.getNextId(),uiManager:u});m.rotation=g.rotation;const[A,l]=m.pageDimensions,[h,r,s,_]=m.getRectInCurrentCoords(g.rect,l);return m.x=h/A,m.y=r/l,m.width=s/A,m.height=_/l,m}remove(){this.div.removeEventListener("focusin",M(this,R)),this.div.removeEventListener("focusout",M(this,U)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var g;(g=this.div)==null||g.classList.add("selectedEditor")}unselect(){var g;(g=this.div)==null||g.classList.remove("selectedEditor")}updateParams(g,b){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return M(this,P)}set isEditing(g){It(this,P,g),g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};R=new WeakMap,U=new WeakMap,O=new WeakMap,P=new WeakMap,v=new WeakMap,L=new WeakMap,we(k,"_colorManager",new i.ColorManager),we(k,"_zIndex",1);let n=k;e.AnnotationEditor=n},(t,e,f)=>{var k,C,g,b,u,m,Ir,h,r,s,_,a,T,I,J,ht,wt,pt,mt,ut,Z,nt,gt,St,V,S,p,x,H,W,j,Lr,Zn,Nr,Br,Ge,Sn,jr,Hr,Qn,En,tr;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=n,e.opacityToHex=R;var i=f(1),o=f(6);function n(ft,B,Q){for(const X of Q)B.addEventListener(X,ft[X].bind(ft))}function R(ft){return Math.round(Math.min(255,Math.max(1,255*ft))).toString(16).padStart(2,"0")}class U{constructor(){Rt(this,k,0)}getId(){return`${i.AnnotationEditorPrefix}${Yn(this,k)._++}`}}k=new WeakMap;class O{constructor(B=128){Rt(this,C,[]);Rt(this,g,!1);Rt(this,b);Rt(this,u,-1);It(this,b,B)}add({cmd:B,undo:Q,mustExec:X,type:vt=NaN,overwriteIfSameType:Pt=!1,keepUndo:Dt=!1}){if(X&&B(),M(this,g))return;const Ft={cmd:B,undo:Q,type:vt};if(M(this,u)===-1){M(this,C).length>0&&(M(this,C).length=0),It(this,u,0),M(this,C).push(Ft);return}if(Pt&&M(this,C)[M(this,u)].type===vt){Dt&&(Ft.undo=M(this,C)[M(this,u)].undo),M(this,C)[M(this,u)]=Ft;return}const Ht=M(this,u)+1;Ht===M(this,b)?M(this,C).splice(0,1):(It(this,u,Ht),Ht<M(this,C).length&&M(this,C).splice(Ht)),M(this,C).push(Ft)}undo(){M(this,u)!==-1&&(It(this,g,!0),M(this,C)[M(this,u)].undo(),It(this,g,!1),It(this,u,M(this,u)-1))}redo(){M(this,u)<M(this,C).length-1&&(It(this,u,M(this,u)+1),It(this,g,!0),M(this,C)[M(this,u)].cmd(),It(this,g,!1))}hasSomethingToUndo(){return M(this,u)!==-1}hasSomethingToRedo(){return M(this,u)<M(this,C).length-1}destroy(){It(this,C,null)}}C=new WeakMap,g=new WeakMap,b=new WeakMap,u=new WeakMap,e.CommandManager=O;class P{constructor(B){Rt(this,m);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Q}=i.FeatureTest.platform;for(const[X,vt]of B)for(const Pt of X){const Dt=Pt.startsWith("mac+");Q&&Dt?(this.callbacks.set(Pt.slice(4),vt),this.allKeys.add(Pt.split("+").at(-1))):!Q&&!Dt&&(this.callbacks.set(Pt,vt),this.allKeys.add(Pt.split("+").at(-1)))}}exec(B,Q){if(!this.allKeys.has(Q.key))return;const X=this.callbacks.get(Et(this,m,Ir).call(this,Q));X&&(X.bind(B)(),Q.stopPropagation(),Q.preventDefault())}}m=new WeakSet,Ir=function(B){B.altKey&&this.buffer.push("alt"),B.ctrlKey&&this.buffer.push("ctrl"),B.metaKey&&this.buffer.push("meta"),B.shiftKey&&this.buffer.push("shift"),this.buffer.push(B.key);const Q=this.buffer.join("+");return this.buffer.length=0,Q},e.KeyboardManager=P;const l=class l{get _colors(){const B=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(B),(0,i.shadow)(this,"_colors",B)}convert(B){const Q=(0,o.getRGB)(B);if(!window.matchMedia("(forced-colors: active)").matches)return Q;for(const[X,vt]of this._colors)if(vt.every((Pt,Dt)=>Pt===Q[Dt]))return l._colorsMapping.get(X);return Q}getHexCode(B){const Q=this._colors.get(B);return Q?i.Util.makeHexColor(...Q):B}};we(l,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let v=l;e.ColorManager=v;const tt=class tt{constructor(B,Q,X){Rt(this,j);Rt(this,h,null);Rt(this,r,new Map);Rt(this,s,new Map);Rt(this,_,null);Rt(this,a,new O);Rt(this,T,0);Rt(this,I,null);Rt(this,J,new Set);Rt(this,ht,null);Rt(this,wt,new U);Rt(this,pt,!1);Rt(this,mt,i.AnnotationEditorType.NONE);Rt(this,ut,new Set);Rt(this,Z,this.copy.bind(this));Rt(this,nt,this.cut.bind(this));Rt(this,gt,this.paste.bind(this));Rt(this,St,this.keydown.bind(this));Rt(this,V,this.onEditingAction.bind(this));Rt(this,S,this.onPageChanging.bind(this));Rt(this,p,this.onScaleChanging.bind(this));Rt(this,x,this.onRotationChanging.bind(this));Rt(this,H,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Rt(this,W,null);It(this,W,B),It(this,ht,Q),M(this,ht)._on("editingaction",M(this,V)),M(this,ht)._on("pagechanging",M(this,S)),M(this,ht)._on("scalechanging",M(this,p)),M(this,ht)._on("rotationchanging",M(this,x)),It(this,_,X),this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){Et(this,j,Zn).call(this),M(this,ht)._off("editingaction",M(this,V)),M(this,ht)._off("pagechanging",M(this,S)),M(this,ht)._off("scalechanging",M(this,p)),M(this,ht)._off("rotationchanging",M(this,x));for(const B of M(this,s).values())B.destroy();M(this,s).clear(),M(this,r).clear(),M(this,J).clear(),It(this,h,null),M(this,ut).clear(),M(this,a).destroy()}onPageChanging({pageNumber:B}){It(this,T,B-1)}focusMainContainer(){M(this,W).focus()}addShouldRescale(B){M(this,J).add(B)}removeShouldRescale(B){M(this,J).delete(B)}onScaleChanging({scale:B}){this.commitOrRemove(),this.viewParameters.realScale=B*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Q of M(this,J))Q.onScaleChanging()}onRotationChanging({pagesRotation:B}){this.commitOrRemove(),this.viewParameters.rotation=B}addToAnnotationStorage(B){!B.isEmpty()&&M(this,_)&&!M(this,_).has(B.id)&&M(this,_).setValue(B.id,B)}copy(B){if(B.preventDefault(),M(this,h)&&M(this,h).commitOrRemove(),!this.hasSelection)return;const Q=[];for(const X of M(this,ut))X.isEmpty()||Q.push(X.serialize());Q.length!==0&&B.clipboardData.setData("application/pdfjs",JSON.stringify(Q))}cut(B){this.copy(B),this.delete()}paste(B){B.preventDefault();let Q=B.clipboardData.getData("application/pdfjs");if(!Q)return;try{Q=JSON.parse(Q)}catch(vt){(0,i.warn)(`paste: "${vt.message}".`);return}if(!Array.isArray(Q))return;this.unselectAll();const X=M(this,s).get(M(this,T));try{const vt=[];for(const Ft of Q){const Ht=X.deserialize(Ft);if(!Ht)return;vt.push(Ht)}const Pt=()=>{for(const Ft of vt)Et(this,j,Qn).call(this,Ft);Et(this,j,tr).call(this,vt)},Dt=()=>{for(const Ft of vt)Ft.remove()};this.addCommands({cmd:Pt,undo:Dt,mustExec:!0})}catch(vt){(0,i.warn)(`paste: "${vt.message}".`)}}keydown(B){var Q;(Q=this.getActive())!=null&&Q.shouldGetKeyboardEvents()||tt._keyboardManager.exec(this,B)}onEditingAction(B){["undo","redo","delete","selectAll"].includes(B.name)&&this[B.name]()}setEditingState(B){B?(Et(this,j,Lr).call(this),Et(this,j,Nr).call(this),Et(this,j,Ge).call(this,{isEditing:M(this,mt)!==i.AnnotationEditorType.NONE,isEmpty:Et(this,j,En).call(this),hasSomethingToUndo:M(this,a).hasSomethingToUndo(),hasSomethingToRedo:M(this,a).hasSomethingToRedo(),hasSelectedEditor:!1})):(Et(this,j,Zn).call(this),Et(this,j,Br).call(this),Et(this,j,Ge).call(this,{isEditing:!1}))}registerEditorTypes(B){if(!M(this,I)){It(this,I,B);for(const Q of M(this,I))Et(this,j,Sn).call(this,Q.defaultPropertiesToUpdate)}}getId(){return M(this,wt).getId()}get currentLayer(){return M(this,s).get(M(this,T))}get currentPageIndex(){return M(this,T)}addLayer(B){M(this,s).set(B.pageIndex,B),M(this,pt)?B.enable():B.disable()}removeLayer(B){M(this,s).delete(B.pageIndex)}updateMode(B){if(It(this,mt,B),B===i.AnnotationEditorType.NONE)this.setEditingState(!1),Et(this,j,Hr).call(this);else{this.setEditingState(!0),Et(this,j,jr).call(this);for(const Q of M(this,s).values())Q.updateMode(B)}}updateToolbar(B){B!==M(this,mt)&&M(this,ht).dispatch("switchannotationeditormode",{source:this,mode:B})}updateParams(B,Q){if(M(this,I)){for(const X of M(this,ut))X.updateParams(B,Q);for(const X of M(this,I))X.updateDefaultParams(B,Q)}}getEditors(B){const Q=[];for(const X of M(this,r).values())X.pageIndex===B&&Q.push(X);return Q}getEditor(B){return M(this,r).get(B)}addEditor(B){M(this,r).set(B.id,B)}removeEditor(B){var Q;M(this,r).delete(B.id),this.unselect(B),(Q=M(this,_))==null||Q.remove(B.id)}setActiveEditor(B){M(this,h)!==B&&(It(this,h,B),B&&Et(this,j,Sn).call(this,B.propertiesToUpdate))}toggleSelected(B){if(M(this,ut).has(B)){M(this,ut).delete(B),B.unselect(),Et(this,j,Ge).call(this,{hasSelectedEditor:this.hasSelection});return}M(this,ut).add(B),B.select(),Et(this,j,Sn).call(this,B.propertiesToUpdate),Et(this,j,Ge).call(this,{hasSelectedEditor:!0})}setSelected(B){for(const Q of M(this,ut))Q!==B&&Q.unselect();M(this,ut).clear(),M(this,ut).add(B),B.select(),Et(this,j,Sn).call(this,B.propertiesToUpdate),Et(this,j,Ge).call(this,{hasSelectedEditor:!0})}isSelected(B){return M(this,ut).has(B)}unselect(B){B.unselect(),M(this,ut).delete(B),Et(this,j,Ge).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return M(this,ut).size!==0}undo(){M(this,a).undo(),Et(this,j,Ge).call(this,{hasSomethingToUndo:M(this,a).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Et(this,j,En).call(this)})}redo(){M(this,a).redo(),Et(this,j,Ge).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:M(this,a).hasSomethingToRedo(),isEmpty:Et(this,j,En).call(this)})}addCommands(B){M(this,a).add(B),Et(this,j,Ge).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Et(this,j,En).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const B=[...M(this,ut)],Q=()=>{for(const vt of B)vt.remove()},X=()=>{for(const vt of B)Et(this,j,Qn).call(this,vt)};this.addCommands({cmd:Q,undo:X,mustExec:!0})}commitOrRemove(){var B;(B=M(this,h))==null||B.commitOrRemove()}selectAll(){for(const B of M(this,ut))B.commit();Et(this,j,tr).call(this,M(this,r).values())}unselectAll(){if(M(this,h)){M(this,h).commitOrRemove();return}if(M(this,ut).size!==0){for(const B of M(this,ut))B.unselect();M(this,ut).clear(),Et(this,j,Ge).call(this,{hasSelectedEditor:!1})}}isActive(B){return M(this,h)===B}getActive(){return M(this,h)}getMode(){return M(this,mt)}};h=new WeakMap,r=new WeakMap,s=new WeakMap,_=new WeakMap,a=new WeakMap,T=new WeakMap,I=new WeakMap,J=new WeakMap,ht=new WeakMap,wt=new WeakMap,pt=new WeakMap,mt=new WeakMap,ut=new WeakMap,Z=new WeakMap,nt=new WeakMap,gt=new WeakMap,St=new WeakMap,V=new WeakMap,S=new WeakMap,p=new WeakMap,x=new WeakMap,H=new WeakMap,W=new WeakMap,j=new WeakSet,Lr=function(){M(this,W).addEventListener("keydown",M(this,St))},Zn=function(){M(this,W).removeEventListener("keydown",M(this,St))},Nr=function(){document.addEventListener("copy",M(this,Z)),document.addEventListener("cut",M(this,nt)),document.addEventListener("paste",M(this,gt))},Br=function(){document.removeEventListener("copy",M(this,Z)),document.removeEventListener("cut",M(this,nt)),document.removeEventListener("paste",M(this,gt))},Ge=function(B){Object.entries(B).some(([X,vt])=>M(this,H)[X]!==vt)&&M(this,ht).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(M(this,H),B)})},Sn=function(B){M(this,ht).dispatch("annotationeditorparamschanged",{source:this,details:B})},jr=function(){if(!M(this,pt)){It(this,pt,!0);for(const B of M(this,s).values())B.enable()}},Hr=function(){if(this.unselectAll(),M(this,pt)){It(this,pt,!1);for(const B of M(this,s).values())B.disable()}},Qn=function(B){const Q=M(this,s).get(B.pageIndex);Q?Q.addOrRebuild(B):this.addEditor(B)},En=function(){if(M(this,r).size===0)return!0;if(M(this,r).size===1)for(const B of M(this,r).values())return B.isEmpty();return!1},tr=function(B){M(this,ut).clear();for(const Q of B)Q.isEmpty()||(M(this,ut).add(Q),Q.select());Et(this,j,Ge).call(this,{hasSelectedEditor:!0})},we(tt,"_keyboardManager",new P([[["ctrl+a","mac+meta+a"],tt.prototype.selectAll],[["ctrl+z","mac+meta+z"],tt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],tt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],tt.prototype.delete],[["Escape","mac+Escape"],tt.prototype.unselectAll]]));let L=tt;e.AnnotationEditorUIManager=L},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=s,e.getColorValues=J,e.getCurrentTransform=ht,e.getCurrentTransformInverse=wt,e.getFilenameFromUrl=m,e.getPdfFilenameFromUrl=A,e.getRGB=I,e.getXfaPageViewport=T,e.isDataScheme=b,e.isPdfFile=u,e.isValidFetchUrl=h,e.loadScript=r,e.setLayerDimensions=pt;var i=f(7),o=f(1);const n="http://www.w3.org/2000/svg",R="pdfjs_internal_id_";e.AnnotationPrefix=R;const mt=class mt{};we(mt,"CSS",96),we(mt,"PDF",72),we(mt,"PDF_TO_CSS_UNITS",mt.CSS/mt.PDF);let U=mt;e.PixelsPerInch=U;class O extends i.BaseCanvasFactory{constructor({ownerDocument:Z=globalThis.document}={}){super(),this._document=Z}_createCanvas(Z,nt){const gt=this._document.createElement("canvas");return gt.width=Z,gt.height=nt,gt}}e.DOMCanvasFactory=O;async function P(ut,Z=!1){if(h(ut,document.baseURI)){const nt=await fetch(ut);if(!nt.ok)throw new Error(nt.statusText);return Z?new Uint8Array(await nt.arrayBuffer()):(0,o.stringToBytes)(await nt.text())}return new Promise((nt,gt)=>{const St=new XMLHttpRequest;St.open("GET",ut,!0),Z&&(St.responseType="arraybuffer"),St.onreadystatechange=()=>{if(St.readyState===XMLHttpRequest.DONE){if(St.status===200||St.status===0){let V;if(Z&&St.response?V=new Uint8Array(St.response):!Z&&St.responseText&&(V=(0,o.stringToBytes)(St.responseText)),V){nt(V);return}}gt(new Error(St.statusText))}},St.send(null)})}class v extends i.BaseCMapReaderFactory{_fetchData(Z,nt){return P(Z,this.isCompressed).then(gt=>({cMapData:gt,compressionType:nt}))}}e.DOMCMapReaderFactory=v;class L extends i.BaseStandardFontDataFactory{_fetchData(Z){return P(Z,!0)}}e.DOMStandardFontDataFactory=L;class k extends i.BaseSVGFactory{_createSVG(Z){return document.createElementNS(n,Z)}}e.DOMSVGFactory=k;class C{constructor({viewBox:Z,scale:nt,rotation:gt,offsetX:St=0,offsetY:V=0,dontFlip:S=!1}){this.viewBox=Z,this.scale=nt,this.rotation=gt,this.offsetX=St,this.offsetY=V;const p=(Z[2]+Z[0])/2,x=(Z[3]+Z[1])/2;let H,W,j,et;switch(gt%=360,gt<0&&(gt+=360),gt){case 180:H=-1,W=0,j=0,et=1;break;case 90:H=0,W=1,j=1,et=0;break;case 270:H=0,W=-1,j=-1,et=0;break;case 0:H=1,W=0,j=0,et=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}S&&(j=-j,et=-et);let dt,bt,lt,d;H===0?(dt=Math.abs(x-Z[1])*nt+St,bt=Math.abs(p-Z[0])*nt+V,lt=(Z[3]-Z[1])*nt,d=(Z[2]-Z[0])*nt):(dt=Math.abs(p-Z[0])*nt+St,bt=Math.abs(x-Z[1])*nt+V,lt=(Z[2]-Z[0])*nt,d=(Z[3]-Z[1])*nt),this.transform=[H*nt,W*nt,j*nt,et*nt,dt-H*nt*p-j*nt*x,bt-W*nt*p-et*nt*x],this.width=lt,this.height=d}get rawDims(){const{viewBox:Z}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:Z[2]-Z[0],pageHeight:Z[3]-Z[1],pageX:Z[0],pageY:Z[1]})}clone({scale:Z=this.scale,rotation:nt=this.rotation,offsetX:gt=this.offsetX,offsetY:St=this.offsetY,dontFlip:V=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:Z,rotation:nt,offsetX:gt,offsetY:St,dontFlip:V})}convertToViewportPoint(Z,nt){return o.Util.applyTransform([Z,nt],this.transform)}convertToViewportRectangle(Z){const nt=o.Util.applyTransform([Z[0],Z[1]],this.transform),gt=o.Util.applyTransform([Z[2],Z[3]],this.transform);return[nt[0],nt[1],gt[0],gt[1]]}convertToPdfPoint(Z,nt){return o.Util.applyInverseTransform([Z,nt],this.transform)}}e.PageViewport=C;class g extends o.BaseException{constructor(Z,nt,gt=0){super(Z,"RenderingCancelledException"),this.type=nt,this.extraDelay=gt}}e.RenderingCancelledException=g;function b(ut){const Z=ut.length;let nt=0;for(;nt<Z&&ut[nt].trim()==="";)nt++;return ut.substring(nt,nt+5).toLowerCase()==="data:"}function u(ut){return typeof ut=="string"&&/\.pdf$/i.test(ut)}function m(ut,Z=!1){return Z||([ut]=ut.split(/[#?]/,1)),ut.substring(ut.lastIndexOf("/")+1)}function A(ut,Z="document.pdf"){if(typeof ut!="string")return Z;if(b(ut))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Z;const nt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,gt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,St=nt.exec(ut);let V=gt.exec(St[1])||gt.exec(St[2])||gt.exec(St[3]);if(V&&(V=V[0],V.includes("%")))try{V=gt.exec(decodeURIComponent(V))[0]}catch{}return V||Z}class l{constructor(){we(this,"started",Object.create(null));we(this,"times",[])}time(Z){Z in this.started&&(0,o.warn)(`Timer is already running for ${Z}`),this.started[Z]=Date.now()}timeEnd(Z){Z in this.started||(0,o.warn)(`Timer has not been started for ${Z}`),this.times.push({name:Z,start:this.started[Z],end:Date.now()}),delete this.started[Z]}toString(){const Z=[];let nt=0;for(const{name:gt}of this.times)nt=Math.max(gt.length,nt);for(const{name:gt,start:St,end:V}of this.times)Z.push(`${gt.padEnd(nt)} ${V-St}ms
`);return Z.join("")}}e.StatTimer=l;function h(ut,Z){try{const{protocol:nt}=Z?new URL(ut,Z):new URL(ut);return nt==="http:"||nt==="https:"}catch{return!1}}function r(ut,Z=!1){return new Promise((nt,gt)=>{const St=document.createElement("script");St.src=ut,St.onload=function(V){Z&&St.remove(),nt(V)},St.onerror=function(){gt(new Error(`Cannot load script at: ${St.src}`))},(document.head||document.documentElement).append(St)})}function s(ut){console.log("Deprecated API usage: "+ut)}let _;class a{static toDateObject(Z){if(!Z||typeof Z!="string")return null;_||(_=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const nt=_.exec(Z);if(!nt)return null;const gt=parseInt(nt[1],10);let St=parseInt(nt[2],10);St=St>=1&&St<=12?St-1:0;let V=parseInt(nt[3],10);V=V>=1&&V<=31?V:1;let S=parseInt(nt[4],10);S=S>=0&&S<=23?S:0;let p=parseInt(nt[5],10);p=p>=0&&p<=59?p:0;let x=parseInt(nt[6],10);x=x>=0&&x<=59?x:0;const H=nt[7]||"Z";let W=parseInt(nt[8],10);W=W>=0&&W<=23?W:0;let j=parseInt(nt[9],10)||0;return j=j>=0&&j<=59?j:0,H==="-"?(S+=W,p+=j):H==="+"&&(S-=W,p-=j),new Date(Date.UTC(gt,St,V,S,p,x))}}e.PDFDateString=a;function T(ut,{scale:Z=1,rotation:nt=0}){const{width:gt,height:St}=ut.attributes.style,V=[0,0,parseInt(gt),parseInt(St)];return new C({viewBox:V,scale:Z,rotation:nt})}function I(ut){if(ut.startsWith("#")){const Z=parseInt(ut.slice(1),16);return[(Z&16711680)>>16,(Z&65280)>>8,Z&255]}return ut.startsWith("rgb(")?ut.slice(4,-1).split(",").map(Z=>parseInt(Z)):ut.startsWith("rgba(")?ut.slice(5,-1).split(",").map(Z=>parseInt(Z)).slice(0,3):((0,o.warn)(`Not a valid color format: "${ut}"`),[0,0,0])}function J(ut){const Z=document.createElement("span");Z.style.visibility="hidden",document.body.append(Z);for(const nt of ut.keys()){Z.style.color=nt;const gt=window.getComputedStyle(Z).color;ut.set(nt,I(gt))}Z.remove()}function ht(ut){const{a:Z,b:nt,c:gt,d:St,e:V,f:S}=ut.getTransform();return[Z,nt,gt,St,V,S]}function wt(ut){const{a:Z,b:nt,c:gt,d:St,e:V,f:S}=ut.getTransform().invertSelf();return[Z,nt,gt,St,V,S]}function pt(ut,Z,nt=!1,gt=!0){if(Z instanceof C){const{pageWidth:St,pageHeight:V}=Z.rawDims,{style:S}=ut,p=`calc(var(--scale-factor) * ${St}px)`,x=`calc(var(--scale-factor) * ${V}px)`;!nt||Z.rotation%180===0?(S.width=p,S.height=x):(S.width=x,S.height=p)}gt&&ut.setAttribute("data-main-rotation",Z.rotation)}},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var i=f(1);class o{constructor(){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(P,v){if(P<=0||v<=0)throw new Error("Invalid canvas size");const L=this._createCanvas(P,v);return{canvas:L,context:L.getContext("2d")}}reset(P,v,L){if(!P.canvas)throw new Error("Canvas is not specified");if(v<=0||L<=0)throw new Error("Invalid canvas size");P.canvas.width=v,P.canvas.height=L}destroy(P){if(!P.canvas)throw new Error("Canvas is not specified");P.canvas.width=0,P.canvas.height=0,P.canvas=null,P.context=null}_createCanvas(P,v){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=o;class n{constructor({baseUrl:P=null,isCompressed:v=!0}){this.constructor===n&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=P,this.isCompressed=v}async fetch({name:P}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!P)throw new Error("CMap name must be specified.");const v=this.baseUrl+P+(this.isCompressed?".bcmap":""),L=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(v,L).catch(k=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${v}`)})}_fetchData(P,v){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=n;class R{constructor({baseUrl:P=null}){this.constructor===R&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=P}async fetch({filename:P}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!P)throw new Error("Font filename must be specified.");const v=`${this.baseUrl}${P}`;return this._fetchData(v).catch(L=>{throw new Error(`Unable to load font data at: ${v}`)})}_fetchData(P){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=R;class U{constructor(){this.constructor===U&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(P,v,L=!1){if(P<=0||v<=0)throw new Error("Invalid SVG dimensions");const k=this._createSVG("svg:svg");return k.setAttribute("version","1.1"),L||(k.setAttribute("width",`${P}px`),k.setAttribute("height",`${v}px`)),k.setAttribute("preserveAspectRatio","none"),k.setAttribute("viewBox",`0 0 ${P} ${v}`),k}createElement(P){if(typeof P!="string")throw new Error("Invalid SVG element type");return this._createSVG(P)}_createSVG(P){(0,i.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=U},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var i=f(1);const o=3285377520,n=4294901760,R=65535;class U{constructor(P){this.h1=P?P&4294967295:o,this.h2=P?P&4294967295:o}update(P){let v,L;if(typeof P=="string"){v=new Uint8Array(P.length*2),L=0;for(let _=0,a=P.length;_<a;_++){const T=P.charCodeAt(_);T<=255?v[L++]=T:(v[L++]=T>>>8,v[L++]=T&255)}}else if((0,i.isArrayBuffer)(P))v=P.slice(),L=v.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const k=L>>2,C=L-k*4,g=new Uint32Array(v.buffer,0,k);let b=0,u=0,m=this.h1,A=this.h2;const l=3432918353,h=461845907,r=l&R,s=h&R;for(let _=0;_<k;_++)_&1?(b=g[_],b=b*l&n|b*r&R,b=b<<15|b>>>17,b=b*h&n|b*s&R,m^=b,m=m<<13|m>>>19,m=m*5+3864292196):(u=g[_],u=u*l&n|u*r&R,u=u<<15|u>>>17,u=u*h&n|u*s&R,A^=u,A=A<<13|A>>>19,A=A*5+3864292196);switch(b=0,C){case 3:b^=v[k*4+2]<<16;case 2:b^=v[k*4+1]<<8;case 1:b^=v[k*4],b=b*l&n|b*r&R,b=b<<15|b>>>17,b=b*h&n|b*s&R,k&1?m^=b:A^=b}this.h1=m,this.h2=A}hexdigest(){let P=this.h1,v=this.h2;return P^=v>>>1,P=P*3981806797&n|P*36045&R,v=v*4283543511&n|((v<<16|P>>>16)*2950163797&n)>>>16,P^=v>>>1,P=P*444984403&n|P*60499&R,v=v*3301882366&n|((v<<16|P>>>16)*3120437893&n)>>>16,P^=v>>>1,(P>>>0).toString(16).padStart(8,"0")+(v>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=U},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var i=f(1),o=f(10);class n{constructor({onUnsupportedFeature:O,ownerDocument:P=globalThis.document,styleElement:v=null}){this._onUnsupportedFeature=O,this._document=P,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(O){this.nativeFontFaces.push(O),this._document.fonts.add(O)}insertRule(O){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const P=this.styleElement.sheet;P.insertRule(O,P.cssRules.length)}clear(){for(const O of this.nativeFontFaces)this._document.fonts.delete(O);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(O){if(O.attached||O.missingFile)return;if(O.attached=!0,this.isFontLoadingAPISupported){const v=O.createNativeFontFace();if(v){this.addNativeFontFace(v);try{await v.loaded}catch(L){throw this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,i.warn)(`Failed to load font '${v.family}': '${L}'.`),O.disableFontFace=!0,L}}return}const P=O.createFontFaceRule();if(P){if(this.insertRule(P),this.isSyncFontLoadingSupported)return;await new Promise(v=>{const L=this._queueLoadingCallback(v);this._prepareFontLoadEvent(O,L)})}}get isFontLoadingAPISupported(){var P;const O=!!((P=this._document)!=null&&P.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",O)}get isSyncFontLoadingSupported(){let O=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(O=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",O)}_queueLoadingCallback(O){function P(){for((0,i.assert)(!L.done,"completeRequest() cannot be called twice."),L.done=!0;v.length>0&&v[0].done;){const k=v.shift();setTimeout(k.callback,0)}}const{loadingRequests:v}=this,L={done:!1,complete:P,callback:O};return v.push(L),L}get _loadTestFont(){const O=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",O)}_prepareFontLoadEvent(O,P){function v(J,ht){return J.charCodeAt(ht)<<24|J.charCodeAt(ht+1)<<16|J.charCodeAt(ht+2)<<8|J.charCodeAt(ht+3)&255}function L(J,ht,wt,pt){const mt=J.substring(0,ht),ut=J.substring(ht+wt);return mt+pt+ut}let k,C;const g=this._document.createElement("canvas");g.width=1,g.height=1;const b=g.getContext("2d");let u=0;function m(J,ht){if(++u>30){(0,i.warn)("Load test font never loaded."),ht();return}if(b.font="30px "+J,b.fillText(".",0,20),b.getImageData(0,0,1,1).data[3]>0){ht();return}setTimeout(m.bind(null,J,ht))}const A=`lt${Date.now()}${this.loadTestFontId++}`;let l=this._loadTestFont;l=L(l,976,A.length,A);const r=16,s=1482184792;let _=v(l,r);for(k=0,C=A.length-3;k<C;k+=4)_=_-s+v(A,k)|0;k<A.length&&(_=_-s+v(A+"XXX",k)|0),l=L(l,r,4,(0,i.string32)(_));const a=`url(data:font/opentype;base64,${btoa(l)});`,T=`@font-face {font-family:"${A}";src:${a}}`;this.insertRule(T);const I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(const J of[O.loadedName,A]){const ht=this._document.createElement("span");ht.textContent="Hi",ht.style.fontFamily=J,I.append(ht)}this._document.body.append(I),m(A,()=>{I.remove(),P.complete()})}}e.FontLoader=n;class R{constructor(O,{isEvalSupported:P=!0,disableFontFace:v=!1,ignoreErrors:L=!1,onUnsupportedFeature:k,fontRegistry:C=null}){this.compiledGlyphs=Object.create(null);for(const g in O)this[g]=O[g];this.isEvalSupported=P!==!1,this.disableFontFace=v===!0,this.ignoreErrors=L===!0,this._onUnsupportedFeature=k,this.fontRegistry=C}createNativeFontFace(){var P;if(!this.data||this.disableFontFace)return null;let O;if(!this.cssFontInfo)O=new FontFace(this.loadedName,this.data,{});else{const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),O=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}return(P=this.fontRegistry)==null||P.registerFont(this),O}createFontFaceRule(){var L;if(!this.data||this.disableFontFace)return null;const O=(0,i.bytesToString)(this.data),P=`url(data:${this.mimetype};base64,${btoa(O)});`;let v;if(!this.cssFontInfo)v=`@font-face {font-family:"${this.loadedName}";src:${P}}`;else{let k=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(k+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),v=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${k}src:${P}}`}return(L=this.fontRegistry)==null||L.registerFont(this,P),v}getPathGenerator(O,P){if(this.compiledGlyphs[P]!==void 0)return this.compiledGlyphs[P];let v;try{v=O.get(this.loadedName+"_path_"+P)}catch(L){if(!this.ignoreErrors)throw L;return this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,i.warn)(`getPathGenerator - ignoring character: "${L}".`),this.compiledGlyphs[P]=function(k,C){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const L=[];for(const k of v){const C=k.args!==void 0?k.args.join(","):"";L.push("c.",k.cmd,"(",C,`);
`)}return this.compiledGlyphs[P]=new Function("c","size",L.join(""))}return this.compiledGlyphs[P]=function(L,k){for(const C of v)C.cmd==="scale"&&(C.args=[k,-k]),L[C.cmd].apply(L,C.args)}}}e.FontFaceObject=R},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const f=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=f},(t,e,f)=>{var nt,er;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var i=f(1),o=f(6),n=f(12),R=f(13);const U=16,O=100,P=4096,v=15,L=10,k=1e3,C=16;function g(V,S){if(V._removeMirroring)throw new Error("Context is already forwarding operations.");V.__originalSave=V.save,V.__originalRestore=V.restore,V.__originalRotate=V.rotate,V.__originalScale=V.scale,V.__originalTranslate=V.translate,V.__originalTransform=V.transform,V.__originalSetTransform=V.setTransform,V.__originalResetTransform=V.resetTransform,V.__originalClip=V.clip,V.__originalMoveTo=V.moveTo,V.__originalLineTo=V.lineTo,V.__originalBezierCurveTo=V.bezierCurveTo,V.__originalRect=V.rect,V.__originalClosePath=V.closePath,V.__originalBeginPath=V.beginPath,V._removeMirroring=()=>{V.save=V.__originalSave,V.restore=V.__originalRestore,V.rotate=V.__originalRotate,V.scale=V.__originalScale,V.translate=V.__originalTranslate,V.transform=V.__originalTransform,V.setTransform=V.__originalSetTransform,V.resetTransform=V.__originalResetTransform,V.clip=V.__originalClip,V.moveTo=V.__originalMoveTo,V.lineTo=V.__originalLineTo,V.bezierCurveTo=V.__originalBezierCurveTo,V.rect=V.__originalRect,V.closePath=V.__originalClosePath,V.beginPath=V.__originalBeginPath,delete V._removeMirroring},V.save=function(){S.save(),this.__originalSave()},V.restore=function(){S.restore(),this.__originalRestore()},V.translate=function(x,H){S.translate(x,H),this.__originalTranslate(x,H)},V.scale=function(x,H){S.scale(x,H),this.__originalScale(x,H)},V.transform=function(x,H,W,j,et,dt){S.transform(x,H,W,j,et,dt),this.__originalTransform(x,H,W,j,et,dt)},V.setTransform=function(x,H,W,j,et,dt){S.setTransform(x,H,W,j,et,dt),this.__originalSetTransform(x,H,W,j,et,dt)},V.resetTransform=function(){S.resetTransform(),this.__originalResetTransform()},V.rotate=function(x){S.rotate(x),this.__originalRotate(x)},V.clip=function(x){S.clip(x),this.__originalClip(x)},V.moveTo=function(p,x){S.moveTo(p,x),this.__originalMoveTo(p,x)},V.lineTo=function(p,x){S.lineTo(p,x),this.__originalLineTo(p,x)},V.bezierCurveTo=function(p,x,H,W,j,et){S.bezierCurveTo(p,x,H,W,j,et),this.__originalBezierCurveTo(p,x,H,W,j,et)},V.rect=function(p,x,H,W){S.rect(p,x,H,W),this.__originalRect(p,x,H,W)},V.closePath=function(){S.closePath(),this.__originalClosePath()},V.beginPath=function(){S.beginPath(),this.__originalBeginPath()}}class b{constructor(S){this.canvasFactory=S,this.cache=Object.create(null)}getCanvas(S,p,x){let H;return this.cache[S]!==void 0?(H=this.cache[S],this.canvasFactory.reset(H,p,x)):(H=this.canvasFactory.create(p,x),this.cache[S]=H),H}delete(S){delete this.cache[S]}clear(){for(const S in this.cache){const p=this.cache[S];this.canvasFactory.destroy(p),delete this.cache[S]}}}function u(V,S,p,x,H,W,j,et,dt,bt){const[lt,d,y,D,F,E]=(0,o.getCurrentTransform)(V);if(d===0&&y===0){const tt=j*lt+F,ft=Math.round(tt),B=et*D+E,Q=Math.round(B),X=(j+dt)*lt+F,vt=Math.abs(Math.round(X)-ft)||1,Pt=(et+bt)*D+E,Dt=Math.abs(Math.round(Pt)-Q)||1;return V.setTransform(Math.sign(lt),0,0,Math.sign(D),ft,Q),V.drawImage(S,p,x,H,W,0,0,vt,Dt),V.setTransform(lt,d,y,D,F,E),[vt,Dt]}if(lt===0&&D===0){const tt=et*y+F,ft=Math.round(tt),B=j*d+E,Q=Math.round(B),X=(et+bt)*y+F,vt=Math.abs(Math.round(X)-ft)||1,Pt=(j+dt)*d+E,Dt=Math.abs(Math.round(Pt)-Q)||1;return V.setTransform(0,Math.sign(d),Math.sign(y),0,ft,Q),V.drawImage(S,p,x,H,W,0,0,Dt,vt),V.setTransform(lt,d,y,D,F,E),[Dt,vt]}V.drawImage(S,p,x,H,W,j,et,dt,bt);const z=Math.hypot(lt,d),Y=Math.hypot(y,D);return[z*dt,Y*bt]}function m(V){const{width:S,height:p}=V;if(S>k||p>k)return null;const x=1e3,H=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),W=S+1;let j=new Uint8Array(W*(p+1)),et,dt,bt;const lt=S+7&-8;let d=new Uint8Array(lt*p),y=0;for(const Y of V.data){let tt=128;for(;tt>0;)d[y++]=Y&tt?0:255,tt>>=1}let D=0;for(y=0,d[y]!==0&&(j[0]=1,++D),dt=1;dt<S;dt++)d[y]!==d[y+1]&&(j[dt]=d[y]?2:1,++D),y++;for(d[y]!==0&&(j[dt]=2,++D),et=1;et<p;et++){y=et*lt,bt=et*W,d[y-lt]!==d[y]&&(j[bt]=d[y]?1:8,++D);let Y=(d[y]?4:0)+(d[y-lt]?8:0);for(dt=1;dt<S;dt++)Y=(Y>>2)+(d[y+1]?4:0)+(d[y-lt+1]?8:0),H[Y]&&(j[bt+dt]=H[Y],++D),y++;if(d[y-lt]!==d[y]&&(j[bt+dt]=d[y]?2:4,++D),D>x)return null}for(y=lt*(p-1),bt=et*W,d[y]!==0&&(j[bt]=8,++D),dt=1;dt<S;dt++)d[y]!==d[y+1]&&(j[bt+dt]=d[y]?4:8,++D),y++;if(d[y]!==0&&(j[bt+dt]=4,++D),D>x)return null;const F=new Int32Array([0,W,-1,0,-W,0,0,0,1]),E=new Path2D;for(et=0;D&&et<=p;et++){let Y=et*W;const tt=Y+S;for(;Y<tt&&!j[Y];)Y++;if(Y===tt)continue;E.moveTo(Y%W,et);const ft=Y;let B=j[Y];do{const Q=F[B];do Y+=Q;while(!j[Y]);const X=j[Y];X!==5&&X!==10?(B=X,j[Y]=0):(B=X&51*B>>4,j[Y]&=B>>2|B<<2),E.lineTo(Y%W,Y/W|0),j[Y]||--D}while(ft!==Y);--et}return d=null,j=null,function(Y){Y.save(),Y.scale(1/S,-1/p),Y.translate(0,-p),Y.fill(E),Y.beginPath(),Y.restore()}}class A{constructor(S,p){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,S,p])}clone(){const S=Object.create(this);return S.clipBox=this.clipBox.slice(),S}setCurrentPoint(S,p){this.x=S,this.y=p}updatePathMinMax(S,p,x){[p,x]=i.Util.applyTransform([p,x],S),this.minX=Math.min(this.minX,p),this.minY=Math.min(this.minY,x),this.maxX=Math.max(this.maxX,p),this.maxY=Math.max(this.maxY,x)}updateRectMinMax(S,p){const x=i.Util.applyTransform(p,S),H=i.Util.applyTransform(p.slice(2),S);this.minX=Math.min(this.minX,x[0],H[0]),this.minY=Math.min(this.minY,x[1],H[1]),this.maxX=Math.max(this.maxX,x[0],H[0]),this.maxY=Math.max(this.maxY,x[1],H[1])}updateScalingPathMinMax(S,p){i.Util.scaleMinMax(S,p),this.minX=Math.min(this.minX,p[0]),this.maxX=Math.max(this.maxX,p[1]),this.minY=Math.min(this.minY,p[2]),this.maxY=Math.max(this.maxY,p[3])}updateCurvePathMinMax(S,p,x,H,W,j,et,dt,bt,lt){const d=i.Util.bezierBoundingBox(p,x,H,W,j,et,dt,bt);if(lt){lt[0]=Math.min(lt[0],d[0],d[2]),lt[1]=Math.max(lt[1],d[0],d[2]),lt[2]=Math.min(lt[2],d[1],d[3]),lt[3]=Math.max(lt[3],d[1],d[3]);return}this.updateRectMinMax(S,d)}getPathBoundingBox(S=n.PathType.FILL,p=null){const x=[this.minX,this.minY,this.maxX,this.maxY];if(S===n.PathType.STROKE){p||(0,i.unreachable)("Stroke bounding box must include transform.");const H=i.Util.singularValueDecompose2dScale(p),W=H[0]*this.lineWidth/2,j=H[1]*this.lineWidth/2;x[0]-=W,x[1]-=j,x[2]+=W,x[3]+=j}return x}updateClipFromPath(){const S=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(S||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(S){this.clipBox=S,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(S=n.PathType.FILL,p=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(S,p))}}function l(V,S,p=null){if(typeof ImageData<"u"&&S instanceof ImageData){V.putImageData(S,0,0);return}const x=S.height,H=S.width,W=x%C,j=(x-W)/C,et=W===0?j:j+1,dt=V.createImageData(H,C);let bt=0,lt;const d=S.data,y=dt.data;let D,F,E,z,Y,tt,ft,B;if(p)switch(p.length){case 1:Y=p[0],tt=p[0],ft=p[0],B=p[0];break;case 4:Y=p[0],tt=p[1],ft=p[2],B=p[3];break}if(S.kind===i.ImageKind.GRAYSCALE_1BPP){const Q=d.byteLength,X=new Uint32Array(y.buffer,0,y.byteLength>>2),vt=X.length,Pt=H+7>>3;let Dt=4294967295,Ft=i.FeatureTest.isLittleEndian?4278190080:255;for(B&&B[0]===255&&B[255]===0&&([Dt,Ft]=[Ft,Dt]),D=0;D<et;D++){for(E=D<j?C:W,lt=0,F=0;F<E;F++){const Ht=Q-bt;let le=0;const fe=Ht>Pt?H:Ht*8-7,_t=fe&-8;let ot=0,it=0;for(;le<_t;le+=8)it=d[bt++],X[lt++]=it&128?Dt:Ft,X[lt++]=it&64?Dt:Ft,X[lt++]=it&32?Dt:Ft,X[lt++]=it&16?Dt:Ft,X[lt++]=it&8?Dt:Ft,X[lt++]=it&4?Dt:Ft,X[lt++]=it&2?Dt:Ft,X[lt++]=it&1?Dt:Ft;for(;le<fe;le++)ot===0&&(it=d[bt++],ot=128),X[lt++]=it&ot?Dt:Ft,ot>>=1}for(;lt<vt;)X[lt++]=0;V.putImageData(dt,0,D*C)}}else if(S.kind===i.ImageKind.RGBA_32BPP){const Q=!!(Y||tt||ft);for(F=0,z=H*C*4,D=0;D<j;D++){if(y.set(d.subarray(bt,bt+z)),bt+=z,Q)for(let X=0;X<z;X+=4)Y&&(y[X+0]=Y[y[X+0]]),tt&&(y[X+1]=tt[y[X+1]]),ft&&(y[X+2]=ft[y[X+2]]);V.putImageData(dt,0,F),F+=C}if(D<et){if(z=H*W*4,y.set(d.subarray(bt,bt+z)),Q)for(let X=0;X<z;X+=4)Y&&(y[X+0]=Y[y[X+0]]),tt&&(y[X+1]=tt[y[X+1]]),ft&&(y[X+2]=ft[y[X+2]]);V.putImageData(dt,0,F)}}else if(S.kind===i.ImageKind.RGB_24BPP){const Q=!!(Y||tt||ft);for(E=C,z=H*E,D=0;D<et;D++){for(D>=j&&(E=W,z=H*E),lt=0,F=z;F--;)y[lt++]=d[bt++],y[lt++]=d[bt++],y[lt++]=d[bt++],y[lt++]=255;if(Q)for(let X=0;X<lt;X+=4)Y&&(y[X+0]=Y[y[X+0]]),tt&&(y[X+1]=tt[y[X+1]]),ft&&(y[X+2]=ft[y[X+2]]);V.putImageData(dt,0,D*C)}}else throw new Error(`bad image kind: ${S.kind}`)}function h(V,S){if(S.bitmap){V.drawImage(S.bitmap,0,0);return}const p=S.height,x=S.width,H=p%C,W=(p-H)/C,j=H===0?W:W+1,et=V.createImageData(x,C);let dt=0;const bt=S.data,lt=et.data;for(let d=0;d<j;d++){const y=d<W?C:H;({srcPos:dt}=(0,R.applyMaskImageData)({src:bt,srcPos:dt,dest:lt,width:x,height:y})),V.putImageData(et,0,d*C)}}function r(V,S){const p=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const x of p)V[x]!==void 0&&(S[x]=V[x]);V.setLineDash!==void 0&&(S.setLineDash(V.getLineDash()),S.lineDashOffset=V.lineDashOffset)}function s(V,S){V.strokeStyle=V.fillStyle=S||"#000000",V.fillRule="nonzero",V.globalAlpha=1,V.lineWidth=1,V.lineCap="butt",V.lineJoin="miter",V.miterLimit=10,V.globalCompositeOperation="source-over",V.font="10px sans-serif",V.setLineDash!==void 0&&(V.setLineDash([]),V.lineDashOffset=0)}function _(V,S,p,x){const H=V.length;for(let W=3;W<H;W+=4){const j=V[W];if(j===0)V[W-3]=S,V[W-2]=p,V[W-1]=x;else if(j<255){const et=255-j;V[W-3]=V[W-3]*j+S*et>>8,V[W-2]=V[W-2]*j+p*et>>8,V[W-1]=V[W-1]*j+x*et>>8}}}function a(V,S,p){const x=V.length,H=1/255;for(let W=3;W<x;W+=4){const j=p?p[V[W]]:V[W];S[W]=S[W]*j*H|0}}function T(V,S,p){const x=V.length;for(let H=3;H<x;H+=4){const W=V[H-3]*77+V[H-2]*152+V[H-1]*28;S[H]=p?S[H]*p[W>>8]>>8:S[H]*W>>16}}function I(V,S,p,x,H,W,j,et,dt,bt,lt){const d=!!W,y=d?W[0]:0,D=d?W[1]:0,F=d?W[2]:0;let E;H==="Luminosity"?E=T:E=a;const Y=Math.min(x,Math.ceil(1048576/p));for(let tt=0;tt<x;tt+=Y){const ft=Math.min(Y,x-tt),B=V.getImageData(et-bt,tt+(dt-lt),p,ft),Q=S.getImageData(et,tt+dt,p,ft);d&&_(B.data,y,D,F),E(B.data,Q.data,j),S.putImageData(Q,et,tt+dt)}}function J(V,S,p,x){const H=x[0],W=x[1],j=x[2]-H,et=x[3]-W;j===0||et===0||(I(S.context,p,j,et,S.subtype,S.backdrop,S.transferMap,H,W,S.offsetX,S.offsetY),V.save(),V.globalAlpha=1,V.globalCompositeOperation="source-over",V.setTransform(1,0,0,1,0,0),V.drawImage(p.canvas,0,0),V.restore())}function ht(V,S){const p=i.Util.singularValueDecompose2dScale(V);p[0]=Math.fround(p[0]),p[1]=Math.fround(p[1]);const x=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return S!==void 0?S:p[0]<=x||p[1]<=x}const wt=["butt","round","square"],pt=["miter","round","bevel"],mt={},ut={},St=class St{constructor(S,p,x,H,{optionalContentConfig:W,markedContentStack:j=null},et,dt){Rt(this,nt);this.ctx=S,this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=p,this.objs=x,this.canvasFactory=H,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=j||[],this.optionalContentConfig=W,this.cachedCanvases=new b(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=et,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(dt==null?void 0:dt.background)||null,this.foregroundColor=(dt==null?void 0:dt.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(S,p=null){return typeof S=="string"?S.startsWith("g_")?this.commonObjs.get(S):this.objs.get(S):p}beginDrawing({transform:S,viewport:p,transparency:x=!1,background:H=null}){const W=this.ctx.canvas.width,j=this.ctx.canvas.height,et=H||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const dt=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const bt=this.backgroundColor=this.ctx.fillStyle;let lt=!0,d=et;if(this.ctx.fillStyle=et,d=this.ctx.fillStyle,lt=typeof d=="string"&&/^#[0-9A-Fa-f]{6}$/.test(d),dt==="#000000"&&bt==="#ffffff"||dt===bt||!lt)this.foregroundColor=this.backgroundColor=null;else{const[y,D,F]=(0,o.getRGB)(d),E=Y=>(Y/=255,Y<=.03928?Y/12.92:((Y+.055)/1.055)**2.4),z=Math.round(.2126*E(y)+.7152*E(D)+.0722*E(F));this.selectColor=(Y,tt,ft)=>{const B=.2126*E(Y)+.7152*E(tt)+.0722*E(ft);return Math.round(B)===z?bt:dt}}}if(this.ctx.fillStyle=this.backgroundColor||et,this.ctx.fillRect(0,0,W,j),this.ctx.restore(),x){const dt=this.cachedCanvases.getCanvas("transparent",W,j);this.compositeCtx=this.ctx,this.transparentCanvas=dt.canvas,this.ctx=dt.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),s(this.ctx,this.foregroundColor),S&&(this.ctx.transform(...S),this.outputScaleX=S[0],this.outputScaleY=S[0]),this.ctx.transform(...p.transform),this.viewportScale=p.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(S,p,x,H){const W=S.argsArray,j=S.fnArray;let et=p||0;const dt=W.length;if(dt===et)return et;const bt=dt-et>L&&typeof x=="function",lt=bt?Date.now()+v:0;let d=0;const y=this.commonObjs,D=this.objs;let F;for(;;){if(H!==void 0&&et===H.nextBreakPoint)return H.breakIt(et,x),et;if(F=j[et],F!==i.OPS.dependency)this[F].apply(this,W[et]);else for(const E of W[et]){const z=E.startsWith("g_")?y:D;if(!z.has(E))return z.get(E,x),et}if(et++,et===dt)return et;if(bt&&++d>L){if(Date.now()>lt)return x(),et;d=0}}}endDrawing(){Et(this,nt,er).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const S of this._cachedBitmapsMap.values()){for(const p of S.values())typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement&&(p.width=p.height=0);S.clear()}this._cachedBitmapsMap.clear()}_scaleImage(S,p){const x=S.width,H=S.height;let W=Math.max(Math.hypot(p[0],p[1]),1),j=Math.max(Math.hypot(p[2],p[3]),1),et=x,dt=H,bt="prescale1",lt,d;for(;W>2&&et>1||j>2&&dt>1;){let y=et,D=dt;W>2&&et>1&&(y=Math.ceil(et/2),W/=et/y),j>2&&dt>1&&(D=Math.ceil(dt/2),j/=dt/D),lt=this.cachedCanvases.getCanvas(bt,y,D),d=lt.context,d.clearRect(0,0,y,D),d.drawImage(S,0,0,et,dt,0,0,y,D),S=lt.canvas,et=y,dt=D,bt=bt==="prescale1"?"prescale2":"prescale1"}return{img:S,paintWidth:et,paintHeight:dt}}_createMaskCanvas(S){const p=this.ctx,{width:x,height:H}=S,W=this.current.fillColor,j=this.current.patternFill,et=(0,o.getCurrentTransform)(p);let dt,bt,lt,d;if((S.bitmap||S.data)&&S.count>1){const vt=S.bitmap||S.data.buffer;bt=JSON.stringify(j?et:[et.slice(0,4),W]),dt=this._cachedBitmapsMap.get(vt),dt||(dt=new Map,this._cachedBitmapsMap.set(vt,dt));const Pt=dt.get(bt);if(Pt&&!j){const Dt=Math.round(Math.min(et[0],et[2])+et[4]),Ft=Math.round(Math.min(et[1],et[3])+et[5]);return{canvas:Pt,offsetX:Dt,offsetY:Ft}}lt=Pt}lt||(d=this.cachedCanvases.getCanvas("maskCanvas",x,H),h(d.context,S));let y=i.Util.transform(et,[1/x,0,0,-1/H,0,0]);y=i.Util.transform(y,[1,0,0,1,0,-H]);const D=i.Util.applyTransform([0,0],y),F=i.Util.applyTransform([x,H],y),E=i.Util.normalizeRect([D[0],D[1],F[0],F[1]]),z=Math.round(E[2]-E[0])||1,Y=Math.round(E[3]-E[1])||1,tt=this.cachedCanvases.getCanvas("fillCanvas",z,Y),ft=tt.context,B=Math.min(D[0],F[0]),Q=Math.min(D[1],F[1]);ft.translate(-B,-Q),ft.transform(...y),lt||(lt=this._scaleImage(d.canvas,(0,o.getCurrentTransformInverse)(ft)),lt=lt.img,dt&&j&&dt.set(bt,lt)),ft.imageSmoothingEnabled=ht((0,o.getCurrentTransform)(ft),S.interpolate),u(ft,lt,0,0,lt.width,lt.height,0,0,x,H),ft.globalCompositeOperation="source-in";const X=i.Util.transform((0,o.getCurrentTransformInverse)(ft),[1,0,0,1,-B,-Q]);return ft.fillStyle=j?W.getPattern(p,this,X,n.PathType.FILL):W,ft.fillRect(0,0,x,H),dt&&!j&&(this.cachedCanvases.delete("fillCanvas"),dt.set(bt,tt.canvas)),{canvas:tt.canvas,offsetX:Math.round(B),offsetY:Math.round(Q)}}setLineWidth(S){S!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=S,this.ctx.lineWidth=S}setLineCap(S){this.ctx.lineCap=wt[S]}setLineJoin(S){this.ctx.lineJoin=pt[S]}setMiterLimit(S){this.ctx.miterLimit=S}setDash(S,p){const x=this.ctx;x.setLineDash!==void 0&&(x.setLineDash(S),x.lineDashOffset=p)}setRenderingIntent(S){}setFlatness(S){}setGState(S){for(const[p,x]of S)switch(p){case"LW":this.setLineWidth(x);break;case"LC":this.setLineCap(x);break;case"LJ":this.setLineJoin(x);break;case"ML":this.setMiterLimit(x);break;case"D":this.setDash(x[0],x[1]);break;case"RI":this.setRenderingIntent(x);break;case"FL":this.setFlatness(x);break;case"Font":this.setFont(x[0],x[1]);break;case"CA":this.current.strokeAlpha=x;break;case"ca":this.current.fillAlpha=x,this.ctx.globalAlpha=x;break;case"BM":this.ctx.globalCompositeOperation=x;break;case"SMask":this.current.activeSMask=x?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=x}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const S=this.inSMaskMode;this.current.activeSMask&&!S?this.beginSMaskMode():!this.current.activeSMask&&S&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const S=this.ctx.canvas.width,p=this.ctx.canvas.height,x="smaskGroupAt"+this.groupLevel,H=this.cachedCanvases.getCanvas(x,S,p);this.suspendedCtx=this.ctx,this.ctx=H.context;const W=this.ctx;W.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),r(this.suspendedCtx,W),g(W,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),r(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(S){if(!this.current.activeSMask)return;S?(S[0]=Math.floor(S[0]),S[1]=Math.floor(S[1]),S[2]=Math.ceil(S[2]),S[3]=Math.ceil(S[3])):S=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const p=this.current.activeSMask,x=this.suspendedCtx;J(x,p,this.ctx,S),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(r(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const S=this.current;this.stateStack.push(S),this.current=S.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),r(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(S,p,x,H,W,j){this.ctx.transform(S,p,x,H,W,j),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(S,p,x){const H=this.ctx,W=this.current;let j=W.x,et=W.y,dt,bt;const lt=(0,o.getCurrentTransform)(H),d=lt[0]===0&&lt[3]===0||lt[1]===0&&lt[2]===0,y=d?x.slice(0):null;for(let D=0,F=0,E=S.length;D<E;D++)switch(S[D]|0){case i.OPS.rectangle:j=p[F++],et=p[F++];const z=p[F++],Y=p[F++],tt=j+z,ft=et+Y;H.moveTo(j,et),z===0||Y===0?H.lineTo(tt,ft):(H.lineTo(tt,et),H.lineTo(tt,ft),H.lineTo(j,ft)),d||W.updateRectMinMax(lt,[j,et,tt,ft]),H.closePath();break;case i.OPS.moveTo:j=p[F++],et=p[F++],H.moveTo(j,et),d||W.updatePathMinMax(lt,j,et);break;case i.OPS.lineTo:j=p[F++],et=p[F++],H.lineTo(j,et),d||W.updatePathMinMax(lt,j,et);break;case i.OPS.curveTo:dt=j,bt=et,j=p[F+4],et=p[F+5],H.bezierCurveTo(p[F],p[F+1],p[F+2],p[F+3],j,et),W.updateCurvePathMinMax(lt,dt,bt,p[F],p[F+1],p[F+2],p[F+3],j,et,y),F+=6;break;case i.OPS.curveTo2:dt=j,bt=et,H.bezierCurveTo(j,et,p[F],p[F+1],p[F+2],p[F+3]),W.updateCurvePathMinMax(lt,dt,bt,j,et,p[F],p[F+1],p[F+2],p[F+3],y),j=p[F+2],et=p[F+3],F+=4;break;case i.OPS.curveTo3:dt=j,bt=et,j=p[F+2],et=p[F+3],H.bezierCurveTo(p[F],p[F+1],j,et,j,et),W.updateCurvePathMinMax(lt,dt,bt,p[F],p[F+1],j,et,j,et,y),F+=4;break;case i.OPS.closePath:H.closePath();break}d&&W.updateScalingPathMinMax(lt,y),W.setCurrentPoint(j,et)}closePath(){this.ctx.closePath()}stroke(S=!0){const p=this.ctx,x=this.current.strokeColor;p.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof x=="object"&&(x!=null&&x.getPattern)?(p.save(),p.strokeStyle=x.getPattern(p,this,(0,o.getCurrentTransformInverse)(p),n.PathType.STROKE),this.rescaleAndStroke(!1),p.restore()):this.rescaleAndStroke(!0)),S&&this.consumePath(this.current.getClippedPathBoundingBox()),p.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(S=!0){const p=this.ctx,x=this.current.fillColor,H=this.current.patternFill;let W=!1;H&&(p.save(),p.fillStyle=x.getPattern(p,this,(0,o.getCurrentTransformInverse)(p),n.PathType.FILL),W=!0);const j=this.current.getClippedPathBoundingBox();this.contentVisible&&j!==null&&(this.pendingEOFill?(p.fill("evenodd"),this.pendingEOFill=!1):p.fill()),W&&p.restore(),S&&this.consumePath(j)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=mt}eoClip(){this.pendingClip=ut}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const S=this.pendingTextPaths,p=this.ctx;if(S===void 0){p.beginPath();return}p.save(),p.beginPath();for(const x of S)p.setTransform(...x.transform),p.translate(x.x,x.y),x.addToPath(p,x.fontSize);p.restore(),p.clip(),p.beginPath(),delete this.pendingTextPaths}setCharSpacing(S){this.current.charSpacing=S}setWordSpacing(S){this.current.wordSpacing=S}setHScale(S){this.current.textHScale=S/100}setLeading(S){this.current.leading=-S}setFont(S,p){const x=this.commonObjs.get(S),H=this.current;if(!x)throw new Error(`Can't find font for ${S}`);if(H.fontMatrix=x.fontMatrix||i.FONT_IDENTITY_MATRIX,(H.fontMatrix[0]===0||H.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+S),p<0?(p=-p,H.fontDirection=-1):H.fontDirection=1,this.current.font=x,this.current.fontSize=p,x.isType3Font)return;const W=x.loadedName||"sans-serif";let j="normal";x.black?j="900":x.bold&&(j="bold");const et=x.italic?"italic":"normal",dt=`"${W}", ${x.fallbackName}`;let bt=p;p<U?bt=U:p>O&&(bt=O),this.current.fontSizeScale=p/bt,this.ctx.font=`${et} ${j} ${bt}px ${dt}`}setTextRenderingMode(S){this.current.textRenderingMode=S}setTextRise(S){this.current.textRise=S}moveText(S,p){this.current.x=this.current.lineX+=S,this.current.y=this.current.lineY+=p}setLeadingMoveText(S,p){this.setLeading(-p),this.moveText(S,p)}setTextMatrix(S,p,x,H,W,j){this.current.textMatrix=[S,p,x,H,W,j],this.current.textMatrixScale=Math.hypot(S,p),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(S,p,x,H){const W=this.ctx,j=this.current,et=j.font,dt=j.textRenderingMode,bt=j.fontSize/j.fontSizeScale,lt=dt&i.TextRenderingMode.FILL_STROKE_MASK,d=!!(dt&i.TextRenderingMode.ADD_TO_PATH_FLAG),y=j.patternFill&&!et.missingFile;let D;(et.disableFontFace||d||y)&&(D=et.getPathGenerator(this.commonObjs,S)),et.disableFontFace||y?(W.save(),W.translate(p,x),W.beginPath(),D(W,bt),H&&W.setTransform(...H),(lt===i.TextRenderingMode.FILL||lt===i.TextRenderingMode.FILL_STROKE)&&W.fill(),(lt===i.TextRenderingMode.STROKE||lt===i.TextRenderingMode.FILL_STROKE)&&W.stroke(),W.restore()):((lt===i.TextRenderingMode.FILL||lt===i.TextRenderingMode.FILL_STROKE)&&W.fillText(S,p,x),(lt===i.TextRenderingMode.STROKE||lt===i.TextRenderingMode.FILL_STROKE)&&W.strokeText(S,p,x)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(W),x:p,y:x,fontSize:bt,addToPath:D})}get isFontSubpixelAAEnabled(){const{context:S}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);S.scale(1.5,1),S.fillText("I",0,10);const p=S.getImageData(0,0,10,10).data;let x=!1;for(let H=3;H<p.length;H+=4)if(p[H]>0&&p[H]<255){x=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",x)}showText(S){const p=this.current,x=p.font;if(x.isType3Font)return this.showType3Text(S);const H=p.fontSize;if(H===0)return;const W=this.ctx,j=p.fontSizeScale,et=p.charSpacing,dt=p.wordSpacing,bt=p.fontDirection,lt=p.textHScale*bt,d=S.length,y=x.vertical,D=y?1:-1,F=x.defaultVMetrics,E=H*p.fontMatrix[0],z=p.textRenderingMode===i.TextRenderingMode.FILL&&!x.disableFontFace&&!p.patternFill;W.save(),W.transform(...p.textMatrix),W.translate(p.x,p.y+p.textRise),bt>0?W.scale(lt,-1):W.scale(lt,1);let Y;if(p.patternFill){W.save();const X=p.fillColor.getPattern(W,this,(0,o.getCurrentTransformInverse)(W),n.PathType.FILL);Y=(0,o.getCurrentTransform)(W),W.restore(),W.fillStyle=X}let tt=p.lineWidth;const ft=p.textMatrixScale;if(ft===0||tt===0){const X=p.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(X===i.TextRenderingMode.STROKE||X===i.TextRenderingMode.FILL_STROKE)&&(tt=this.getSinglePixelWidth())}else tt/=ft;if(j!==1&&(W.scale(j,j),tt/=j),W.lineWidth=tt,x.isInvalidPDFjsFont){const X=[];let vt=0;for(const Pt of S)X.push(Pt.unicode),vt+=Pt.width;W.fillText(X.join(""),0,0),p.x+=vt*E*lt,W.restore(),this.compose();return}let B=0,Q;for(Q=0;Q<d;++Q){const X=S[Q];if(typeof X=="number"){B+=D*X*H/1e3;continue}let vt=!1;const Pt=(X.isSpace?dt:0)+et,Dt=X.fontChar,Ft=X.accent;let Ht,le,fe=X.width;if(y){const ot=X.vmetric||F,it=-(X.vmetric?ot[1]:fe*.5)*E,Ot=ot[2]*E;fe=ot?-ot[0]:fe,Ht=it/j,le=(B+Ot)/j}else Ht=B/j,le=0;if(x.remeasure&&fe>0){const ot=W.measureText(Dt).width*1e3/H*j;if(fe<ot&&this.isFontSubpixelAAEnabled){const it=fe/ot;vt=!0,W.save(),W.scale(it,1),Ht/=it}else fe!==ot&&(Ht+=(fe-ot)/2e3*H/j)}if(this.contentVisible&&(X.isInFont||x.missingFile)){if(z&&!Ft)W.fillText(Dt,Ht,le);else if(this.paintChar(Dt,Ht,le,Y),Ft){const ot=Ht+H*Ft.offset.x/j,it=le-H*Ft.offset.y/j;this.paintChar(Ft.fontChar,ot,it,Y)}}let _t;y?_t=fe*E-Pt*bt:_t=fe*E+Pt*bt,B+=_t,vt&&W.restore()}y?p.y-=B:p.x+=B*lt,W.restore(),this.compose()}showType3Text(S){const p=this.ctx,x=this.current,H=x.font,W=x.fontSize,j=x.fontDirection,et=H.vertical?1:-1,dt=x.charSpacing,bt=x.wordSpacing,lt=x.textHScale*j,d=x.fontMatrix||i.FONT_IDENTITY_MATRIX,y=S.length,D=x.textRenderingMode===i.TextRenderingMode.INVISIBLE;let F,E,z,Y;if(!(D||W===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,p.save(),p.transform(...x.textMatrix),p.translate(x.x,x.y),p.scale(lt,j),F=0;F<y;++F){if(E=S[F],typeof E=="number"){Y=et*E*W/1e3,this.ctx.translate(Y,0),x.x+=Y*lt;continue}const tt=(E.isSpace?bt:0)+dt,ft=H.charProcOperatorList[E.operatorListId];if(!ft){(0,i.warn)(`Type3 character "${E.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=E,this.save(),p.scale(W,W),p.transform(...d),this.executeOperatorList(ft),this.restore()),z=i.Util.applyTransform([E.width,0],d)[0]*W+tt,p.translate(z,0),x.x+=z*lt}p.restore(),this.processingType3=null}}setCharWidth(S,p){}setCharWidthAndBounds(S,p,x,H,W,j){this.ctx.rect(x,H,W-x,j-H),this.ctx.clip(),this.endPath()}getColorN_Pattern(S){let p;if(S[0]==="TilingPattern"){const x=S[1],H=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),W={createCanvasGraphics:j=>new St(j,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};p=new n.TilingPattern(S,x,this.ctx,W,H)}else p=this._getPattern(S[1],S[2]);return p}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(S,p,x){var W;const H=((W=this.selectColor)==null?void 0:W.call(this,S,p,x))||i.Util.makeHexColor(S,p,x);this.ctx.strokeStyle=H,this.current.strokeColor=H}setFillRGBColor(S,p,x){var W;const H=((W=this.selectColor)==null?void 0:W.call(this,S,p,x))||i.Util.makeHexColor(S,p,x);this.ctx.fillStyle=H,this.current.fillColor=H,this.current.patternFill=!1}_getPattern(S,p=null){let x;return this.cachedPatterns.has(S)?x=this.cachedPatterns.get(S):(x=(0,n.getShadingPattern)(this.objs.get(S)),this.cachedPatterns.set(S,x)),p&&(x.matrix=p),x}shadingFill(S){if(!this.contentVisible)return;const p=this.ctx;this.save();const x=this._getPattern(S);p.fillStyle=x.getPattern(p,this,(0,o.getCurrentTransformInverse)(p),n.PathType.SHADING);const H=(0,o.getCurrentTransformInverse)(p);if(H){const W=p.canvas,j=W.width,et=W.height,dt=i.Util.applyTransform([0,0],H),bt=i.Util.applyTransform([0,et],H),lt=i.Util.applyTransform([j,0],H),d=i.Util.applyTransform([j,et],H),y=Math.min(dt[0],bt[0],lt[0],d[0]),D=Math.min(dt[1],bt[1],lt[1],d[1]),F=Math.max(dt[0],bt[0],lt[0],d[0]),E=Math.max(dt[1],bt[1],lt[1],d[1]);this.ctx.fillRect(y,D,F-y,E-D)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(S,p){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(S)&&S.length===6&&this.transform(...S),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),p)){const x=p[2]-p[0],H=p[3]-p[1];this.ctx.rect(p[0],p[1],x,H),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),p),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(S){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const p=this.ctx;S.isolated||(0,i.info)("TODO: Support non-isolated groups."),S.knockout&&(0,i.warn)("Knockout groups not supported.");const x=(0,o.getCurrentTransform)(p);if(S.matrix&&p.transform(...S.matrix),!S.bbox)throw new Error("Bounding box is required.");let H=i.Util.getAxialAlignedBoundingBox(S.bbox,(0,o.getCurrentTransform)(p));const W=[0,0,p.canvas.width,p.canvas.height];H=i.Util.intersect(H,W)||[0,0,0,0];const j=Math.floor(H[0]),et=Math.floor(H[1]);let dt=Math.max(Math.ceil(H[2])-j,1),bt=Math.max(Math.ceil(H[3])-et,1),lt=1,d=1;dt>P&&(lt=dt/P,dt=P),bt>P&&(d=bt/P,bt=P),this.current.startNewPathAndClipBox([0,0,dt,bt]);let y="groupAt"+this.groupLevel;S.smask&&(y+="_smask_"+this.smaskCounter++%2);const D=this.cachedCanvases.getCanvas(y,dt,bt),F=D.context;F.scale(1/lt,1/d),F.translate(-j,-et),F.transform(...x),S.smask?this.smaskStack.push({canvas:D.canvas,context:F,offsetX:j,offsetY:et,scaleX:lt,scaleY:d,subtype:S.smask.subtype,backdrop:S.smask.backdrop,transferMap:S.smask.transferMap||null,startTransformInverse:null}):(p.setTransform(1,0,0,1,0,0),p.translate(j,et),p.scale(lt,d),p.save()),r(p,F),this.ctx=F,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(p),this.groupLevel++}endGroup(S){if(!this.contentVisible)return;this.groupLevel--;const p=this.ctx,x=this.groupStack.pop();if(this.ctx=x,this.ctx.imageSmoothingEnabled=!1,S.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const H=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...H);const W=i.Util.getAxialAlignedBoundingBox([0,0,p.canvas.width,p.canvas.height],H);this.ctx.drawImage(p.canvas,0,0),this.ctx.restore(),this.compose(W)}}beginAnnotation(S,p,x,H,W){if(Et(this,nt,er).call(this),s(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(p)&&p.length===4){const j=p[2]-p[0],et=p[3]-p[1];if(W&&this.annotationCanvasMap){x=x.slice(),x[4]-=p[0],x[5]-=p[1],p=p.slice(),p[0]=p[1]=0,p[2]=j,p[3]=et;const[dt,bt]=i.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:lt}=this,d=Math.ceil(j*this.outputScaleX*lt),y=Math.ceil(et*this.outputScaleY*lt);this.annotationCanvas=this.canvasFactory.create(d,y);const{canvas:D,context:F}=this.annotationCanvas;this.annotationCanvasMap.set(S,D),this.annotationCanvas.savedCtx=this.ctx,this.ctx=F,this.ctx.setTransform(dt,0,0,-bt,0,et*bt),s(this.ctx,this.foregroundColor)}else s(this.ctx,this.foregroundColor),this.ctx.rect(p[0],p[1],j,et),this.ctx.clip(),this.endPath()}this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...x),this.transform(...H)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(S){if(!this.contentVisible)return;const p=S.count;S=this.getObject(S.data,S),S.count=p;const x=this.ctx,H=this.processingType3;if(H&&(H.compiled===void 0&&(H.compiled=m(S)),H.compiled)){H.compiled(x);return}const W=this._createMaskCanvas(S),j=W.canvas;x.save(),x.setTransform(1,0,0,1,0,0),x.drawImage(j,W.offsetX,W.offsetY),x.restore(),this.compose()}paintImageMaskXObjectRepeat(S,p,x=0,H=0,W,j){if(!this.contentVisible)return;S=this.getObject(S.data,S);const et=this.ctx;et.save();const dt=(0,o.getCurrentTransform)(et);et.transform(p,x,H,W,0,0);const bt=this._createMaskCanvas(S);et.setTransform(1,0,0,1,bt.offsetX-dt[4],bt.offsetY-dt[5]);for(let lt=0,d=j.length;lt<d;lt+=2){const y=i.Util.transform(dt,[p,x,H,W,j[lt],j[lt+1]]),[D,F]=i.Util.applyTransform([0,0],y);et.drawImage(bt.canvas,D,F)}et.restore(),this.compose()}paintImageMaskXObjectGroup(S){if(!this.contentVisible)return;const p=this.ctx,x=this.current.fillColor,H=this.current.patternFill;for(const W of S){const{data:j,width:et,height:dt,transform:bt}=W,lt=this.cachedCanvases.getCanvas("maskCanvas",et,dt),d=lt.context;d.save();const y=this.getObject(j,W);h(d,y),d.globalCompositeOperation="source-in",d.fillStyle=H?x.getPattern(d,this,(0,o.getCurrentTransformInverse)(p),n.PathType.FILL):x,d.fillRect(0,0,et,dt),d.restore(),p.save(),p.transform(...bt),p.scale(1,-1),u(p,lt.canvas,0,0,et,dt,0,-1,1,1),p.restore()}this.compose()}paintImageXObject(S){if(!this.contentVisible)return;const p=this.getObject(S);if(!p){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(p)}paintImageXObjectRepeat(S,p,x,H){if(!this.contentVisible)return;const W=this.getObject(S);if(!W){(0,i.warn)("Dependent image isn't ready yet");return}const j=W.width,et=W.height,dt=[];for(let bt=0,lt=H.length;bt<lt;bt+=2)dt.push({transform:[p,0,0,x,H[bt],H[bt+1]],x:0,y:0,w:j,h:et});this.paintInlineImageXObjectGroup(W,dt)}paintInlineImageXObject(S){if(!this.contentVisible)return;const p=S.width,x=S.height,H=this.ctx;this.save(),H.scale(1/p,-1/x);let W;if(typeof HTMLElement=="function"&&S instanceof HTMLElement||!S.data)W=S;else{const et=this.cachedCanvases.getCanvas("inlineImage",p,x),dt=et.context;l(dt,S,this.current.transferMaps),W=et.canvas}const j=this._scaleImage(W,(0,o.getCurrentTransformInverse)(H));H.imageSmoothingEnabled=ht((0,o.getCurrentTransform)(H),S.interpolate),u(H,j.img,0,0,j.paintWidth,j.paintHeight,0,-x,p,x),this.compose(),this.restore()}paintInlineImageXObjectGroup(S,p){if(!this.contentVisible)return;const x=this.ctx,H=S.width,W=S.height,j=this.cachedCanvases.getCanvas("inlineImage",H,W),et=j.context;l(et,S,this.current.transferMaps);for(const dt of p)x.save(),x.transform(...dt.transform),x.scale(1,-1),u(x,j.canvas,dt.x,dt.y,dt.w,dt.h,0,-1,1,1),x.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(S){}markPointProps(S,p){}beginMarkedContent(S){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(S,p){S==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(p)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(S){const p=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(S);const x=this.ctx;this.pendingClip&&(p||(this.pendingClip===ut?x.clip("evenodd"):x.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),x.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const S=(0,o.getCurrentTransform)(this.ctx);if(S[1]===0&&S[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(S[0]),Math.abs(S[3]));else{const p=Math.abs(S[0]*S[3]-S[2]*S[1]),x=Math.hypot(S[0],S[2]),H=Math.hypot(S[1],S[3]);this._cachedGetSinglePixelWidth=Math.max(x,H)/p}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:S}=this.current,p=(0,o.getCurrentTransform)(this.ctx);let x,H;if(p[1]===0&&p[2]===0){const W=Math.abs(p[0]),j=Math.abs(p[3]);if(S===0)x=1/W,H=1/j;else{const et=W*S,dt=j*S;x=et<1?1/et:1,H=dt<1?1/dt:1}}else{const W=Math.abs(p[0]*p[3]-p[2]*p[1]),j=Math.hypot(p[0],p[1]),et=Math.hypot(p[2],p[3]);if(S===0)x=et/W,H=j/W;else{const dt=S*W;x=et>dt?et/dt:1,H=j>dt?j/dt:1}}this._cachedScaleForStroking=[x,H]}return this._cachedScaleForStroking}rescaleAndStroke(S){const{ctx:p}=this,{lineWidth:x}=this.current,[H,W]=this.getScaleForStroking();if(p.lineWidth=x||1,H===1&&W===1){p.stroke();return}let j,et,dt;S&&(j=(0,o.getCurrentTransform)(p),et=p.getLineDash().slice(),dt=p.lineDashOffset),p.scale(H,W);const bt=Math.max(H,W);p.setLineDash(p.getLineDash().map(lt=>lt/bt)),p.lineDashOffset/=bt,p.stroke(),S&&(p.setTransform(...j),p.setLineDash(et),p.lineDashOffset=dt)}isContentVisible(){for(let S=this.markedContentStack.length-1;S>=0;S--)if(!this.markedContentStack[S].visible)return!1;return!0}};nt=new WeakSet,er=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let Z=St;e.CanvasGraphics=Z;for(const V in i.OPS)Z.prototype[V]!==void 0&&(Z.prototype[i.OPS[V]]=Z.prototype[V])},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=C;var i=f(1),o=f(6);const n={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=n;function R(u,m){if(!m)return;const A=m[2]-m[0],l=m[3]-m[1],h=new Path2D;h.rect(m[0],m[1],A,l),u.clip(h)}class U{constructor(){this.constructor===U&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class O extends U{constructor(m){super(),this._type=m[1],this._bbox=m[2],this._colorStops=m[3],this._p0=m[4],this._p1=m[5],this._r0=m[6],this._r1=m[7],this.matrix=null}_createGradient(m){let A;this._type==="axial"?A=m.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(A=m.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const l of this._colorStops)A.addColorStop(l[0],l[1]);return A}getPattern(m,A,l,h){let r;if(h===n.STROKE||h===n.FILL){const s=A.current.getClippedPathBoundingBox(h,(0,o.getCurrentTransform)(m))||[0,0,0,0],_=Math.ceil(s[2]-s[0])||1,a=Math.ceil(s[3]-s[1])||1,T=A.cachedCanvases.getCanvas("pattern",_,a,!0),I=T.context;I.clearRect(0,0,I.canvas.width,I.canvas.height),I.beginPath(),I.rect(0,0,I.canvas.width,I.canvas.height),I.translate(-s[0],-s[1]),l=i.Util.transform(l,[1,0,0,1,s[0],s[1]]),I.transform(...A.baseTransform),this.matrix&&I.transform(...this.matrix),R(I,this._bbox),I.fillStyle=this._createGradient(I),I.fill(),r=m.createPattern(T.canvas,"no-repeat");const J=new DOMMatrix(l);r.setTransform(J)}else R(m,this._bbox),r=this._createGradient(m);return r}}function P(u,m,A,l,h,r,s,_){const a=m.coords,T=m.colors,I=u.data,J=u.width*4;let ht;a[A+1]>a[l+1]&&(ht=A,A=l,l=ht,ht=r,r=s,s=ht),a[l+1]>a[h+1]&&(ht=l,l=h,h=ht,ht=s,s=_,_=ht),a[A+1]>a[l+1]&&(ht=A,A=l,l=ht,ht=r,r=s,s=ht);const wt=(a[A]+m.offsetX)*m.scaleX,pt=(a[A+1]+m.offsetY)*m.scaleY,mt=(a[l]+m.offsetX)*m.scaleX,ut=(a[l+1]+m.offsetY)*m.scaleY,Z=(a[h]+m.offsetX)*m.scaleX,nt=(a[h+1]+m.offsetY)*m.scaleY;if(pt>=nt)return;const gt=T[r],St=T[r+1],V=T[r+2],S=T[s],p=T[s+1],x=T[s+2],H=T[_],W=T[_+1],j=T[_+2],et=Math.round(pt),dt=Math.round(nt);let bt,lt,d,y,D,F,E,z;for(let Y=et;Y<=dt;Y++){if(Y<ut){let X;Y<pt?X=0:X=(pt-Y)/(pt-ut),bt=wt-(wt-mt)*X,lt=gt-(gt-S)*X,d=St-(St-p)*X,y=V-(V-x)*X}else{let X;Y>nt?X=1:ut===nt?X=0:X=(ut-Y)/(ut-nt),bt=mt-(mt-Z)*X,lt=S-(S-H)*X,d=p-(p-W)*X,y=x-(x-j)*X}let tt;Y<pt?tt=0:Y>nt?tt=1:tt=(pt-Y)/(pt-nt),D=wt-(wt-Z)*tt,F=gt-(gt-H)*tt,E=St-(St-W)*tt,z=V-(V-j)*tt;const ft=Math.round(Math.min(bt,D)),B=Math.round(Math.max(bt,D));let Q=J*Y+ft*4;for(let X=ft;X<=B;X++)tt=(bt-X)/(bt-D),tt<0?tt=0:tt>1&&(tt=1),I[Q++]=lt-(lt-F)*tt|0,I[Q++]=d-(d-E)*tt|0,I[Q++]=y-(y-z)*tt|0,I[Q++]=255}}function v(u,m,A){const l=m.coords,h=m.colors;let r,s;switch(m.type){case"lattice":const _=m.verticesPerRow,a=Math.floor(l.length/_)-1,T=_-1;for(r=0;r<a;r++){let I=r*_;for(let J=0;J<T;J++,I++)P(u,A,l[I],l[I+1],l[I+_],h[I],h[I+1],h[I+_]),P(u,A,l[I+_+1],l[I+1],l[I+_],h[I+_+1],h[I+1],h[I+_])}break;case"triangles":for(r=0,s=l.length;r<s;r+=3)P(u,A,l[r],l[r+1],l[r+2],h[r],h[r+1],h[r+2]);break;default:throw new Error("illegal figure")}}class L extends U{constructor(m){super(),this._coords=m[2],this._colors=m[3],this._figures=m[4],this._bounds=m[5],this._bbox=m[7],this._background=m[8],this.matrix=null}_createMeshCanvas(m,A,l){const _=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),T=Math.ceil(this._bounds[2])-_,I=Math.ceil(this._bounds[3])-a,J=Math.min(Math.ceil(Math.abs(T*m[0]*1.1)),3e3),ht=Math.min(Math.ceil(Math.abs(I*m[1]*1.1)),3e3),wt=T/J,pt=I/ht,mt={coords:this._coords,colors:this._colors,offsetX:-_,offsetY:-a,scaleX:1/wt,scaleY:1/pt},ut=J+2*2,Z=ht+2*2,nt=l.getCanvas("mesh",ut,Z,!1),gt=nt.context,St=gt.createImageData(J,ht);if(A){const S=St.data;for(let p=0,x=S.length;p<x;p+=4)S[p]=A[0],S[p+1]=A[1],S[p+2]=A[2],S[p+3]=255}for(const S of this._figures)v(St,S,mt);return gt.putImageData(St,2,2),{canvas:nt.canvas,offsetX:_-2*wt,offsetY:a-2*pt,scaleX:wt,scaleY:pt}}getPattern(m,A,l,h){R(m,this._bbox);let r;if(h===n.SHADING)r=i.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(m));else if(r=i.Util.singularValueDecompose2dScale(A.baseTransform),this.matrix){const _=i.Util.singularValueDecompose2dScale(this.matrix);r=[r[0]*_[0],r[1]*_[1]]}const s=this._createMeshCanvas(r,h===n.SHADING?null:this._background,A.cachedCanvases);return h!==n.SHADING&&(m.setTransform(...A.baseTransform),this.matrix&&m.transform(...this.matrix)),m.translate(s.offsetX,s.offsetY),m.scale(s.scaleX,s.scaleY),m.createPattern(s.canvas,"no-repeat")}}class k extends U{getPattern(){return"hotpink"}}function C(u){switch(u[0]){case"RadialAxial":return new O(u);case"Mesh":return new L(u);case"Dummy":return new k}throw new Error(`Unknown IR type: ${u[0]}`)}const g={COLORED:1,UNCOLORED:2};class b{static get MAX_PATTERN_SIZE(){return(0,i.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(m,A,l,h,r){this.operatorList=m[2],this.matrix=m[3]||[1,0,0,1,0,0],this.bbox=m[4],this.xstep=m[5],this.ystep=m[6],this.paintType=m[7],this.tilingType=m[8],this.color=A,this.ctx=l,this.canvasGraphicsFactory=h,this.baseTransform=r}createPatternCanvas(m){const A=this.operatorList,l=this.bbox,h=this.xstep,r=this.ystep,s=this.paintType,_=this.tilingType,a=this.color,T=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+_);const I=l[0],J=l[1],ht=l[2],wt=l[3],pt=i.Util.singularValueDecompose2dScale(this.matrix),mt=i.Util.singularValueDecompose2dScale(this.baseTransform),ut=[pt[0]*mt[0],pt[1]*mt[1]],Z=this.getSizeAndScale(h,this.ctx.canvas.width,ut[0]),nt=this.getSizeAndScale(r,this.ctx.canvas.height,ut[1]),gt=m.cachedCanvases.getCanvas("pattern",Z.size,nt.size,!0),St=gt.context,V=T.createCanvasGraphics(St);V.groupLevel=m.groupLevel,this.setFillAndStrokeStyleToContext(V,s,a);let S=I,p=J,x=ht,H=wt;return I<0&&(S=0,x+=Math.abs(I)),J<0&&(p=0,H+=Math.abs(J)),St.translate(-(Z.scale*S),-(nt.scale*p)),V.transform(Z.scale,0,0,nt.scale,0,0),St.save(),this.clipBbox(V,S,p,x,H),V.baseTransform=(0,o.getCurrentTransform)(V.ctx),V.executeOperatorList(A),V.endDrawing(),{canvas:gt.canvas,scaleX:Z.scale,scaleY:nt.scale,offsetX:S,offsetY:p}}getSizeAndScale(m,A,l){m=Math.abs(m);const h=Math.max(b.MAX_PATTERN_SIZE,A);let r=Math.ceil(m*l);return r>=h?r=h:l=r/m,{scale:l,size:r}}clipBbox(m,A,l,h,r){const s=h-A,_=r-l;m.ctx.rect(A,l,s,_),m.current.updateRectMinMax((0,o.getCurrentTransform)(m.ctx),[A,l,h,r]),m.clip(),m.endPath()}setFillAndStrokeStyleToContext(m,A,l){const h=m.ctx,r=m.current;switch(A){case g.COLORED:const s=this.ctx;h.fillStyle=s.fillStyle,h.strokeStyle=s.strokeStyle,r.fillColor=s.fillStyle,r.strokeColor=s.strokeStyle;break;case g.UNCOLORED:const _=i.Util.makeHexColor(l[0],l[1],l[2]);h.fillStyle=_,h.strokeStyle=_,r.fillColor=_,r.strokeColor=_;break;default:throw new i.FormatError(`Unsupported paint type: ${A}`)}}getPattern(m,A,l,h){let r=l;h!==n.SHADING&&(r=i.Util.transform(r,A.baseTransform),this.matrix&&(r=i.Util.transform(r,this.matrix)));const s=this.createPatternCanvas(A);let _=new DOMMatrix(r);_=_.translate(s.offsetX,s.offsetY),_=_.scale(1/s.scaleX,1/s.scaleY);const a=m.createPattern(s.canvas,"repeat");return a.setTransform(_),a}}e.TilingPattern=b},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=o;var i=f(1);function o({src:n,srcPos:R=0,dest:U,destPos:O=0,width:P,height:v,inverseDecode:L=!1}){const k=i.FeatureTest.isLittleEndian?4278190080:255,[C,g]=L?[0,k]:[k,0],b=P>>3,u=P&7,m=n.length;U=new Uint32Array(U.buffer);for(let A=0;A<v;A++){for(const h=R+b;R<h;R++){const r=R<m?n[R]:255;U[O++]=r&128?g:C,U[O++]=r&64?g:C,U[O++]=r&32?g:C,U[O++]=r&16?g:C,U[O++]=r&8?g:C,U[O++]=r&4?g:C,U[O++]=r&2?g:C,U[O++]=r&1?g:C}if(u===0)continue;const l=R<m?n[R++]:255;for(let h=0;h<u;h++)U[O++]=l&1<<7-h?g:C}return{srcPos:R,destPos:O}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const f=Object.create(null);e.GlobalWorkerOptions=f,f.workerPort=null,f.workerSrc=""},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var i=f(1);const o={UNKNOWN:0,DATA:1,ERROR:2},n={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function R(O){switch(O instanceof Error||typeof O=="object"&&O!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),O.name){case"AbortException":return new i.AbortException(O.message);case"MissingPDFException":return new i.MissingPDFException(O.message);case"PasswordException":return new i.PasswordException(O.message,O.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(O.message,O.status);case"UnknownErrorException":return new i.UnknownErrorException(O.message,O.details);default:return new i.UnknownErrorException(O.message,O.toString())}}class U{constructor(P,v,L){this.sourceName=P,this.targetName=v,this.comObj=L,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=k=>{const C=k.data;if(C.targetName!==this.sourceName)return;if(C.stream){this._processStreamMessage(C);return}if(C.callback){const b=C.callbackId,u=this.callbackCapabilities[b];if(!u)throw new Error(`Cannot resolve callback ${b}`);if(delete this.callbackCapabilities[b],C.callback===o.DATA)u.resolve(C.data);else if(C.callback===o.ERROR)u.reject(R(C.reason));else throw new Error("Unexpected callback case");return}const g=this.actionHandler[C.action];if(!g)throw new Error(`Unknown action from worker: ${C.action}`);if(C.callbackId){const b=this.sourceName,u=C.sourceName;new Promise(function(m){m(g(C.data))}).then(function(m){L.postMessage({sourceName:b,targetName:u,callback:o.DATA,callbackId:C.callbackId,data:m})},function(m){L.postMessage({sourceName:b,targetName:u,callback:o.ERROR,callbackId:C.callbackId,reason:R(m)})});return}if(C.streamId){this._createStreamSink(C);return}g(C.data)},L.addEventListener("message",this._onComObjOnMessage)}on(P,v){const L=this.actionHandler;if(L[P])throw new Error(`There is already an actionName called "${P}"`);L[P]=v}send(P,v,L){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:P,data:v},L)}sendWithPromise(P,v,L){const k=this.callbackId++,C=(0,i.createPromiseCapability)();this.callbackCapabilities[k]=C;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:P,callbackId:k,data:v},L)}catch(g){C.reject(g)}return C.promise}sendWithStream(P,v,L,k){const C=this.streamId++,g=this.sourceName,b=this.targetName,u=this.comObj;return new ReadableStream({start:m=>{const A=(0,i.createPromiseCapability)();return this.streamControllers[C]={controller:m,startCall:A,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:g,targetName:b,action:P,streamId:C,data:v,desiredSize:m.desiredSize},k),A.promise},pull:m=>{const A=(0,i.createPromiseCapability)();return this.streamControllers[C].pullCall=A,u.postMessage({sourceName:g,targetName:b,stream:n.PULL,streamId:C,desiredSize:m.desiredSize}),A.promise},cancel:m=>{(0,i.assert)(m instanceof Error,"cancel must have a valid reason");const A=(0,i.createPromiseCapability)();return this.streamControllers[C].cancelCall=A,this.streamControllers[C].isClosed=!0,u.postMessage({sourceName:g,targetName:b,stream:n.CANCEL,streamId:C,reason:R(m)}),A.promise}},L)}_createStreamSink(P){const v=P.streamId,L=this.sourceName,k=P.sourceName,C=this.comObj,g=this,b=this.actionHandler[P.action],u={enqueue(m,A=1,l){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=A,h>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),C.postMessage({sourceName:L,targetName:k,stream:n.ENQUEUE,streamId:v,chunk:m},l)},close(){this.isCancelled||(this.isCancelled=!0,C.postMessage({sourceName:L,targetName:k,stream:n.CLOSE,streamId:v}),delete g.streamSinks[v])},error(m){(0,i.assert)(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,C.postMessage({sourceName:L,targetName:k,stream:n.ERROR,streamId:v,reason:R(m)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:P.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[v]=u,new Promise(function(m){m(b(P.data,u))}).then(function(){C.postMessage({sourceName:L,targetName:k,stream:n.START_COMPLETE,streamId:v,success:!0})},function(m){C.postMessage({sourceName:L,targetName:k,stream:n.START_COMPLETE,streamId:v,reason:R(m)})})}_processStreamMessage(P){const v=P.streamId,L=this.sourceName,k=P.sourceName,C=this.comObj,g=this.streamControllers[v],b=this.streamSinks[v];switch(P.stream){case n.START_COMPLETE:P.success?g.startCall.resolve():g.startCall.reject(R(P.reason));break;case n.PULL_COMPLETE:P.success?g.pullCall.resolve():g.pullCall.reject(R(P.reason));break;case n.PULL:if(!b){C.postMessage({sourceName:L,targetName:k,stream:n.PULL_COMPLETE,streamId:v,success:!0});break}b.desiredSize<=0&&P.desiredSize>0&&b.sinkCapability.resolve(),b.desiredSize=P.desiredSize,new Promise(function(u){u(b.onPull&&b.onPull())}).then(function(){C.postMessage({sourceName:L,targetName:k,stream:n.PULL_COMPLETE,streamId:v,success:!0})},function(u){C.postMessage({sourceName:L,targetName:k,stream:n.PULL_COMPLETE,streamId:v,reason:R(u)})});break;case n.ENQUEUE:if((0,i.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(P.chunk);break;case n.CLOSE:if((0,i.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this._deleteStreamController(g,v);break;case n.ERROR:(0,i.assert)(g,"error should have stream controller"),g.controller.error(R(P.reason)),this._deleteStreamController(g,v);break;case n.CANCEL_COMPLETE:P.success?g.cancelCall.resolve():g.cancelCall.reject(R(P.reason)),this._deleteStreamController(g,v);break;case n.CANCEL:if(!b)break;new Promise(function(u){u(b.onCancel&&b.onCancel(R(P.reason)))}).then(function(){C.postMessage({sourceName:L,targetName:k,stream:n.CANCEL_COMPLETE,streamId:v,success:!0})},function(u){C.postMessage({sourceName:L,targetName:k,stream:n.CANCEL_COMPLETE,streamId:v,reason:R(u)})}),b.sinkCapability.reject(R(P.reason)),b.isCancelled=!0,delete this.streamSinks[v];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(P,v){await Promise.allSettled([P.startCall&&P.startCall.promise,P.pullCall&&P.pullCall.promise,P.cancelCall&&P.cancelCall.promise]),delete this.streamControllers[v]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=U},(t,e,f)=>{var n,R;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=f(1);class o{constructor({parsedData:O,rawData:P}){Rt(this,n);Rt(this,R);It(this,n,O),It(this,R,P)}getRaw(){return M(this,R)}get(O){return M(this,n).get(O)??null}getAll(){return(0,i.objectFromMap)(M(this,n))}has(O){return M(this,n).has(O)}}n=new WeakMap,R=new WeakMap,e.Metadata=o},(t,e,f)=>{var O,P,v,L,k,C,nr;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var i=f(1),o=f(8);const n=Symbol("INTERNAL");class R{constructor(u,m){Rt(this,O,!0);this.name=u,this.intent=m}get visible(){return M(this,O)}_setVisible(u,m){u!==n&&(0,i.unreachable)("Internal method `_setVisible` called."),It(this,O,m)}}O=new WeakMap;class U{constructor(u){Rt(this,C);Rt(this,P,null);Rt(this,v,new Map);Rt(this,L,null);Rt(this,k,null);if(this.name=null,this.creator=null,u!==null){this.name=u.name,this.creator=u.creator,It(this,k,u.order);for(const m of u.groups)M(this,v).set(m.id,new R(m.name,m.intent));if(u.baseState==="OFF")for(const m of M(this,v).values())m._setVisible(n,!1);for(const m of u.on)M(this,v).get(m)._setVisible(n,!0);for(const m of u.off)M(this,v).get(m)._setVisible(n,!1);It(this,L,this.getHash())}}isVisible(u){if(M(this,v).size===0)return!0;if(!u)return(0,i.warn)("Optional content group not defined."),!0;if(u.type==="OCG")return M(this,v).has(u.id)?M(this,v).get(u.id).visible:((0,i.warn)(`Optional content group not found: ${u.id}`),!0);if(u.type==="OCMD"){if(u.expression)return Et(this,C,nr).call(this,u.expression);if(!u.policy||u.policy==="AnyOn"){for(const m of u.ids){if(!M(this,v).has(m))return(0,i.warn)(`Optional content group not found: ${m}`),!0;if(M(this,v).get(m).visible)return!0}return!1}else if(u.policy==="AllOn"){for(const m of u.ids){if(!M(this,v).has(m))return(0,i.warn)(`Optional content group not found: ${m}`),!0;if(!M(this,v).get(m).visible)return!1}return!0}else if(u.policy==="AnyOff"){for(const m of u.ids){if(!M(this,v).has(m))return(0,i.warn)(`Optional content group not found: ${m}`),!0;if(!M(this,v).get(m).visible)return!0}return!1}else if(u.policy==="AllOff"){for(const m of u.ids){if(!M(this,v).has(m))return(0,i.warn)(`Optional content group not found: ${m}`),!0;if(M(this,v).get(m).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${u.policy}.`),!0}return(0,i.warn)(`Unknown group type ${u.type}.`),!0}setVisibility(u,m=!0){if(!M(this,v).has(u)){(0,i.warn)(`Optional content group not found: ${u}`);return}M(this,v).get(u)._setVisible(n,!!m),It(this,P,null)}get hasInitialVisibility(){return this.getHash()===M(this,L)}getOrder(){return M(this,v).size?M(this,k)?M(this,k).slice():[...M(this,v).keys()]:null}getGroups(){return M(this,v).size>0?(0,i.objectFromMap)(M(this,v)):null}getGroup(u){return M(this,v).get(u)||null}getHash(){if(M(this,P)!==null)return M(this,P);const u=new o.MurmurHash3_64;for(const[m,A]of M(this,v))u.update(`${m}:${A.visible}`);return It(this,P,u.hexdigest())}}P=new WeakMap,v=new WeakMap,L=new WeakMap,k=new WeakMap,C=new WeakSet,nr=function(u){const m=u.length;if(m<2)return!0;const A=u[0];for(let l=1;l<m;l++){const h=u[l];let r;if(Array.isArray(h))r=Et(this,C,nr).call(this,h);else if(M(this,v).has(h))r=M(this,v).get(h).visible;else return(0,i.warn)(`Optional content group not found: ${h}`),!0;switch(A){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return A==="And"},e.OptionalContentConfig=U},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var i=f(1),o=f(6);class n{constructor({length:P,initialData:v,progressiveDone:L=!1,contentDispositionFilename:k=null,disableRange:C=!1,disableStream:g=!1},b){if((0,i.assert)(b,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=L,this._contentDispositionFilename=k,(v==null?void 0:v.length)>0){const u=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=b,this._isStreamingSupported=!g,this._isRangeSupported=!C,this._contentLength=P,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((u,m)=>{this._onReceiveData({begin:u,chunk:m})}),this._pdfDataRangeTransport.addProgressListener((u,m)=>{this._onProgress({loaded:u,total:m})}),this._pdfDataRangeTransport.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:P,chunk:v}){const L=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;if(P===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(L):this._queuedChunks.push(L);else{const k=this._rangeReaders.some(function(C){return C._begin!==P?!1:(C._enqueue(L),!0)});(0,i.assert)(k,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}_onProgress(P){var v,L,k,C;P.total===void 0?(L=(v=this._rangeReaders[0])==null?void 0:v.onProgress)==null||L.call(v,{loaded:P.loaded}):(C=(k=this._fullRequestReader)==null?void 0:k.onProgress)==null||C.call(k,{loaded:P.loaded,total:P.total})}_onProgressiveDone(){var P;(P=this._fullRequestReader)==null||P.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(P){const v=this._rangeReaders.indexOf(P);v>=0&&this._rangeReaders.splice(v,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const P=this._queuedChunks;return this._queuedChunks=null,new R(this,P,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(P,v){if(v<=this._progressiveDataLength)return null;const L=new U(this,P,v);return this._pdfDataRangeTransport.requestDataRange(P,v),this._rangeReaders.push(L),L}cancelAllRequests(P){var v;(v=this._fullRequestReader)==null||v.cancel(P);for(const L of this._rangeReaders.slice(0))L.cancel(P);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=n;class R{constructor(P,v,L=!1,k=null){this._stream=P,this._done=L||!1,this._filename=(0,o.isPdfFile)(k)?k:null,this._queuedChunks=v||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),P._fullRequestReader=this,this.onProgress=null}_enqueue(P){this._done||(this._requests.length>0?this._requests.shift().resolve({value:P,done:!1}):this._queuedChunks.push(P),this._loaded+=P.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=(0,i.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class U{constructor(P,v,L){this._stream=P,this._begin=v,this._end=L,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(P){if(!this._done){if(this._requests.length===0)this._queuedChunk=P;else{this._requests.shift().resolve({value:P,done:!1});for(const L of this._requests)L.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const P=(0,i.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class f{static textContent(o){const n=[],R={items:n,styles:Object.create(null)};function U(O){var L;if(!O)return;let P=null;const v=O.name;if(v==="#text")P=O.value;else if(f.shouldBuildText(v))(L=O==null?void 0:O.attributes)!=null&&L.textContent?P=O.attributes.textContent:O.value&&(P=O.value);else return;if(P!==null&&n.push({str:P}),!!O.children)for(const k of O.children)U(k)}return U(o),R}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}e.XfaText=f},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var i=f(7);const o=function(O){return new Promise((P,v)=>{require$$5.readFile(O,(k,C)=>{if(k||!C){v(new Error(k));return}P(new Uint8Array(C))})})};class n extends i.BaseCanvasFactory{_createCanvas(P,v){return require$$5.createCanvas(P,v)}}e.NodeCanvasFactory=n;class R extends i.BaseCMapReaderFactory{_fetchData(P,v){return o(P).then(L=>({cMapData:L,compressionType:v}))}}e.NodeCMapReaderFactory=R;class U extends i.BaseStandardFontDataFactory{_fetchData(P){return o(P)}}e.NodeStandardFontDataFactory=U},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var i=f(1),o=f(22);const n=require$$5,R=require$$5,U=require$$5,O=require$$5,P=/^file:\/\/\/[a-zA-Z]:\//;function v(l){const h=O.parse(l);return h.protocol==="file:"||h.host?h:/^[a-z]:[/\\]/i.test(l)?O.parse(`file:///${l}`):(h.host||(h.protocol="file:"),h)}class L{constructor(h){this.source=h,this.url=v(h.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&h.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var h;return((h=this._fullRequestReader)==null?void 0:h._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new m(this):new b(this),this._fullRequestReader}getRangeReader(h,r){if(r<=this._progressiveDataLength)return null;const s=this.isFsUrl?new A(this,h,r):new u(this,h,r);return this._rangeRequestReaders.push(s),s}cancelAllRequests(h){var r;(r=this._fullRequestReader)==null||r.cancel(h);for(const s of this._rangeRequestReaders.slice(0))s.cancel(h)}}e.PDFNodeStream=L;class k{constructor(h){this._url=h.url,this._done=!1,this._storedError=null,this.onProgress=null;const r=h.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const h=this._readableStream.read();return h===null?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=h.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(h).buffer,done:!1})}cancel(h){if(!this._readableStream){this._error(h);return}this._readableStream.destroy(h)}_error(h){this._storedError=h,this._readCapability.resolve()}_setReadableStream(h){this._readableStream=h,h.on("readable",()=>{this._readCapability.resolve()}),h.on("end",()=>{h.destroy(),this._done=!0,this._readCapability.resolve()}),h.on("error",r=>{this._error(r)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class C{constructor(h){this._url=h.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)();const r=h.source;this._isStreamingSupported=!r.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const h=this._readableStream.read();return h===null?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=h.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(h).buffer,done:!1})}cancel(h){if(!this._readableStream){this._error(h);return}this._readableStream.destroy(h)}_error(h){this._storedError=h,this._readCapability.resolve()}_setReadableStream(h){this._readableStream=h,h.on("readable",()=>{this._readCapability.resolve()}),h.on("end",()=>{h.destroy(),this._done=!0,this._readCapability.resolve()}),h.on("error",r=>{this._error(r)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(l,h){return{protocol:l.protocol,auth:l.auth,host:l.hostname,port:l.port,path:l.path,method:"GET",headers:h}}class b extends k{constructor(h){super(h);const r=s=>{if(s.statusCode===404){const I=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=I,this._headersCapability.reject(I);return}this._headersCapability.resolve(),this._setReadableStream(s);const _=I=>this._readableStream.headers[I.toLowerCase()],{allowRangeRequests:a,suggestedLength:T}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:h.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=T||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(_)};this._request=null,this._url.protocol==="http:"?this._request=R.request(g(this._url,h.httpHeaders),r):this._request=U.request(g(this._url,h.httpHeaders),r),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class u extends C{constructor(h,r,s){super(h),this._httpHeaders={};for(const a in h.httpHeaders){const T=h.httpHeaders[a];T!==void 0&&(this._httpHeaders[a]=T)}this._httpHeaders.Range=`bytes=${r}-${s-1}`;const _=a=>{if(a.statusCode===404){const T=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=T;return}this._setReadableStream(a)};this._request=null,this._url.protocol==="http:"?this._request=R.request(g(this._url,this._httpHeaders),_):this._request=U.request(g(this._url,this._httpHeaders),_),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class m extends k{constructor(h){super(h);let r=decodeURIComponent(this._url.path);P.test(this._url.href)&&(r=r.replace(/^\//,"")),n.lstat(r,(s,_)=>{if(s){s.code==="ENOENT"&&(s=new i.MissingPDFException(`Missing PDF "${r}".`)),this._storedError=s,this._headersCapability.reject(s);return}this._contentLength=_.size,this._setReadableStream(n.createReadStream(r)),this._headersCapability.resolve()})}}class A extends C{constructor(h,r,s){super(h);let _=decodeURIComponent(this._url.path);P.test(this._url.href)&&(_=_.replace(/^\//,"")),this._setReadableStream(n.createReadStream(_,{start:r,end:s-1}))}}},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=O,e.extractFilenameFromHeader=U,e.validateRangeRequestCapabilities=R,e.validateResponseStatus=P;var i=f(1),o=f(23),n=f(6);function R({getResponseHeader:v,isHttp:L,rangeChunkSize:k,disableRange:C}){const g={allowRangeRequests:!1,suggestedLength:void 0},b=parseInt(v("Content-Length"),10);return!Number.isInteger(b)||(g.suggestedLength=b,b<=2*k)||C||!L||v("Accept-Ranges")!=="bytes"||(v("Content-Encoding")||"identity")!=="identity"||(g.allowRangeRequests=!0),g}function U(v){const L=v("Content-Disposition");if(L){let k=(0,o.getFilenameFromContentDispositionHeader)(L);if(k.includes("%"))try{k=decodeURIComponent(k)}catch{}if((0,n.isPdfFile)(k))return k}return null}function O(v,L){return v===404||v===0&&L.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+L+'".'):new i.UnexpectedResponseException(`Unexpected server response (${v}) while retrieving PDF "${L}".`,v)}function P(v){return v===200||v===206}},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=o;var i=f(1);function o(n){let R=!0,U=O("filename\\*","i").exec(n);if(U){U=U[1];let b=k(U);return b=unescape(b),b=C(b),b=g(b),v(b)}if(U=L(n),U){const b=g(U);return v(b)}if(U=O("filename","i").exec(n),U){U=U[1];let b=k(U);return b=g(b),v(b)}function O(b,u){return new RegExp("(?:^|;)\\s*"+b+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function P(b,u){if(b){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const m=new TextDecoder(b,{fatal:!0}),A=(0,i.stringToBytes)(u);u=m.decode(A),R=!1}catch{}}return u}function v(b){return R&&/[\x80-\xff]/.test(b)&&(b=P("utf-8",b),R&&(b=P("iso-8859-1",b))),b}function L(b){const u=[];let m;const A=O("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=A.exec(b))!==null;){let[,h,r,s]=m;if(h=parseInt(h,10),h in u){if(h===0)break;continue}u[h]=[r,s]}const l=[];for(let h=0;h<u.length&&h in u;++h){let[r,s]=u[h];s=k(s),r&&(s=unescape(s),h===0&&(s=C(s))),l.push(s)}return l.join("")}function k(b){if(b.startsWith('"')){const u=b.slice(1).split('\\"');for(let m=0;m<u.length;++m){const A=u[m].indexOf('"');A!==-1&&(u[m]=u[m].slice(0,A),u.length=m+1),u[m]=u[m].replace(/\\(.)/g,"$1")}b=u.join('"')}return b}function C(b){const u=b.indexOf("'");if(u===-1)return b;const m=b.slice(0,u),l=b.slice(u+1).replace(/^[^']*'/,"");return P(m,l)}function g(b){return!b.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(b)?b:b.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,m,A,l){if(A==="q"||A==="Q")return l=l.replace(/_/g," "),l=l.replace(/=([0-9a-fA-F]{2})/g,function(h,r){return String.fromCharCode(parseInt(r,16))}),P(m,l);try{l=atob(l)}catch{}return P(m,l)})}return""}},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var i=f(1),o=f(22);const n=200,R=206;function U(k){const C=k.response;return typeof C!="string"?C:(0,i.stringToBytes)(C).buffer}class O{constructor(C,g={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&g.httpHeaders||Object.create(null),this.withCredentials=g.withCredentials||!1,this.getXhr=g.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,g,b){const u={begin:C,end:g};for(const m in b)u[m]=b[m];return this.request(u)}requestFull(C){return this.request(C)}request(C){const g=this.getXhr(),b=this.currXhrId++,u=this.pendingRequests[b]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(const m in this.httpHeaders){const A=this.httpHeaders[m];A!==void 0&&g.setRequestHeader(m,A)}return this.isHttp&&"begin"in C&&"end"in C?(g.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),u.expectedStatus=R):u.expectedStatus=n,g.responseType="arraybuffer",C.onError&&(g.onerror=function(m){C.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,b),g.onprogress=this.onProgress.bind(this,b),u.onHeadersReceived=C.onHeadersReceived,u.onDone=C.onDone,u.onError=C.onError,u.onProgress=C.onProgress,g.send(null),b}onProgress(C,g){var u;const b=this.pendingRequests[C];b&&((u=b.onProgress)==null||u.call(b,g))}onStateChange(C,g){var h,r,s;const b=this.pendingRequests[C];if(!b)return;const u=b.xhr;if(u.readyState>=2&&b.onHeadersReceived&&(b.onHeadersReceived(),delete b.onHeadersReceived),u.readyState!==4||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],u.status===0&&this.isHttp){(h=b.onError)==null||h.call(b,u.status);return}const m=u.status||n;if(!(m===n&&b.expectedStatus===R)&&m!==b.expectedStatus){(r=b.onError)==null||r.call(b,u.status);return}const l=U(u);if(m===R){const _=u.getResponseHeader("Content-Range"),a=/bytes (\d+)-(\d+)\/(\d+)/.exec(_);b.onDone({begin:parseInt(a[1],10),chunk:l})}else l?b.onDone({begin:0,chunk:l}):(s=b.onError)==null||s.call(b,u.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const g=this.pendingRequests[C].xhr;delete this.pendingRequests[C],g.abort()}}class P{constructor(C){this._source=C,this._manager=new O(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const g=this._rangeRequestReaders.indexOf(C);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new v(this._manager,this._source),this._fullRequestReader}getRangeReader(C,g){const b=new L(this._manager,C,g);return b.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(b),b}cancelAllRequests(C){var g;(g=this._fullRequestReader)==null||g.cancel(C);for(const b of this._rangeRequestReaders.slice(0))b.cancel(C)}}e.PDFNetworkStream=P;class v{constructor(C,g){this._manager=C;const b={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=C.requestFull(b),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,g=this._manager.getRequestXhr(C),b=A=>g.getResponseHeader(A),{allowRangeRequests:u,suggestedLength:m}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});u&&(this._isRangeSupported=!0),this._contentLength=m||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(b),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,o.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var g;(g=this.onProgress)==null||g.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=(0,i.createPromiseCapability)();return this._requests.push(C),C.promise}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class L{constructor(C,g,b){this._manager=C;const u={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(g,b,u),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;(C=this.onClosed)==null||C.call(this,this)}_onDone(C){const g=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunk=g,this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,o.createResponseStatusError)(C,this._url);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var g;this.isStreamingSupported||(g=this.onProgress)==null||g.call(this,{loaded:C.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const C=(0,i.createPromiseCapability)();return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var i=f(1),o=f(22);function n(L,k,C){return{method:"GET",headers:L,signal:C.signal,mode:"cors",credentials:k?"include":"same-origin",redirect:"follow"}}function R(L){const k=new Headers;for(const C in L){const g=L[C];g!==void 0&&k.append(C,g)}return k}function U(L){return L instanceof Uint8Array?L.buffer:L instanceof ArrayBuffer?L:((0,i.warn)(`getArrayBuffer - unexpected data format: ${L}`),new Uint8Array(L).buffer)}class O{constructor(k){this.source=k,this.isHttp=/^https?:/i.test(k.url),this.httpHeaders=this.isHttp&&k.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var k;return((k=this._fullRequestReader)==null?void 0:k._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new P(this),this._fullRequestReader}getRangeReader(k,C){if(C<=this._progressiveDataLength)return null;const g=new v(this,k,C);return this._rangeRequestReaders.push(g),g}cancelAllRequests(k){var C;(C=this._fullRequestReader)==null||C.cancel(k);for(const g of this._rangeRequestReaders.slice(0))g.cancel(k)}}e.PDFFetchStream=O;class P{constructor(k){this._stream=k,this._reader=null,this._loaded=0,this._filename=null;const C=k.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=R(this._stream.httpHeaders);const g=C.url;fetch(g,n(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,o.validateResponseStatus)(b.status))throw(0,o.createResponseStatusError)(b.status,g);this._reader=b.body.getReader(),this._headersCapability.resolve();const u=l=>b.headers.get(l),{allowRangeRequests:m,suggestedLength:A}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=A||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._headersCapability.promise;const{value:k,done:C}=await this._reader.read();return C?{value:k,done:C}:(this._loaded+=k.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded,total:this._contentLength}),{value:U(k),done:!1})}cancel(k){var C;(C=this._reader)==null||C.cancel(k),this._abortController.abort()}}class v{constructor(k,C,g){this._stream=k,this._reader=null,this._loaded=0;const b=k.source;this._withCredentials=b.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!b.disableStream,this._abortController=new AbortController,this._headers=R(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${g-1}`);const u=b.url;fetch(u,n(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,o.validateResponseStatus)(m.status))throw(0,o.createResponseStatusError)(m.status,u);this._readCapability.resolve(),this._reader=m.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._readCapability.promise;const{value:k,done:C}=await this._reader.read();return C?{value:k,done:C}:(this._loaded+=k.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded}),{value:U(k),done:!1})}cancel(k){var C;(C=this._reader)==null||C.cancel(k),this._abortController.abort()}}},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=b,e.updateTextLayer=u;var i=f(1),o=f(6);const n=1e5,R=30,U=.8,O=new Map;function P(m,A){let l;if(A&&i.FeatureTest.isOffscreenCanvasSupported)l=new OffscreenCanvas(m,m).getContext("2d",{alpha:!1});else{const h=document.createElement("canvas");h.width=h.height=m,l=h.getContext("2d",{alpha:!1})}return l}function v(m,A){const l=O.get(m);if(l)return l;const h=P(R,A);h.font=`${R}px ${m}`;const r=h.measureText("");let s=r.fontBoundingBoxAscent,_=Math.abs(r.fontBoundingBoxDescent);if(s){const T=s/(s+_);return O.set(m,T),h.canvas.width=h.canvas.height=0,T}h.strokeStyle="red",h.clearRect(0,0,R,R),h.strokeText("g",0,0);let a=h.getImageData(0,0,R,R).data;_=0;for(let T=a.length-1-3;T>=0;T-=4)if(a[T]>0){_=Math.ceil(T/4/R);break}h.clearRect(0,0,R,R),h.strokeText("A",0,R),a=h.getImageData(0,0,R,R).data,s=0;for(let T=0,I=a.length;T<I;T+=4)if(a[T]>0){s=R-Math.floor(T/4/R);break}if(h.canvas.width=h.canvas.height=0,s){const T=s/(s+_);return O.set(m,T),T}return O.set(m,U),U}function L(m,A,l){const h=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:A.str!=="",hasEOL:A.hasEOL,fontSize:0};m._textDivs.push(h);const s=i.Util.transform(m._transform,A.transform);let _=Math.atan2(s[1],s[0]);const a=l[A.fontName];a.vertical&&(_+=Math.PI/2);const T=Math.hypot(s[2],s[3]),I=T*v(a.fontFamily,m._isOffscreenCanvasSupported);let J,ht;_===0?(J=s[4],ht=s[5]-I):(J=s[4]+I*Math.sin(_),ht=s[5]-I*Math.cos(_));const wt="calc(var(--scale-factor)*",pt=h.style;m._container===m._rootContainer?(pt.left=`${(100*J/m._pageWidth).toFixed(2)}%`,pt.top=`${(100*ht/m._pageHeight).toFixed(2)}%`):(pt.left=`${wt}${J.toFixed(2)}px)`,pt.top=`${wt}${ht.toFixed(2)}px)`),pt.fontSize=`${wt}${T.toFixed(2)}px)`,pt.fontFamily=a.fontFamily,r.fontSize=T,h.setAttribute("role","presentation"),h.textContent=A.str,h.dir=A.dir,m._fontInspectorEnabled&&(h.dataset.fontName=A.fontName),_!==0&&(r.angle=_*(180/Math.PI));let mt=!1;if(A.str.length>1)mt=!0;else if(A.str!==" "&&A.transform[0]!==A.transform[3]){const ut=Math.abs(A.transform[0]),Z=Math.abs(A.transform[3]);ut!==Z&&Math.max(ut,Z)/Math.min(ut,Z)>1.5&&(mt=!0)}mt&&(r.canvasWidth=a.vertical?A.height:A.width),m._textDivProperties.set(h,r),m._isReadableStream&&m._layoutText(h)}function k(m){const{div:A,scale:l,properties:h,ctx:r,prevFontSize:s,prevFontFamily:_}=m,{style:a}=A;let T="";if(h.canvasWidth!==0&&h.hasText){const{fontFamily:I}=a,{canvasWidth:J,fontSize:ht}=h;(s!==ht||_!==I)&&(r.font=`${ht*l}px ${I}`,m.prevFontSize=ht,m.prevFontFamily=I);const{width:wt}=r.measureText(A.textContent);wt>0&&(T=`scaleX(${J*l/wt})`)}h.angle!==0&&(T=`rotate(${h.angle}deg) ${T}`),T.length>0&&(a.transform=T)}function C(m){if(m._canceled)return;const A=m._textDivs,l=m._capability;if(A.length>n){l.resolve();return}if(!m._isReadableStream)for(const r of A)m._layoutText(r);l.resolve()}class g{constructor({textContentSource:A,container:l,viewport:h,textDivs:r,textDivProperties:s,textContentItemsStr:_,isOffscreenCanvasSupported:a}){var wt;this._textContentSource=A,this._isReadableStream=A instanceof ReadableStream,this._container=this._rootContainer=l,this._textDivs=r||[],this._textContentItemsStr=_||[],this._isOffscreenCanvasSupported=a,this._fontInspectorEnabled=!!((wt=globalThis.FontInspector)!=null&&wt.enabled),this._reader=null,this._textDivProperties=s||new WeakMap,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:h.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:P(0,a)};const{pageWidth:T,pageHeight:I,pageX:J,pageY:ht}=h.rawDims;this._transform=[1,0,0,-1,-J,ht+I],this._pageWidth=T,this._pageHeight=I,(0,o.setLayerDimensions)(l,h),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(A,l){for(const h of A){if(h.str===void 0){if(h.type==="beginMarkedContentProps"||h.type==="beginMarkedContent"){const r=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),h.id!==null&&this._container.setAttribute("id",`${h.id}`),r.append(this._container)}else h.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(h.str),L(this,h,l)}}_layoutText(A){const l=this._layoutTextParams.properties=this._textDivProperties.get(A);if(this._layoutTextParams.div=A,k(this._layoutTextParams),l.hasText&&this._container.append(A),l.hasEOL){const h=document.createElement("br");h.setAttribute("role","presentation"),this._container.append(h)}}_render(){const A=(0,i.createPromiseCapability)();let l=Object.create(null);if(this._isReadableStream){const h=()=>{this._reader.read().then(({value:r,done:s})=>{if(s){A.resolve();return}Object.assign(l,r.styles),this._processItems(r.items,l),h()},A.reject)};this._reader=this._textContentSource.getReader(),h()}else if(this._textContentSource){const{items:h,styles:r}=this._textContentSource;this._processItems(h,r),A.resolve()}else throw new Error('No "textContentSource" parameter specified.');A.promise.then(()=>{l=null,C(this)},this._capability.reject)}}e.TextLayerRenderTask=g;function b(m){!m.textContentSource&&(m.textContent||m.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),m.textContentSource=m.textContent||m.textContentStream);const A=new g(m);return A._render(),A}function u({container:m,viewport:A,textDivs:l,textDivProperties:h,isOffscreenCanvasSupported:r,mustRotate:s=!0,mustRescale:_=!0}){if(s&&(0,o.setLayerDimensions)(m,{rotation:A.rotation}),_){const a=P(0,r),I={prevFontSize:null,prevFontFamily:null,div:null,scale:A.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:a};for(const J of l)I.properties=h.get(J),I.div=J,k(I)}}},(t,e,f)=>{var P,v,L,k,C,g,b,u,m,rr,Ur,ir,ar;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var i=f(1),o=f(5),n=f(28),R=f(29),U=f(6);const s=class s{constructor(a){Rt(this,m);Rt(this,P);Rt(this,v,!1);Rt(this,L,this.pointerup.bind(this));Rt(this,k,this.pointerdown.bind(this));Rt(this,C,new Map);Rt(this,g,!1);Rt(this,b,!1);Rt(this,u);s._initialized||(s._initialized=!0,n.FreeTextEditor.initialize(a.l10n),R.InkEditor.initialize(a.l10n)),a.uiManager.registerEditorTypes([n.FreeTextEditor,R.InkEditor]),It(this,u,a.uiManager),this.pageIndex=a.pageIndex,this.div=a.div,It(this,P,a.accessibilityManager),M(this,u).addLayer(this)}get isEmpty(){return M(this,C).size===0}updateToolbar(a){M(this,u).updateToolbar(a)}updateMode(a=M(this,u).getMode()){Et(this,m,ar).call(this),a===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),M(this,u).unselectAll(),a!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",a===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",a===i.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(a){if(!a&&M(this,u).getMode()!==i.AnnotationEditorType.INK)return;if(!a){for(const I of M(this,C).values())if(I.isEmpty()){I.setInBackground();return}}Et(this,m,ir).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(a){M(this,u).setEditingState(a)}addCommands(a){M(this,u).addCommands(a)}enable(){this.div.style.pointerEvents="auto";for(const a of M(this,C).values())a.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const a of M(this,C).values())a.disableEditing();Et(this,m,ar).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(a){M(this,u).getActive()!==a&&M(this,u).setActiveEditor(a)}enableClick(){this.div.addEventListener("pointerdown",M(this,k)),this.div.addEventListener("pointerup",M(this,L))}disableClick(){this.div.removeEventListener("pointerdown",M(this,k)),this.div.removeEventListener("pointerup",M(this,L))}attach(a){M(this,C).set(a.id,a)}detach(a){var T;M(this,C).delete(a.id),(T=M(this,P))==null||T.removePointerInTextLayer(a.contentDiv)}remove(a){M(this,u).removeEditor(a),this.detach(a),a.div.style.display="none",setTimeout(()=>{a.div.style.display="",a.div.remove(),a.isAttachedToDOM=!1,document.activeElement===document.body&&M(this,u).focusMainContainer()},0),M(this,b)||this.addInkEditorIfNeeded(!1)}add(a){if(Et(this,m,rr).call(this,a),M(this,u).addEditor(a),this.attach(a),!a.isAttachedToDOM){const T=a.render();this.div.append(T),a.isAttachedToDOM=!0}this.moveEditorInDOM(a),a.onceAdded(),M(this,u).addToAnnotationStorage(a)}moveEditorInDOM(a){var T;(T=M(this,P))==null||T.moveElementInDOM(this.div,a.div,a.contentDiv,!0)}addOrRebuild(a){a.needsToBeRebuilt()?a.rebuild():this.add(a)}addANewEditor(a){const T=()=>{this.addOrRebuild(a)},I=()=>{a.remove()};this.addCommands({cmd:T,undo:I,mustExec:!0})}addUndoableEditor(a){const T=()=>{this.addOrRebuild(a)},I=()=>{a.remove()};this.addCommands({cmd:T,undo:I,mustExec:!1})}getNextId(){return M(this,u).getId()}deserialize(a){switch(a.annotationType){case i.AnnotationEditorType.FREETEXT:return n.FreeTextEditor.deserialize(a,this,M(this,u));case i.AnnotationEditorType.INK:return R.InkEditor.deserialize(a,this,M(this,u))}return null}setSelected(a){M(this,u).setSelected(a)}toggleSelected(a){M(this,u).toggleSelected(a)}isSelected(a){return M(this,u).isSelected(a)}unselect(a){M(this,u).unselect(a)}pointerup(a){const{isMac:T}=i.FeatureTest.platform;if(!(a.button!==0||a.ctrlKey&&T)&&a.target===this.div&&M(this,g)){if(It(this,g,!1),!M(this,v)){It(this,v,!0);return}Et(this,m,ir).call(this,a)}}pointerdown(a){const{isMac:T}=i.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&T||a.target!==this.div)return;It(this,g,!0);const I=M(this,u).getActive();It(this,v,!I||I.isEmpty())}drop(a){const T=a.dataTransfer.getData("text/plain"),I=M(this,u).getEditor(T);if(!I)return;a.preventDefault(),a.dataTransfer.dropEffect="move",Et(this,m,rr).call(this,I);const J=this.div.getBoundingClientRect(),ht=a.clientX-J.x,wt=a.clientY-J.y;I.translate(ht-I.startX,wt-I.startY),this.moveEditorInDOM(I),I.div.focus()}dragover(a){a.preventDefault()}destroy(){var a,T;((a=M(this,u).getActive())==null?void 0:a.parent)===this&&M(this,u).setActiveEditor(null);for(const I of M(this,C).values())(T=M(this,P))==null||T.removePointerInTextLayer(I.contentDiv),I.setParent(null),I.isAttachedToDOM=!1,I.div.remove();this.div=null,M(this,C).clear(),M(this,u).removeLayer(this)}render({viewport:a}){this.viewport=a,(0,U.setLayerDimensions)(this.div,a),(0,o.bindEvents)(this,this.div,["dragover","drop"]);for(const T of M(this,u).getEditors(this.pageIndex))this.add(T);this.updateMode()}update({viewport:a}){M(this,u).commitOrRemove(),this.viewport=a,(0,U.setLayerDimensions)(this.div,{rotation:a.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:a,pageHeight:T}=this.viewport.rawDims;return[a,T]}};P=new WeakMap,v=new WeakMap,L=new WeakMap,k=new WeakMap,C=new WeakMap,g=new WeakMap,b=new WeakMap,u=new WeakMap,m=new WeakSet,rr=function(a){var T;a.parent!==this&&(this.attach(a),(T=a.parent)==null||T.detach(a),a.setParent(this),a.div&&a.isAttachedToDOM&&(a.div.remove(),this.div.append(a.div)))},Ur=function(a){switch(M(this,u).getMode()){case i.AnnotationEditorType.FREETEXT:return new n.FreeTextEditor(a);case i.AnnotationEditorType.INK:return new R.InkEditor(a)}return null},ir=function(a){const T=this.getNextId(),I=Et(this,m,Ur).call(this,{parent:this,id:T,x:a.offsetX,y:a.offsetY,uiManager:M(this,u)});return I&&this.add(I),I},ar=function(){It(this,b,!0);for(const a of M(this,C).values())a.isEmpty()&&a.remove();It(this,b,!1)},we(s,"_initialized",!1);let O=s;e.AnnotationEditorLayer=O},(t,e,f)=>{var U,O,P,v,L,k,C,g,b,u,Vr,zr,Wr,sr;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var i=f(1),o=f(5),n=f(4);const r=class r extends n.AnnotationEditor{constructor(a){super({...a,name:"freeTextEditor"});Rt(this,u);Rt(this,U,this.editorDivBlur.bind(this));Rt(this,O,this.editorDivFocus.bind(this));Rt(this,P,this.editorDivInput.bind(this));Rt(this,v,this.editorDivKeydown.bind(this));Rt(this,L);Rt(this,k,"");Rt(this,C,`${this.id}-editor`);Rt(this,g,!1);Rt(this,b);It(this,L,a.color||r._defaultColor||n.AnnotationEditor._defaultLineColor),It(this,b,a.fontSize||r._defaultFontSize)}static initialize(a){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(I=>[I,a.get(I)]));const T=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(T.getPropertyValue("--freetext-padding"))}static updateDefaultParams(a,T){switch(a){case i.AnnotationEditorParamsType.FREETEXT_SIZE:r._defaultFontSize=T;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:r._defaultColor=T;break}}updateParams(a,T){switch(a){case i.AnnotationEditorParamsType.FREETEXT_SIZE:Et(this,u,Vr).call(this,T);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:Et(this,u,zr).call(this,T);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,r._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,r._defaultColor||n.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,M(this,b)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,M(this,L)]]}getInitialTranslation(){const a=this.parentScale;return[-r._internalPadding*a,-(r._internalPadding+M(this,b))*a]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",M(this,v)),this.editorDiv.addEventListener("focus",M(this,O)),this.editorDiv.addEventListener("blur",M(this,U)),this.editorDiv.addEventListener("input",M(this,P)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",M(this,C)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",M(this,v)),this.editorDiv.removeEventListener("focus",M(this,O)),this.editorDiv.removeEventListener("blur",M(this,U)),this.editorDiv.removeEventListener("input",M(this,P)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(a){super.focusin(a),a.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),M(this,g)||(It(this,g,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),It(this,k,Et(this,u,Wr).call(this).trimEnd()),Et(this,u,sr).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(a){this.enableEditMode(),this.editorDiv.focus()}keydown(a){a.target===this.div&&a.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(a){r._keyboardManager.exec(this,a)}editorDivFocus(a){this.isEditing=!0}editorDivBlur(a){this.isEditing=!1}editorDivInput(a){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let a,T;this.width&&(a=this.x,T=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",M(this,C)),this.enableEditing(),r._l10nPromise.get("editor_free_text2_aria_label").then(J=>{var ht;return(ht=this.editorDiv)==null?void 0:ht.setAttribute("aria-label",J)}),r._l10nPromise.get("free_text2_default_content").then(J=>{var ht;return(ht=this.editorDiv)==null?void 0:ht.setAttribute("default-content",J)}),this.editorDiv.contentEditable=!0;const{style:I}=this.editorDiv;if(I.fontSize=`calc(${M(this,b)}px * var(--scale-factor))`,I.color=M(this,L),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[J,ht]=this.parentDimensions;this.setAt(a*J,T*ht,this.width*J,this.height*ht);for(const wt of M(this,k).split(`
`)){const pt=document.createElement("div");pt.append(wt?document.createTextNode(wt):document.createElement("br")),this.editorDiv.append(pt)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(a,T,I){const J=super.deserialize(a,T,I);return It(J,b,a.fontSize),It(J,L,i.Util.makeHexColor(...a.color)),It(J,k,a.value),J}serialize(){if(this.isEmpty())return null;const a=r._internalPadding*this.parentScale,T=this.getRect(a,a),I=n.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:M(this,L));return{annotationType:i.AnnotationEditorType.FREETEXT,color:I,fontSize:M(this,b),value:M(this,k),pageIndex:this.pageIndex,rect:T,rotation:this.rotation}}};U=new WeakMap,O=new WeakMap,P=new WeakMap,v=new WeakMap,L=new WeakMap,k=new WeakMap,C=new WeakMap,g=new WeakMap,b=new WeakMap,u=new WeakSet,Vr=function(a){const T=J=>{this.editorDiv.style.fontSize=`calc(${J}px * var(--scale-factor))`,this.translate(0,-(J-M(this,b))*this.parentScale),It(this,b,J),Et(this,u,sr).call(this)},I=M(this,b);this.addCommands({cmd:()=>{T(a)},undo:()=>{T(I)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zr=function(a){const T=M(this,L);this.addCommands({cmd:()=>{It(this,L,this.editorDiv.style.color=a)},undo:()=>{It(this,L,this.editorDiv.style.color=T)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Wr=function(){const a=this.editorDiv.getElementsByTagName("div");if(a.length===0)return this.editorDiv.innerText;const T=[];for(const I of a)T.push(I.innerText.replace(/\r\n?|\n/,""));return T.join(`
`)},sr=function(){const[a,T]=this.parentDimensions;let I;if(this.isAttachedToDOM)I=this.div.getBoundingClientRect();else{const{currentLayer:J,div:ht}=this,wt=ht.style.display;ht.style.display="hidden",J.div.append(this.div),I=ht.getBoundingClientRect(),ht.remove(),ht.style.display=wt}this.width=I.width/a,this.height=I.height/T},we(r,"_freeTextDefaultContent",""),we(r,"_l10nPromise"),we(r,"_internalPadding",0),we(r,"_defaultColor",null),we(r,"_defaultFontSize",10),we(r,"_keyboardManager",new o.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],r.prototype.commitOrRemove]])),we(r,"_type","freetext");let R=r;e.FreeTextEditor=R},(t,e,f)=>{var v,L,k,C,g,b,u,m,A,l,h,r,s,_,a,qr,Gr,Xr,$r,or,Yr,Kr,Jr,Ke,cr,Dn,Fn,mn,lr,On,x,ur,Zr,Qr,ti,hr,In,vn,dr;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return n.fitCurve}});var i=f(1),o=f(4),n=f(30),R=f(5);const U=16,O=100,y=class y extends o.AnnotationEditor{constructor(E){super({...E,name:"inkEditor"});Rt(this,a);Rt(this,v,0);Rt(this,L,0);Rt(this,k,0);Rt(this,C,this.canvasPointermove.bind(this));Rt(this,g,this.canvasPointerleave.bind(this));Rt(this,b,this.canvasPointerup.bind(this));Rt(this,u,this.canvasPointerdown.bind(this));Rt(this,m,!1);Rt(this,A,!1);Rt(this,l,null);Rt(this,h,null);Rt(this,r,0);Rt(this,s,0);Rt(this,_,null);this.color=E.color||null,this.thickness=E.thickness||null,this.opacity=E.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(E){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(z=>[z,E.get(z)]))}static updateDefaultParams(E,z){switch(E){case i.AnnotationEditorParamsType.INK_THICKNESS:y._defaultThickness=z;break;case i.AnnotationEditorParamsType.INK_COLOR:y._defaultColor=z;break;case i.AnnotationEditorParamsType.INK_OPACITY:y._defaultOpacity=z/100;break}}updateParams(E,z){switch(E){case i.AnnotationEditorParamsType.INK_THICKNESS:Et(this,a,qr).call(this,z);break;case i.AnnotationEditorParamsType.INK_COLOR:Et(this,a,Gr).call(this,z);break;case i.AnnotationEditorParamsType.INK_OPACITY:Et(this,a,Xr).call(this,z);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,y._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,y._defaultColor||o.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(y._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||y._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||y._defaultColor||o.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??y._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(Et(this,a,Dn).call(this),Et(this,a,Fn).call(this)),this.isAttachedToDOM||(this.parent.add(this),Et(this,a,mn).call(this)),Et(this,a,vn).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,M(this,h).disconnect(),It(this,h,null),super.remove())}setParent(E){!this.parent&&E?this._uiManager.removeShouldRescale(this):this.parent&&E===null&&this._uiManager.addShouldRescale(this),super.setParent(E)}onScaleChanging(){const[E,z]=this.parentDimensions,Y=this.width*E,tt=this.height*z;this.setDimensions(Y,tt)}enableEditMode(){M(this,m)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",M(this,u)),this.canvas.addEventListener("pointerup",M(this,b)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",M(this,u)),this.canvas.removeEventListener("pointerup",M(this,b)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){M(this,m)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),It(this,m,!0),this.div.classList.add("disabled"),Et(this,a,vn).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(E){super.focusin(E),this.enableEditMode()}canvasPointerdown(E){E.button!==0||!this.isInEditMode()||M(this,m)||(this.setInForeground(),E.type!=="mouse"&&this.div.focus(),E.stopPropagation(),this.canvas.addEventListener("pointerleave",M(this,g)),this.canvas.addEventListener("pointermove",M(this,C)),Et(this,a,Yr).call(this,E.offsetX,E.offsetY))}canvasPointermove(E){E.stopPropagation(),Et(this,a,Kr).call(this,E.offsetX,E.offsetY)}canvasPointerup(E){E.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(E.stopPropagation(),Et(this,a,cr).call(this,E),this.setInBackground())}canvasPointerleave(E){Et(this,a,cr).call(this,E),this.setInBackground()}render(){if(this.div)return this.div;let E,z;this.width&&(E=this.x,z=this.y),super.render(),y._l10nPromise.get("editor_ink2_aria_label").then(Q=>{var X;return(X=this.div)==null?void 0:X.setAttribute("aria-label",Q)});const[Y,tt,ft,B]=Et(this,a,$r).call(this);if(this.setAt(Y,tt,0,0),this.setDims(ft,B),Et(this,a,Dn).call(this),this.width){const[Q,X]=this.parentDimensions;this.setAt(E*Q,z*X,this.width*Q,this.height*X),It(this,A,!0),Et(this,a,mn).call(this),this.setDims(this.width*Q,this.height*X),Et(this,a,Ke).call(this),Et(this,a,dr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Et(this,a,Fn).call(this),this.div}setDimensions(E,z){const Y=Math.round(E),tt=Math.round(z);if(M(this,r)===Y&&M(this,s)===tt)return;It(this,r,Y),It(this,s,tt),this.canvas.style.visibility="hidden",M(this,v)&&Math.abs(M(this,v)-E/z)>.01&&(z=Math.ceil(E/M(this,v)),this.setDims(E,z));const[ft,B]=this.parentDimensions;this.width=E/ft,this.height=z/B,M(this,m)&&Et(this,a,lr).call(this,E,z),Et(this,a,mn).call(this),Et(this,a,Ke).call(this),this.canvas.style.visibility="visible"}static deserialize(E,z,Y){var Ft,Ht;const tt=super.deserialize(E,z,Y);tt.thickness=E.thickness,tt.color=i.Util.makeHexColor(...E.color),tt.opacity=E.opacity;const[ft,B]=tt.pageDimensions,Q=tt.width*ft,X=tt.height*B,vt=tt.parentScale,Pt=E.thickness/2;It(tt,v,Q/X),It(tt,m,!0),It(tt,r,Math.round(Q)),It(tt,s,Math.round(X));for(const{bezier:le}of E.paths){const fe=[];tt.paths.push(fe);let _t=vt*(le[0]-Pt),ot=vt*(X-le[1]-Pt);for(let Ot=2,Zt=le.length;Ot<Zt;Ot+=6){const ae=vt*(le[Ot]-Pt),se=vt*(X-le[Ot+1]-Pt),Ve=vt*(le[Ot+2]-Pt),re=vt*(X-le[Ot+3]-Pt),Ae=vt*(le[Ot+4]-Pt),Le=vt*(X-le[Ot+5]-Pt);fe.push([[_t,ot],[ae,se],[Ve,re],[Ae,Le]]),_t=Ae,ot=Le}const it=Et(this,x,ur).call(this,fe);tt.bezierPath2D.push(it)}const Dt=Et(Ft=tt,a,hr).call(Ft);return It(tt,k,Math.max(U,Dt[2]-Dt[0])),It(tt,L,Math.max(U,Dt[3]-Dt[1])),Et(Ht=tt,a,lr).call(Ht,Q,X),tt}serialize(){if(this.isEmpty())return null;const E=this.getRect(0,0),z=this.rotation%180===0?E[3]-E[1]:E[2]-E[0],Y=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:Y,thickness:this.thickness,opacity:this.opacity,paths:Et(this,a,Zr).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,z),pageIndex:this.pageIndex,rect:E,rotation:this.rotation}}};v=new WeakMap,L=new WeakMap,k=new WeakMap,C=new WeakMap,g=new WeakMap,b=new WeakMap,u=new WeakMap,m=new WeakMap,A=new WeakMap,l=new WeakMap,h=new WeakMap,r=new WeakMap,s=new WeakMap,_=new WeakMap,a=new WeakSet,qr=function(E){const z=this.thickness;this.addCommands({cmd:()=>{this.thickness=E,Et(this,a,vn).call(this)},undo:()=>{this.thickness=z,Et(this,a,vn).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Gr=function(E){const z=this.color;this.addCommands({cmd:()=>{this.color=E,Et(this,a,Ke).call(this)},undo:()=>{this.color=z,Et(this,a,Ke).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Xr=function(E){E/=100;const z=this.opacity;this.addCommands({cmd:()=>{this.opacity=E,Et(this,a,Ke).call(this)},undo:()=>{this.opacity=z,Et(this,a,Ke).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$r=function(){const{parentRotation:E,parentDimensions:[z,Y]}=this;switch(E){case 90:return[0,Y,Y,z];case 180:return[z,Y,z,Y];case 270:return[z,0,Y,z];default:return[0,0,z,Y]}},or=function(){const{ctx:E,color:z,opacity:Y,thickness:tt,parentScale:ft,scaleFactor:B}=this;E.lineWidth=tt*ft/B,E.lineCap="round",E.lineJoin="round",E.miterLimit=10,E.strokeStyle=`${z}${(0,R.opacityToHex)(Y)}`},Yr=function(E,z){this.isEditing=!0,M(this,A)||(It(this,A,!0),Et(this,a,mn).call(this),this.thickness||(this.thickness=y._defaultThickness),this.color||(this.color=y._defaultColor||o.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=y._defaultOpacity)),this.currentPath.push([E,z]),It(this,l,null),Et(this,a,or).call(this),this.ctx.beginPath(),this.ctx.moveTo(E,z),It(this,_,()=>{M(this,_)&&(M(this,l)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):Et(this,a,Ke).call(this),this.ctx.lineTo(...M(this,l)),It(this,l,null),this.ctx.stroke()),window.requestAnimationFrame(M(this,_)))}),window.requestAnimationFrame(M(this,_))},Kr=function(E,z){const[Y,tt]=this.currentPath.at(-1);E===Y&&z===tt||(this.currentPath.push([E,z]),It(this,l,[E,z]))},Jr=function(E,z){var vt;this.ctx.closePath(),It(this,_,null),E=Math.min(Math.max(E,0),this.canvas.width),z=Math.min(Math.max(z,0),this.canvas.height);const[Y,tt]=this.currentPath.at(-1);(E!==Y||z!==tt)&&this.currentPath.push([E,z]);let ft;if(this.currentPath.length!==1)ft=(0,n.fitCurve)(this.currentPath,30,null);else{const Pt=[E,z];ft=[[Pt,Pt.slice(),Pt.slice(),Pt]]}const B=Et(vt=y,x,ur).call(vt,ft);this.currentPath.length=0;const Q=()=>{this.paths.push(ft),this.bezierPath2D.push(B),this.rebuild()},X=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Et(this,a,Dn).call(this),Et(this,a,Fn).call(this)),Et(this,a,vn).call(this))};this.addCommands({cmd:Q,undo:X,mustExec:!0})},Ke=function(){if(this.isEmpty()){Et(this,a,On).call(this);return}Et(this,a,or).call(this);const{canvas:E,ctx:z}=this;z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,E.width,E.height),Et(this,a,On).call(this);for(const Y of this.bezierPath2D)z.stroke(Y)},cr=function(E){Et(this,a,Jr).call(this,E.offsetX,E.offsetY),this.canvas.removeEventListener("pointerleave",M(this,g)),this.canvas.removeEventListener("pointermove",M(this,C)),this.addToAnnotationStorage()},Dn=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",y._l10nPromise.get("editor_ink_canvas_aria_label").then(E=>{var z;return(z=this.canvas)==null?void 0:z.setAttribute("aria-label",E)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Fn=function(){let E=null;It(this,h,new ResizeObserver(z=>{const Y=z[0].contentRect;Y.width&&Y.height&&(E!==null&&clearTimeout(E),E=setTimeout(()=>{this.fixDims(),E=null},O),this.setDimensions(Y.width,Y.height))})),M(this,h).observe(this.div)},mn=function(){if(!M(this,A))return;const[E,z]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*E),this.canvas.height=Math.ceil(this.height*z),Et(this,a,On).call(this)},lr=function(E,z){const Y=Et(this,a,In).call(this),tt=(E-Y)/M(this,k),ft=(z-Y)/M(this,L);this.scaleFactor=Math.min(tt,ft)},On=function(){const E=Et(this,a,In).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+E,this.translationY*this.scaleFactor+E)},x=new WeakSet,ur=function(E){const z=new Path2D;for(let Y=0,tt=E.length;Y<tt;Y++){const[ft,B,Q,X]=E[Y];Y===0&&z.moveTo(...ft),z.bezierCurveTo(B[0],B[1],Q[0],Q[1],X[0],X[1])}return z},Zr=function(E,z,Y,tt){const B=[],Q=this.thickness/2;let X,vt;for(const Pt of this.paths){X=[],vt=[];for(let Dt=0,Ft=Pt.length;Dt<Ft;Dt++){const[Ht,le,fe,_t]=Pt[Dt],ot=E*(Ht[0]+z)+Q,it=tt-E*(Ht[1]+Y)-Q,Ot=E*(le[0]+z)+Q,Zt=tt-E*(le[1]+Y)-Q,ae=E*(fe[0]+z)+Q,se=tt-E*(fe[1]+Y)-Q,Ve=E*(_t[0]+z)+Q,re=tt-E*(_t[1]+Y)-Q;Dt===0&&(X.push(ot,it),vt.push(ot,it)),X.push(Ot,Zt,ae,se,Ve,re),Et(this,a,Qr).call(this,ot,it,Ot,Zt,ae,se,Ve,re,4,vt)}B.push({bezier:X,points:vt})}return B},Qr=function(E,z,Y,tt,ft,B,Q,X,vt,Pt){if(Et(this,a,ti).call(this,E,z,Y,tt,ft,B,Q,X)){Pt.push(Q,X);return}for(let Dt=1;Dt<vt-1;Dt++){const Ft=Dt/vt,Ht=1-Ft;let le=Ft*E+Ht*Y,fe=Ft*z+Ht*tt,_t=Ft*Y+Ht*ft,ot=Ft*tt+Ht*B;const it=Ft*ft+Ht*Q,Ot=Ft*B+Ht*X;le=Ft*le+Ht*_t,fe=Ft*fe+Ht*ot,_t=Ft*_t+Ht*it,ot=Ft*ot+Ht*Ot,le=Ft*le+Ht*_t,fe=Ft*fe+Ht*ot,Pt.push(le,fe)}Pt.push(Q,X)},ti=function(E,z,Y,tt,ft,B,Q,X){const Pt=(3*Y-2*E-Q)**2,Dt=(3*tt-2*z-X)**2,Ft=(3*ft-E-2*Q)**2,Ht=(3*B-z-2*X)**2;return Math.max(Pt,Ft)+Math.max(Dt,Ht)<=10},hr=function(){let E=1/0,z=-1/0,Y=1/0,tt=-1/0;for(const ft of this.paths)for(const[B,Q,X,vt]of ft){const Pt=i.Util.bezierBoundingBox(...B,...Q,...X,...vt);E=Math.min(E,Pt[0]),Y=Math.min(Y,Pt[1]),z=Math.max(z,Pt[2]),tt=Math.max(tt,Pt[3])}return[E,Y,z,tt]},In=function(){return M(this,m)?Math.ceil(this.thickness*this.parentScale):0},vn=function(E=!1){if(this.isEmpty())return;if(!M(this,m)){Et(this,a,Ke).call(this);return}const z=Et(this,a,hr).call(this),Y=Et(this,a,In).call(this);It(this,k,Math.max(U,z[2]-z[0])),It(this,L,Math.max(U,z[3]-z[1]));const tt=Math.ceil(Y+M(this,k)*this.scaleFactor),ft=Math.ceil(Y+M(this,L)*this.scaleFactor),[B,Q]=this.parentDimensions;this.width=tt/B,this.height=ft/Q,It(this,v,tt/ft),Et(this,a,dr).call(this);const X=this.translationX,vt=this.translationY;this.translationX=-z[0],this.translationY=-z[1],Et(this,a,mn).call(this),Et(this,a,Ke).call(this),It(this,r,tt),It(this,s,ft),this.setDims(tt,ft);const Pt=E?Y/this.scaleFactor/2:0;this.translate(X-this.translationX-Pt,vt-this.translationY-Pt)},dr=function(){const{style:E}=this.div;M(this,v)>=1?(E.minHeight=`${U}px`,E.minWidth=`${Math.round(M(this,v)*U)}px`):(E.minWidth=`${U}px`,E.minHeight=`${Math.round(U/M(this,v))}px`)},Rt(y,x),we(y,"_defaultColor",null),we(y,"_defaultOpacity",1),we(y,"_defaultThickness",1),we(y,"_l10nPromise"),we(y,"_type","ink");let P=y;e.InkEditor=P},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const i=f(31);e.fitCurve=i},t=>{function e(g,b,u){if(!Array.isArray(g))throw new TypeError("First argument should be an array");if(g.forEach(h=>{if(!Array.isArray(h)||h.some(r=>typeof r!="number")||h.length!==g[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),g=g.filter((h,r)=>r===0||!h.every((s,_)=>s===g[r-1][_])),g.length<2)return[];const m=g.length,A=L(g[1],g[0]),l=L(g[m-2],g[m-1]);return f(g,A,l,b,u)}function f(g,b,u,m,A){var h,r,s,_,a,T,I,J,ht,wt,pt,mt,ut;if(g.length===2)return mt=k.vectorLen(k.subtract(g[0],g[1]))/3,h=[g[0],k.addArrays(g[0],k.mulItems(b,mt)),k.addArrays(g[1],k.mulItems(u,mt)),g[1]],[h];if(r=U(g),[h,_,T]=i(g,r,r,b,u,A),_===0||_<m)return[h];if(_<m*m)for(s=r,a=_,I=T,ut=0;ut<20;ut++){if(s=n(h,g,s),[h,_,T]=i(g,r,s,b,u,A),_<m)return[h];if(T===I){let Z=_/a;if(Z>.9999&&Z<1.0001)break}a=_,I=T}return pt=[],J=k.subtract(g[T-1],g[T+1]),J.every(Z=>Z===0)&&(J=k.subtract(g[T-1],g[T]),[J[0],J[1]]=[-J[1],J[0]]),ht=k.normalize(J),wt=k.mulItems(ht,-1),pt=pt.concat(f(g.slice(0,T+1),b,ht,m,A)),pt=pt.concat(f(g.slice(T),wt,u,m,A)),pt}function i(g,b,u,m,A,l){var h,r,s;return h=o(g,u,m,A),[r,s]=O(g,h,b),l&&l({bez:h,points:g,params:b,maxErr:r,maxPoint:s}),[h,r,s]}function o(g,b,u,m){var A,l,h,r,s,_,a,T,I,J,ht,wt,pt,mt,ut,Z,nt,gt=g[0],St=g[g.length-1];for(A=[gt,null,null,St],l=k.zeros_Xx2x2(b.length),pt=0,mt=b.length;pt<mt;pt++)Z=b[pt],nt=1-Z,h=l[pt],h[0]=k.mulItems(u,3*Z*(nt*nt)),h[1]=k.mulItems(m,3*nt*(Z*Z));for(r=[[0,0],[0,0]],s=[0,0],pt=0,mt=g.length;pt<mt;pt++)Z=b[pt],h=l[pt],r[0][0]+=k.dot(h[0],h[0]),r[0][1]+=k.dot(h[0],h[1]),r[1][0]+=k.dot(h[0],h[1]),r[1][1]+=k.dot(h[1],h[1]),ut=k.subtract(g[pt],C.q([gt,gt,St,St],Z)),s[0]+=k.dot(h[0],ut),s[1]+=k.dot(h[1],ut);return _=r[0][0]*r[1][1]-r[1][0]*r[0][1],a=r[0][0]*s[1]-r[1][0]*s[0],T=s[0]*r[1][1]-s[1]*r[0][1],I=_===0?0:T/_,J=_===0?0:a/_,wt=k.vectorLen(k.subtract(gt,St)),ht=1e-6*wt,I<ht||J<ht?(A[1]=k.addArrays(gt,k.mulItems(u,wt/3)),A[2]=k.addArrays(St,k.mulItems(m,wt/3))):(A[1]=k.addArrays(gt,k.mulItems(u,I)),A[2]=k.addArrays(St,k.mulItems(m,J))),A}function n(g,b,u){return u.map((m,A)=>R(g,b[A],m))}function R(g,b,u){var m=k.subtract(C.q(g,u),b),A=C.qprime(g,u),l=k.mulMatrix(m,A),h=k.sum(k.squareItems(A))+2*k.mulMatrix(m,C.qprimeprime(g,u));return h===0?u:u-l/h}function U(g){var b=[],u,m,A;return g.forEach((l,h)=>{u=h?m+k.vectorLen(k.subtract(l,A)):0,b.push(u),m=u,A=l}),b=b.map(l=>l/m),b}function O(g,b,u){var m,A,l,h,r,s,_,a;A=0,l=Math.floor(g.length/2);const T=P(b,10);for(r=0,s=g.length;r<s;r++)_=g[r],a=v(b,u[r],T,10),h=k.subtract(C.q(b,a),_),m=h[0]*h[0]+h[1]*h[1],m>A&&(A=m,l=r);return[A,l]}var P=function(g,b){for(var u,m=[0],A=g[0],l=0,h=1;h<=b;h++)u=C.q(g,h/b),l+=k.vectorLen(k.subtract(u,A)),m.push(l),A=u;return m=m.map(r=>r/l),m};function v(g,b,u,m){if(b<0)return 0;if(b>1)return 1;for(var A,l,h,r,s,_=1;_<=m;_++)if(b<=u[_]){r=(_-1)/m,h=_/m,l=u[_-1],A=u[_],s=(b-l)/(A-l)*(h-r)+r;break}return s}function L(g,b){return k.normalize(k.subtract(g,b))}class k{static zeros_Xx2x2(b){for(var u=[];b--;)u.push([0,0]);return u}static mulItems(b,u){return b.map(m=>m*u)}static mulMatrix(b,u){return b.reduce((m,A,l)=>m+A*u[l],0)}static subtract(b,u){return b.map((m,A)=>m-u[A])}static addArrays(b,u){return b.map((m,A)=>m+u[A])}static addItems(b,u){return b.map(m=>m+u)}static sum(b){return b.reduce((u,m)=>u+m)}static dot(b,u){return k.mulMatrix(b,u)}static vectorLen(b){return Math.hypot(...b)}static divItems(b,u){return b.map(m=>m/u)}static squareItems(b){return b.map(u=>u*u)}static normalize(b){return this.divItems(b,this.vectorLen(b))}}class C{static q(b,u){var m=1-u,A=k.mulItems(b[0],m*m*m),l=k.mulItems(b[1],3*m*m*u),h=k.mulItems(b[2],3*m*u*u),r=k.mulItems(b[3],u*u*u);return k.addArrays(k.addArrays(A,l),k.addArrays(h,r))}static qprime(b,u){var m=1-u,A=k.mulItems(k.subtract(b[1],b[0]),3*m*m),l=k.mulItems(k.subtract(b[2],b[1]),6*m*u),h=k.mulItems(k.subtract(b[3],b[2]),3*u*u);return k.addArrays(k.addArrays(A,l),h)}static qprimeprime(b,u){return k.addArrays(k.mulItems(k.addArrays(k.subtract(b[2],k.mulItems(b[1],2)),b[0]),6*(1-u)),k.mulItems(k.addArrays(k.subtract(b[3],k.mulItems(b[2],2)),b[1]),6*u))}}t.exports=e,t.exports.fitCubic=f,t.exports.createTangent=L},(t,e,f)=>{var p,un,ei,j,fr,pr;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var i=f(1),o=f(6),n=f(3),R=f(33),U=f(34);const O=1e3,P=9,v=new WeakSet;function L(lt){return{width:lt[2]-lt[0],height:lt[3]-lt[1]}}class k{static create(d){switch(d.data.annotationType){case i.AnnotationType.LINK:return new g(d);case i.AnnotationType.TEXT:return new b(d);case i.AnnotationType.WIDGET:switch(d.data.fieldType){case"Tx":return new m(d);case"Btn":return d.data.radioButton?new l(d):d.data.checkBox?new A(d):new h(d);case"Ch":return new r(d)}return new u(d);case i.AnnotationType.POPUP:return new s(d);case i.AnnotationType.FREETEXT:return new a(d);case i.AnnotationType.LINE:return new T(d);case i.AnnotationType.SQUARE:return new I(d);case i.AnnotationType.CIRCLE:return new J(d);case i.AnnotationType.POLYLINE:return new ht(d);case i.AnnotationType.CARET:return new pt(d);case i.AnnotationType.INK:return new mt(d);case i.AnnotationType.POLYGON:return new wt(d);case i.AnnotationType.HIGHLIGHT:return new ut(d);case i.AnnotationType.UNDERLINE:return new Z(d);case i.AnnotationType.SQUIGGLY:return new nt(d);case i.AnnotationType.STRIKEOUT:return new gt(d);case i.AnnotationType.STAMP:return new St(d);case i.AnnotationType.FILEATTACHMENT:return new V(d);default:return new C(d)}}}class C{constructor(d,{isRenderable:y=!1,ignoreBorder:D=!1,createQuadrilaterals:F=!1}={}){this.isRenderable=y,this.data=d.data,this.layer=d.layer,this.page=d.page,this.viewport=d.viewport,this.linkService=d.linkService,this.downloadManager=d.downloadManager,this.imageResourcesPath=d.imageResourcesPath,this.renderForms=d.renderForms,this.svgFactory=d.svgFactory,this.annotationStorage=d.annotationStorage,this.enableScripting=d.enableScripting,this.hasJSActions=d.hasJSActions,this._fieldObjects=d.fieldObjects,y&&(this.container=this._createContainer(D)),F&&(this.quadrilaterals=this._createQuadrilaterals(D))}_createContainer(d=!1){const{data:y,page:D,viewport:F}=this,E=document.createElement("section");E.setAttribute("data-annotation-id",y.id);const{pageWidth:z,pageHeight:Y,pageX:tt,pageY:ft}=F.rawDims,{width:B,height:Q}=L(y.rect),X=i.Util.normalizeRect([y.rect[0],D.view[3]-y.rect[1]+D.view[1],y.rect[2],D.view[3]-y.rect[3]+D.view[1]]);if(!d&&y.borderStyle.width>0){E.style.borderWidth=`${y.borderStyle.width}px`;const Pt=y.borderStyle.horizontalCornerRadius,Dt=y.borderStyle.verticalCornerRadius;if(Pt>0||Dt>0){const Ht=`calc(${Pt}px * var(--scale-factor)) / calc(${Dt}px * var(--scale-factor))`;E.style.borderRadius=Ht}else if(this instanceof l){const Ht=`calc(${B}px * var(--scale-factor)) / calc(${Q}px * var(--scale-factor))`;E.style.borderRadius=Ht}switch(y.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:E.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:E.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:E.style.borderBottomStyle="solid";break}const Ft=y.borderColor||null;Ft?E.style.borderColor=i.Util.makeHexColor(Ft[0]|0,Ft[1]|0,Ft[2]|0):E.style.borderWidth=0}E.style.left=`${100*(X[0]-tt)/z}%`,E.style.top=`${100*(X[1]-ft)/Y}%`;const{rotation:vt}=y;return y.hasOwnCanvas||vt===0?(E.style.width=`${100*B/z}%`,E.style.height=`${100*Q/Y}%`):this.setRotation(vt,E),E}setRotation(d,y=this.container){const{pageWidth:D,pageHeight:F}=this.viewport.rawDims,{width:E,height:z}=L(this.data.rect);let Y,tt;d%180===0?(Y=100*E/D,tt=100*z/F):(Y=100*z/D,tt=100*E/F),y.style.width=`${Y}%`,y.style.height=`${tt}%`,y.setAttribute("data-main-rotation",(360-d)%360)}get _commonActions(){const d=(y,D,F)=>{const E=F.detail[y];F.target.style[D]=R.ColorConverters[`${E[0]}_HTML`](E.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:y=>{const D=y.detail.display%2===1;this.container.style.visibility=D?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:D,print:y.detail.display===0||y.detail.display===3})},print:y=>{this.annotationStorage.setValue(this.data.id,{print:y.detail.print})},hidden:y=>{this.container.style.visibility=y.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:y.detail.hidden})},focus:y=>{setTimeout(()=>y.target.focus({preventScroll:!1}),0)},userName:y=>{y.target.title=y.detail.userName},readonly:y=>{y.detail.readonly?y.target.setAttribute("readonly",""):y.target.removeAttribute("readonly")},required:y=>{this._setRequired(y.target,y.detail.required)},bgColor:y=>{d("bgColor","backgroundColor",y)},fillColor:y=>{d("fillColor","backgroundColor",y)},fgColor:y=>{d("fgColor","color",y)},textColor:y=>{d("textColor","color",y)},borderColor:y=>{d("borderColor","borderColor",y)},strokeColor:y=>{d("strokeColor","borderColor",y)},rotation:y=>{const D=y.detail.rotation;this.setRotation(D),this.annotationStorage.setValue(this.data.id,{rotation:D})}})}_dispatchEventFromSandbox(d,y){const D=this._commonActions;for(const F of Object.keys(y.detail)){const E=d[F]||D[F];E==null||E(y)}}_setDefaultPropertiesFromJS(d){if(!this.enableScripting)return;const y=this.annotationStorage.getRawValue(this.data.id);if(!y)return;const D=this._commonActions;for(const[F,E]of Object.entries(y)){const z=D[F];if(z){const Y={detail:{[F]:E},target:d};z(Y),delete y[F]}}}_createQuadrilaterals(d=!1){if(!this.data.quadPoints)return null;const y=[],D=this.data.rect;for(const F of this.data.quadPoints)this.data.rect=[F[2].x,F[2].y,F[1].x,F[1].y],y.push(this._createContainer(d));return this.data.rect=D,y}_createPopup(d,y){let D=this.container;this.quadrilaterals&&(d=d||this.quadrilaterals,D=this.quadrilaterals[0]),d||(d=document.createElement("div"),d.className="popupTriggerArea",D.append(d));const E=new _({container:D,trigger:d,color:y.color,titleObj:y.titleObj,modificationDate:y.modificationDate,contentsObj:y.contentsObj,richText:y.richText,hideWrapper:!0}).render();E.style.left="100%",D.append(E)}_renderQuadrilaterals(d){for(const y of this.quadrilaterals)y.className=d;return this.quadrilaterals}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(d,y=null){const D=[];if(this._fieldObjects){const F=this._fieldObjects[d];if(F)for(const{page:E,id:z,exportValues:Y}of F){if(E===-1||z===y)continue;const tt=typeof Y=="string"?Y:null,ft=document.querySelector(`[data-element-id="${z}"]`);if(ft&&!v.has(ft)){(0,i.warn)(`_getElementsByName - element not allowed: ${z}`);continue}D.push({id:z,exportValue:tt,domElement:ft})}return D}for(const F of document.getElementsByName(d)){const{exportValue:E}=F,z=F.getAttribute("data-element-id");z!==y&&v.has(F)&&D.push({id:z,exportValue:E,domElement:F})}return D}}class g extends C{constructor(y,D=null){super(y,{isRenderable:!0,ignoreBorder:!!(D!=null&&D.ignoreBorder),createQuadrilaterals:!0});Rt(this,p);this.isTooltipOnly=y.data.isTooltipOnly}render(){const{data:y,linkService:D}=this,F=document.createElement("a");F.setAttribute("data-element-id",y.id);let E=!1;return y.url?(D.addLinkAttributes(F,y.url,y.newWindow),E=!0):y.action?(this._bindNamedAction(F,y.action),E=!0):y.attachment?(this._bindAttachment(F,y.attachment),E=!0):y.setOCGState?(Et(this,p,ei).call(this,F,y.setOCGState),E=!0):y.dest?(this._bindLink(F,y.dest),E=!0):(y.actions&&(y.actions.Action||y.actions["Mouse Up"]||y.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(F,y),E=!0),y.resetForm?(this._bindResetFormAction(F,y.resetForm),E=!0):this.isTooltipOnly&&!E&&(this._bindLink(F,""),E=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((z,Y)=>{const tt=Y===0?F:F.cloneNode();return z.append(tt),z}):(this.container.className="linkAnnotation",E&&this.container.append(F),this.container)}_bindLink(y,D){y.href=this.linkService.getDestinationHash(D),y.onclick=()=>(D&&this.linkService.goToDestination(D),!1),(D||D==="")&&Et(this,p,un).call(this)}_bindNamedAction(y,D){y.href=this.linkService.getAnchorUrl(""),y.onclick=()=>(this.linkService.executeNamedAction(D),!1),Et(this,p,un).call(this)}_bindAttachment(y,D){y.href=this.linkService.getAnchorUrl(""),y.onclick=()=>{var F;return(F=this.downloadManager)==null||F.openOrDownloadData(this.container,D.content,D.filename),!1},Et(this,p,un).call(this)}_bindJSAction(y,D){y.href=this.linkService.getAnchorUrl("");const F=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const E of Object.keys(D.actions)){const z=F.get(E);z&&(y[z]=()=>{var Y;return(Y=this.linkService.eventBus)==null||Y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D.id,name:E}}),!1})}y.onclick||(y.onclick=()=>!1),Et(this,p,un).call(this)}_bindResetFormAction(y,D){const F=y.onclick;if(F||(y.href=this.linkService.getAnchorUrl("")),Et(this,p,un).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),F||(y.onclick=()=>!1);return}y.onclick=()=>{var Q;F==null||F();const{fields:E,refs:z,include:Y}=D,tt=[];if(E.length!==0||z.length!==0){const X=new Set(z);for(const vt of E){const Pt=this._fieldObjects[vt]||[];for(const{id:Dt}of Pt)X.add(Dt)}for(const vt of Object.values(this._fieldObjects))for(const Pt of vt)X.has(Pt.id)===Y&&tt.push(Pt)}else for(const X of Object.values(this._fieldObjects))tt.push(...X);const ft=this.annotationStorage,B=[];for(const X of tt){const{id:vt}=X;switch(B.push(vt),X.type){case"text":{const Dt=X.defaultValue||"";ft.setValue(vt,{value:Dt});break}case"checkbox":case"radiobutton":{const Dt=X.defaultValue===X.exportValues;ft.setValue(vt,{value:Dt});break}case"combobox":case"listbox":{const Dt=X.defaultValue||"";ft.setValue(vt,{value:Dt});break}default:continue}const Pt=document.querySelector(`[data-element-id="${vt}"]`);if(Pt){if(!v.has(Pt)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${vt}`);continue}}else continue;Pt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:B,name:"ResetForm"}})),!1}}}p=new WeakSet,un=function(){this.container.setAttribute("data-internal-link","")},ei=function(y,D){y.href=this.linkService.getAnchorUrl(""),y.onclick=()=>(this.linkService.executeSetOCGState(D),!1),Et(this,p,un).call(this)};class b extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y})}render(){this.container.className="textAnnotation";const d=document.createElement("img");return d.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",d.alt="[{{type}} Annotation]",d.dataset.l10nId="text_annotation_type",d.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(d,this.data),this.container.append(d),this.container}}class u extends C{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(d){const{isWin:y,isMac:D}=i.FeatureTest.platform;return y&&d.ctrlKey||D&&d.metaKey}_setEventListener(d,y,D,F){y.includes("mouse")?d.addEventListener(y,E=>{var z;(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:D,value:F(E),shift:E.shiftKey,modifier:this._getKeyModifier(E)}})}):d.addEventListener(y,E=>{var z;(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:D,value:F(E)}})})}_setEventListeners(d,y,D){var F;for(const[E,z]of y)(z==="Action"||(F=this.data.actions)!=null&&F[z])&&this._setEventListener(d,E,z,D)}_setBackgroundColor(d){const y=this.data.backgroundColor||null;d.style.backgroundColor=y===null?"transparent":i.Util.makeHexColor(y[0],y[1],y[2])}_setTextStyle(d){const y=["left","center","right"],{fontColor:D}=this.data.defaultAppearanceData,F=this.data.defaultAppearanceData.fontSize||P,E=d.style;let z;const Y=2,tt=ft=>Math.round(10*ft)/10;if(this.data.multiLine){const ft=Math.abs(this.data.rect[3]-this.data.rect[1]-Y),B=Math.round(ft/(i.LINE_FACTOR*F))||1,Q=ft/B;z=Math.min(F,tt(Q/i.LINE_FACTOR))}else{const ft=Math.abs(this.data.rect[3]-this.data.rect[1]-Y);z=Math.min(F,tt(ft/i.LINE_FACTOR))}E.fontSize=`calc(${z}px * var(--scale-factor))`,E.color=i.Util.makeHexColor(D[0],D[1],D[2]),this.data.textAlignment!==null&&(E.textAlign=y[this.data.textAlignment])}_setRequired(d,y){y?d.setAttribute("required",!0):d.removeAttribute("required"),d.setAttribute("aria-required",y)}}class m extends u{constructor(d){const y=d.renderForms||!d.data.hasAppearance&&!!d.data.fieldValue;super(d,{isRenderable:y})}setPropertyOnSiblings(d,y,D,F){const E=this.annotationStorage;for(const z of this._getElementsByName(d.name,d.id))z.domElement&&(z.domElement[y]=D),E.setValue(z.id,{[F]:D})}render(){var F;const d=this.annotationStorage,y=this.data.id;this.container.className="textWidgetAnnotation";let D=null;if(this.renderForms){const E=d.getValue(y,{value:this.data.fieldValue});let z=E.formattedValue||E.value||"";const Y=d.getValue(y,{charLimit:this.data.maxLen}).charLimit;Y&&z.length>Y&&(z=z.slice(0,Y));const tt={userValue:z,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(D=document.createElement("textarea"),D.textContent=z,this.data.doNotScroll&&(D.style.overflowY="hidden")):(D=document.createElement("input"),D.type="text",D.setAttribute("value",z),this.data.doNotScroll&&(D.style.overflowX="hidden")),v.add(D),D.setAttribute("data-element-id",y),D.disabled=this.data.readOnly,D.name=this.data.fieldName,D.tabIndex=O,this._setRequired(D,this.data.required),Y&&(D.maxLength=Y),D.addEventListener("input",B=>{d.setValue(y,{value:B.target.value}),this.setPropertyOnSiblings(D,"value",B.target.value,"value")}),D.addEventListener("resetform",B=>{const Q=this.data.defaultFieldValue??"";D.value=tt.userValue=Q,tt.formattedValue=null});let ft=B=>{const{formattedValue:Q}=tt;Q!=null&&(B.target.value=Q),B.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){D.addEventListener("focus",Q=>{const{target:X}=Q;tt.userValue&&(X.value=tt.userValue),tt.lastCommittedValue=X.value,tt.commitKey=1}),D.addEventListener("updatefromsandbox",Q=>{const X={value(vt){tt.userValue=vt.detail.value??"",d.setValue(y,{value:tt.userValue.toString()}),vt.target.value=tt.userValue},formattedValue(vt){const{formattedValue:Pt}=vt.detail;tt.formattedValue=Pt,Pt!=null&&vt.target!==document.activeElement&&(vt.target.value=Pt),d.setValue(y,{formattedValue:Pt})},selRange(vt){vt.target.setSelectionRange(...vt.detail.selRange)},charLimit:vt=>{var Ht;const{charLimit:Pt}=vt.detail,{target:Dt}=vt;if(Pt===0){Dt.removeAttribute("maxLength");return}Dt.setAttribute("maxLength",Pt);let Ft=tt.userValue;!Ft||Ft.length<=Pt||(Ft=Ft.slice(0,Pt),Dt.value=tt.userValue=Ft,d.setValue(y,{value:Ft}),(Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:Ft,willCommit:!0,commitKey:1,selStart:Dt.selectionStart,selEnd:Dt.selectionEnd}}))}};this._dispatchEventFromSandbox(X,Q)}),D.addEventListener("keydown",Q=>{var Pt;tt.commitKey=1;let X=-1;if(Q.key==="Escape"?X=0:Q.key==="Enter"&&!this.data.multiLine?X=2:Q.key==="Tab"&&(tt.commitKey=3),X===-1)return;const{value:vt}=Q.target;tt.lastCommittedValue!==vt&&(tt.lastCommittedValue=vt,tt.userValue=vt,(Pt=this.linkService.eventBus)==null||Pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:vt,willCommit:!0,commitKey:X,selStart:Q.target.selectionStart,selEnd:Q.target.selectionEnd}}))});const B=ft;ft=null,D.addEventListener("blur",Q=>{var vt;if(!Q.relatedTarget)return;const{value:X}=Q.target;tt.userValue=X,tt.lastCommittedValue!==X&&((vt=this.linkService.eventBus)==null||vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:X,willCommit:!0,commitKey:tt.commitKey,selStart:Q.target.selectionStart,selEnd:Q.target.selectionEnd}})),B(Q)}),(F=this.data.actions)!=null&&F.Keystroke&&D.addEventListener("beforeinput",Q=>{var fe;tt.lastCommittedValue=null;const{data:X,target:vt}=Q,{value:Pt,selectionStart:Dt,selectionEnd:Ft}=vt;let Ht=Dt,le=Ft;switch(Q.inputType){case"deleteWordBackward":{const _t=Pt.substring(0,Dt).match(/\w*[^\w]*$/);_t&&(Ht-=_t[0].length);break}case"deleteWordForward":{const _t=Pt.substring(Dt).match(/^[^\w]*\w*/);_t&&(le+=_t[0].length);break}case"deleteContentBackward":Dt===Ft&&(Ht-=1);break;case"deleteContentForward":Dt===Ft&&(le+=1);break}Q.preventDefault(),(fe=this.linkService.eventBus)==null||fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:Pt,change:X||"",willCommit:!1,selStart:Ht,selEnd:le}})}),this._setEventListeners(D,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Q=>Q.target.value)}if(ft&&D.addEventListener("blur",ft),this.data.comb){const Q=(this.data.rect[2]-this.data.rect[0])/Y;D.classList.add("comb"),D.style.letterSpacing=`calc(${Q}px * var(--scale-factor) - 1ch)`}}else D=document.createElement("div"),D.textContent=this.data.fieldValue,D.style.verticalAlign="middle",D.style.display="table-cell";return this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class A extends u{constructor(d){super(d,{isRenderable:d.renderForms})}render(){const d=this.annotationStorage,y=this.data,D=y.id;let F=d.getValue(D,{value:y.exportValue===y.fieldValue}).value;typeof F=="string"&&(F=F!=="Off",d.setValue(D,{value:F})),this.container.className="buttonWidgetAnnotation checkBox";const E=document.createElement("input");return v.add(E),E.setAttribute("data-element-id",D),E.disabled=y.readOnly,this._setRequired(E,this.data.required),E.type="checkbox",E.name=y.fieldName,F&&E.setAttribute("checked",!0),E.setAttribute("exportValue",y.exportValue),E.tabIndex=O,E.addEventListener("change",z=>{const{name:Y,checked:tt}=z.target;for(const ft of this._getElementsByName(Y,D)){const B=tt&&ft.exportValue===y.exportValue;ft.domElement&&(ft.domElement.checked=B),d.setValue(ft.id,{value:B})}d.setValue(D,{value:tt})}),E.addEventListener("resetform",z=>{const Y=y.defaultFieldValue||"Off";z.target.checked=Y===y.exportValue}),this.enableScripting&&this.hasJSActions&&(E.addEventListener("updatefromsandbox",z=>{const Y={value(tt){tt.target.checked=tt.detail.value!=="Off",d.setValue(D,{value:tt.target.checked})}};this._dispatchEventFromSandbox(Y,z)}),this._setEventListeners(E,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],z=>z.target.checked)),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class l extends u{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const d=this.annotationStorage,y=this.data,D=y.id;let F=d.getValue(D,{value:y.fieldValue===y.buttonValue}).value;typeof F=="string"&&(F=F!==y.buttonValue,d.setValue(D,{value:F}));const E=document.createElement("input");if(v.add(E),E.setAttribute("data-element-id",D),E.disabled=y.readOnly,this._setRequired(E,this.data.required),E.type="radio",E.name=y.fieldName,F&&E.setAttribute("checked",!0),E.tabIndex=O,E.addEventListener("change",z=>{const{name:Y,checked:tt}=z.target;for(const ft of this._getElementsByName(Y,D))d.setValue(ft.id,{value:!1});d.setValue(D,{value:tt})}),E.addEventListener("resetform",z=>{const Y=y.defaultFieldValue;z.target.checked=Y!=null&&Y===y.buttonValue}),this.enableScripting&&this.hasJSActions){const z=y.buttonValue;E.addEventListener("updatefromsandbox",Y=>{const tt={value:ft=>{const B=z===ft.detail.value;for(const Q of this._getElementsByName(ft.target.name)){const X=B&&Q.id===D;Q.domElement&&(Q.domElement.checked=X),d.setValue(Q.id,{value:X})}}};this._dispatchEventFromSandbox(tt,Y)}),this._setEventListeners(E,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.checked)}return this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class h extends g{constructor(d){super(d,{ignoreBorder:d.data.hasAppearance})}render(){const d=super.render();d.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(d.title=this.data.alternativeText);const y=d.lastChild;return this.enableScripting&&this.hasJSActions&&y&&(this._setDefaultPropertiesFromJS(y),y.addEventListener("updatefromsandbox",D=>{this._dispatchEventFromSandbox({},D)})),d}}class r extends u{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const d=this.annotationStorage,y=this.data.id,D=d.getValue(y,{value:this.data.fieldValue}),F=document.createElement("select");v.add(F),F.setAttribute("data-element-id",y),F.disabled=this.data.readOnly,this._setRequired(F,this.data.required),F.name=this.data.fieldName,F.tabIndex=O;let E=this.data.combo&&this.data.options.length>0;this.data.combo||(F.size=this.data.options.length,this.data.multiSelect&&(F.multiple=!0)),F.addEventListener("resetform",B=>{const Q=this.data.defaultFieldValue;for(const X of F.options)X.selected=X.value===Q});for(const B of this.data.options){const Q=document.createElement("option");Q.textContent=B.displayValue,Q.value=B.exportValue,D.value.includes(B.exportValue)&&(Q.setAttribute("selected",!0),E=!1),F.append(Q)}let z=null;if(E){const B=document.createElement("option");B.value=" ",B.setAttribute("hidden",!0),B.setAttribute("selected",!0),F.prepend(B),z=()=>{B.remove(),F.removeEventListener("input",z),z=null},F.addEventListener("input",z)}const Y=B=>{const Q=B?"value":"textContent",{options:X,multiple:vt}=F;return vt?Array.prototype.filter.call(X,Pt=>Pt.selected).map(Pt=>Pt[Q]):X.selectedIndex===-1?null:X[X.selectedIndex][Q]};let tt=Y(!1);const ft=B=>{const Q=B.target.options;return Array.prototype.map.call(Q,X=>({displayValue:X.textContent,exportValue:X.value}))};return this.enableScripting&&this.hasJSActions?(F.addEventListener("updatefromsandbox",B=>{const Q={value(X){z==null||z();const vt=X.detail.value,Pt=new Set(Array.isArray(vt)?vt:[vt]);for(const Dt of F.options)Dt.selected=Pt.has(Dt.value);d.setValue(y,{value:Y(!0)}),tt=Y(!1)},multipleSelection(X){F.multiple=!0},remove(X){const vt=F.options,Pt=X.detail.remove;vt[Pt].selected=!1,F.remove(Pt),vt.length>0&&Array.prototype.findIndex.call(vt,Ft=>Ft.selected)===-1&&(vt[0].selected=!0),d.setValue(y,{value:Y(!0),items:ft(X)}),tt=Y(!1)},clear(X){for(;F.length!==0;)F.remove(0);d.setValue(y,{value:null,items:[]}),tt=Y(!1)},insert(X){const{index:vt,displayValue:Pt,exportValue:Dt}=X.detail.insert,Ft=F.children[vt],Ht=document.createElement("option");Ht.textContent=Pt,Ht.value=Dt,Ft?Ft.before(Ht):F.append(Ht),d.setValue(y,{value:Y(!0),items:ft(X)}),tt=Y(!1)},items(X){const{items:vt}=X.detail;for(;F.length!==0;)F.remove(0);for(const Pt of vt){const{displayValue:Dt,exportValue:Ft}=Pt,Ht=document.createElement("option");Ht.textContent=Dt,Ht.value=Ft,F.append(Ht)}F.options.length>0&&(F.options[0].selected=!0),d.setValue(y,{value:Y(!0),items:ft(X)}),tt=Y(!1)},indices(X){const vt=new Set(X.detail.indices);for(const Pt of X.target.options)Pt.selected=vt.has(Pt.index);d.setValue(y,{value:Y(!0)}),tt=Y(!1)},editable(X){X.target.disabled=!X.detail.editable}};this._dispatchEventFromSandbox(Q,B)}),F.addEventListener("input",B=>{var X;const Q=Y(!0);d.setValue(y,{value:Q}),B.preventDefault(),(X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:tt,changeEx:Q,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(F,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],B=>B.target.value)):F.addEventListener("input",function(B){d.setValue(y,{value:Y(!0)})}),this.data.combo&&this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}const W=class W extends C{constructor(d){var F,E,z;const{data:y}=d,D=!W.IGNORE_TYPES.has(y.parentType)&&!!((F=y.titleObj)!=null&&F.str||(E=y.contentsObj)!=null&&E.str||(z=y.richText)!=null&&z.str);super(d,{isRenderable:D})}render(){this.container.className="popupAnnotation";const d=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(d.length===0)return this.container;const y=new _({container:this.container,trigger:Array.from(d),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),D=this.page,F=i.Util.normalizeRect([this.data.parentRect[0],D.view[3]-this.data.parentRect[1]+D.view[1],this.data.parentRect[2],D.view[3]-this.data.parentRect[3]+D.view[1]]),E=F[0]+this.data.parentRect[2]-this.data.parentRect[0],z=F[1],{pageWidth:Y,pageHeight:tt,pageX:ft,pageY:B}=this.viewport.rawDims;return this.container.style.left=`${100*(E-ft)/Y}%`,this.container.style.top=`${100*(z-B)/tt}%`,this.container.append(y.render()),this.container}};we(W,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let s=W;class _{constructor(d){this.container=d.container,this.trigger=d.trigger,this.color=d.color,this.titleObj=d.titleObj,this.modificationDate=d.modificationDate,this.contentsObj=d.contentsObj,this.richText=d.richText,this.hideWrapper=d.hideWrapper||!1,this.pinned=!1}render(){var Y,tt;const y=document.createElement("div");y.className="popupWrapper",this.hideElement=this.hideWrapper?y:this.container,this.hideElement.hidden=!0;const D=document.createElement("div");D.className="popup";const F=this.color;if(F){const ft=.7*(255-F[0])+F[0],B=.7*(255-F[1])+F[1],Q=.7*(255-F[2])+F[2];D.style.backgroundColor=i.Util.makeHexColor(ft|0,B|0,Q|0)}const E=document.createElement("h1");E.dir=this.titleObj.dir,E.textContent=this.titleObj.str,D.append(E);const z=o.PDFDateString.toDateObject(this.modificationDate);if(z){const ft=document.createElement("span");ft.className="popupDate",ft.textContent="{{date}}, {{time}}",ft.dataset.l10nId="annotation_date_string",ft.dataset.l10nArgs=JSON.stringify({date:z.toLocaleDateString(),time:z.toLocaleTimeString()}),D.append(ft)}if((Y=this.richText)!=null&&Y.str&&(!((tt=this.contentsObj)!=null&&tt.str)||this.contentsObj.str===this.richText.str))U.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:D}),D.lastChild.className="richText popupContent";else{const ft=this._formatContents(this.contentsObj);D.append(ft)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ft of this.trigger)ft.addEventListener("click",this._toggle.bind(this)),ft.addEventListener("mouseover",this._show.bind(this,!1)),ft.addEventListener("mouseout",this._hide.bind(this,!1));return D.addEventListener("click",this._hide.bind(this,!0)),y.append(D),y}_formatContents({str:d,dir:y}){const D=document.createElement("p");D.className="popupContent",D.dir=y;const F=d.split(/(?:\r\n?|\n)/);for(let E=0,z=F.length;E<z;++E){const Y=F[E];D.append(document.createTextNode(Y)),E<z-1&&D.append(document.createElement("br"))}return D}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(d=!1){d&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(d=!0){d&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class a extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0}),this.textContent=d.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const d=document.createElement("div");d.className="annotationTextContent",d.setAttribute("role","comment");for(const y of this.textContent){const D=document.createElement("span");D.textContent=y,d.append(D)}this.container.append(d)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class T extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const d=this.data,{width:y,height:D}=L(d.rect),F=this.svgFactory.create(y,D,!0),E=this.svgFactory.createElement("svg:line");return E.setAttribute("x1",d.rect[2]-d.lineCoordinates[0]),E.setAttribute("y1",d.rect[3]-d.lineCoordinates[1]),E.setAttribute("x2",d.rect[2]-d.lineCoordinates[2]),E.setAttribute("y2",d.rect[3]-d.lineCoordinates[3]),E.setAttribute("stroke-width",d.borderStyle.width||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),F.append(E),this.container.append(F),this._createPopup(E,d),this.container}}class I extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const d=this.data,{width:y,height:D}=L(d.rect),F=this.svgFactory.create(y,D,!0),E=d.borderStyle.width,z=this.svgFactory.createElement("svg:rect");return z.setAttribute("x",E/2),z.setAttribute("y",E/2),z.setAttribute("width",y-E),z.setAttribute("height",D-E),z.setAttribute("stroke-width",E||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),F.append(z),this.container.append(F),this._createPopup(z,d),this.container}}class J extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const d=this.data,{width:y,height:D}=L(d.rect),F=this.svgFactory.create(y,D,!0),E=d.borderStyle.width,z=this.svgFactory.createElement("svg:ellipse");return z.setAttribute("cx",y/2),z.setAttribute("cy",D/2),z.setAttribute("rx",y/2-E/2),z.setAttribute("ry",D/2-E/2),z.setAttribute("stroke-width",E||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),F.append(z),this.container.append(F),this._createPopup(z,d),this.container}}class ht extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:y,height:D}=L(d.rect),F=this.svgFactory.create(y,D,!0);let E=[];for(const Y of d.vertices){const tt=Y.x-d.rect[0],ft=d.rect[3]-Y.y;E.push(tt+","+ft)}E=E.join(" ");const z=this.svgFactory.createElement(this.svgElementName);return z.setAttribute("points",E),z.setAttribute("stroke-width",d.borderStyle.width||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),F.append(z),this.container.append(F),this._createPopup(z,d),this.container}}class wt extends ht{constructor(d){super(d),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pt extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class mt extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:y,height:D}=L(d.rect),F=this.svgFactory.create(y,D,!0);for(const E of d.inkLists){let z=[];for(const tt of E){const ft=tt.x-d.rect[0],B=d.rect[3]-tt.y;z.push(`${ft},${B}`)}z=z.join(" ");const Y=this.svgFactory.createElement(this.svgElementName);Y.setAttribute("points",z),Y.setAttribute("stroke-width",d.borderStyle.width||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),this._createPopup(Y,d),F.append(Y)}return this.container.append(F),this.container}}class ut extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Z extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class nt extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class gt extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class St extends C{constructor(d){var D,F,E;const y=!!(d.data.hasPopup||(D=d.data.titleObj)!=null&&D.str||(F=d.data.contentsObj)!=null&&F.str||(E=d.data.richText)!=null&&E.str);super(d,{isRenderable:y,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class V extends C{constructor(d){var F;super(d,{isRenderable:!0});const{filename:y,content:D}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(y,!0),this.content=D,(F=this.linkService.eventBus)==null||F.dispatch("fileattachmentannotation",{source:this,filename:y,content:D})}render(){var y,D;this.container.className="fileAttachmentAnnotation";let d;return this.data.hasAppearance?d=document.createElement("div"):(d=document.createElement("img"),d.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),d.className="popupTriggerArea",d.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((y=this.data.titleObj)!=null&&y.str||(D=this.data.contentsObj)!=null&&D.str||this.data.richText)&&this._createPopup(d,this.data),this.container.append(d),this.container}_download(){var d;(d=this.downloadManager)==null||d.openOrDownloadData(this.container,this.content,this.filename)}}const bt=class bt{static render(d){var tt,ft;const{annotations:y,div:D,viewport:F,accessibilityManager:E}=d;(0,o.setLayerDimensions)(D,F);const z={data:null,layer:D,page:d.page,viewport:F,linkService:d.linkService,downloadManager:d.downloadManager,imageResourcesPath:d.imageResourcesPath||"",renderForms:d.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:d.annotationStorage||new n.AnnotationStorage,enableScripting:d.enableScripting===!0,hasJSActions:d.hasJSActions,fieldObjects:d.fieldObjects};let Y=0;for(const B of y){if(B.annotationType!==i.AnnotationType.POPUP){const{width:vt,height:Pt}=L(B.rect);if(vt<=0||Pt<=0)continue}z.data=B;const Q=k.create(z);if(!Q.isRenderable)continue;const X=Q.render();if(B.hidden&&(X.style.visibility="hidden"),Array.isArray(X))for(const vt of X)vt.style.zIndex=Y++,Et(tt=bt,j,fr).call(tt,vt,B.id,D,E);else X.style.zIndex=Y++,Q instanceof s?D.prepend(X):Et(ft=bt,j,fr).call(ft,X,B.id,D,E)}Et(this,j,pr).call(this,D,d.annotationCanvasMap)}static update(d){const{annotationCanvasMap:y,div:D,viewport:F}=d;(0,o.setLayerDimensions)(D,{rotation:F.rotation}),Et(this,j,pr).call(this,D,y),D.hidden=!1}};j=new WeakSet,fr=function(d,y,D,F){const E=d.firstChild||d;E.id=`${o.AnnotationPrefix}${y}`,D.append(d),F==null||F.moveElementInDOM(D,d,E,!1)},pr=function(d,y){if(y){for(const[D,F]of y){const E=d.querySelector(`[data-annotation-id="${D}"]`);if(!E)continue;const{firstChild:z}=E;z?z.nodeName==="CANVAS"?z.replaceWith(F):z.before(F):E.append(F)}y.clear()}},Rt(bt,j);let S=bt;e.AnnotationLayer=S},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function f(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}class i{static CMYK_G([n,R,U,O]){return["G",1-Math.min(1,.3*n+.59*U+.11*R+O)]}static G_CMYK([n]){return["CMYK",0,0,0,1-n]}static G_RGB([n]){return["RGB",n,n,n]}static G_HTML([n]){const R=f(n);return`#${R}${R}${R}`}static RGB_G([n,R,U]){return["G",.3*n+.59*R+.11*U]}static RGB_HTML([n,R,U]){const O=f(n),P=f(R),v=f(U);return`#${O}${P}${v}`}static T_HTML(){return"#00000000"}static CMYK_RGB([n,R,U,O]){return["RGB",1-Math.min(1,n+O),1-Math.min(1,U+O),1-Math.min(1,R+O)]}static CMYK_HTML(n){const R=this.CMYK_RGB(n).slice(1);return this.RGB_HTML(R)}static RGB_CMYK([n,R,U]){const O=1-n,P=1-R,v=1-U,L=Math.min(O,P,v);return["CMYK",O,P,v,L]}}e.ColorConverters=i},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var i=f(19);class o{static setupStorage(R,U,O,P,v){const L=P.getValue(U,{value:null});switch(O.name){case"textarea":if(L.value!==null&&(R.textContent=L.value),v==="print")break;R.addEventListener("input",k=>{P.setValue(U,{value:k.target.value})});break;case"input":if(O.attributes.type==="radio"||O.attributes.type==="checkbox"){if(L.value===O.attributes.xfaOn?R.setAttribute("checked",!0):L.value===O.attributes.xfaOff&&R.removeAttribute("checked"),v==="print")break;R.addEventListener("change",k=>{P.setValue(U,{value:k.target.checked?k.target.getAttribute("xfaOn"):k.target.getAttribute("xfaOff")})})}else{if(L.value!==null&&R.setAttribute("value",L.value),v==="print")break;R.addEventListener("input",k=>{P.setValue(U,{value:k.target.value})})}break;case"select":if(L.value!==null)for(const k of O.children)k.attributes.value===L.value&&(k.attributes.selected=!0);R.addEventListener("input",k=>{const C=k.target.options,g=C.selectedIndex===-1?"":C[C.selectedIndex].value;P.setValue(U,{value:g})});break}}static setAttributes({html:R,element:U,storage:O=null,intent:P,linkService:v}){const{attributes:L}=U,k=R instanceof HTMLAnchorElement;L.type==="radio"&&(L.name=`${L.name}-${P}`);for(const[C,g]of Object.entries(L))if(g!=null)switch(C){case"class":g.length&&R.setAttribute(C,g.join(" "));break;case"dataId":break;case"id":R.setAttribute("data-element-id",g);break;case"style":Object.assign(R.style,g);break;case"textContent":R.textContent=g;break;default:(!k||C!=="href"&&C!=="newWindow")&&R.setAttribute(C,g)}k&&v.addLinkAttributes(R,L.href,L.newWindow),O&&L.dataId&&this.setupStorage(R,L.dataId,U,O)}static render(R){var b;const U=R.annotationStorage,O=R.linkService,P=R.xfaHtml,v=R.intent||"display",L=document.createElement(P.name);P.attributes&&this.setAttributes({html:L,element:P,intent:v,linkService:O});const k=[[P,-1,L]],C=R.div;if(C.append(L),R.viewport){const u=`matrix(${R.viewport.transform.join(",")})`;C.style.transform=u}v!=="richText"&&C.setAttribute("class","xfaLayer xfaFont");const g=[];for(;k.length>0;){const[u,m,A]=k.at(-1);if(m+1===u.children.length){k.pop();continue}const l=u.children[++k.at(-1)[1]];if(l===null)continue;const{name:h}=l;if(h==="#text"){const s=document.createTextNode(l.value);g.push(s),A.append(s);continue}let r;if((b=l==null?void 0:l.attributes)!=null&&b.xmlns?r=document.createElementNS(l.attributes.xmlns,h):r=document.createElement(h),A.append(r),l.attributes&&this.setAttributes({html:r,element:l,storage:U,intent:v,linkService:O}),l.children&&l.children.length>0)k.push([l,-1,r]);else if(l.value){const s=document.createTextNode(l.value);i.XfaText.shouldBuildText(h)&&g.push(s),r.append(s)}}for(const u of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:g}}static update(R){const U=`matrix(${R.viewport.transform.join(",")})`;R.div.style.transform=U,R.div.hidden=!1}}e.XfaLayer=o},(t,e,f)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var i=f(6),o=f(1),n=f(10);let R=class{constructor(){(0,o.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=R;{let b=function(r){let s=[];const _=[];for(const a of r){if(a.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),_.push(s),s=s.at(-1).items;continue}a.fn==="restore"?s=_.pop():s.push(a)}return s},u=function(r){if(Number.isInteger(r))return r.toString();const s=r.toFixed(10);let _=s.length-1;if(s[_]!=="0")return s;do _--;while(s[_]==="0");return s.substring(0,s[_]==="."?_:_+1)},m=function(r){if(r[4]===0&&r[5]===0){if(r[1]===0&&r[2]===0)return r[0]===1&&r[3]===1?"":`scale(${u(r[0])} ${u(r[3])})`;if(r[0]===r[3]&&r[1]===-r[2]){const s=Math.acos(r[0])*180/Math.PI;return`rotate(${u(s)})`}}else if(r[0]===1&&r[1]===0&&r[2]===0&&r[3]===1)return`translate(${u(r[4])} ${u(r[5])})`;return`matrix(${u(r[0])} ${u(r[1])} ${u(r[2])} ${u(r[3])} ${u(r[4])} ${u(r[5])})`};const U={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},O="http://www.w3.org/XML/1998/namespace",P="http://www.w3.org/1999/xlink",v=["butt","round","square"],L=["miter","round","bevel"],k=function(r,s="",_=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!_)return URL.createObjectURL(new Blob([r],{type:s}));const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let T=`data:${s};base64,`;for(let I=0,J=r.length;I<J;I+=3){const ht=r[I]&255,wt=r[I+1]&255,pt=r[I+2]&255,mt=ht>>2,ut=(ht&3)<<4|wt>>4,Z=I+1<J?(wt&15)<<2|pt>>6:64,nt=I+2<J?pt&63:64;T+=a[mt]+a[ut]+a[Z]+a[nt]}return T},C=function(){const r=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,_=new Int32Array(256);for(let pt=0;pt<256;pt++){let mt=pt;for(let ut=0;ut<8;ut++)mt&1?mt=3988292384^mt>>1&2147483647:mt=mt>>1&2147483647;_[pt]=mt}function a(pt,mt,ut){let Z=-1;for(let nt=mt;nt<ut;nt++){const gt=(Z^pt[nt])&255,St=_[gt];Z=Z>>>8^St}return Z^-1}function T(pt,mt,ut,Z){let nt=Z;const gt=mt.length;ut[nt]=gt>>24&255,ut[nt+1]=gt>>16&255,ut[nt+2]=gt>>8&255,ut[nt+3]=gt&255,nt+=4,ut[nt]=pt.charCodeAt(0)&255,ut[nt+1]=pt.charCodeAt(1)&255,ut[nt+2]=pt.charCodeAt(2)&255,ut[nt+3]=pt.charCodeAt(3)&255,nt+=4,ut.set(mt,nt),nt+=mt.length;const St=a(ut,Z+4,nt);ut[nt]=St>>24&255,ut[nt+1]=St>>16&255,ut[nt+2]=St>>8&255,ut[nt+3]=St&255}function I(pt,mt,ut){let Z=1,nt=0;for(let gt=mt;gt<ut;++gt)Z=(Z+(pt[gt]&255))%65521,nt=(nt+Z)%65521;return nt<<16|Z}function J(pt){if(!n.isNodeJS)return ht(pt);try{let mt;parseInt(process.versions.node)>=8?mt=pt:mt=Buffer.from(pt);const ut=require$$5.deflateSync(mt,{level:9});return ut instanceof Uint8Array?ut:new Uint8Array(ut)}catch(mt){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+mt)}return ht(pt)}function ht(pt){let mt=pt.length;const ut=65535,Z=Math.ceil(mt/ut),nt=new Uint8Array(2+mt+Z*5+4);let gt=0;nt[gt++]=120,nt[gt++]=156;let St=0;for(;mt>ut;)nt[gt++]=0,nt[gt++]=255,nt[gt++]=255,nt[gt++]=0,nt[gt++]=0,nt.set(pt.subarray(St,St+ut),gt),gt+=ut,St+=ut,mt-=ut;nt[gt++]=1,nt[gt++]=mt&255,nt[gt++]=mt>>8&255,nt[gt++]=~mt&65535&255,nt[gt++]=(~mt&65535)>>8&255,nt.set(pt.subarray(St),gt),gt+=pt.length-St;const V=I(pt,0,pt.length);return nt[gt++]=V>>24&255,nt[gt++]=V>>16&255,nt[gt++]=V>>8&255,nt[gt++]=V&255,nt}function wt(pt,mt,ut,Z){const nt=pt.width,gt=pt.height;let St,V,S;const p=pt.data;switch(mt){case o.ImageKind.GRAYSCALE_1BPP:V=0,St=1,S=nt+7>>3;break;case o.ImageKind.RGB_24BPP:V=2,St=8,S=nt*3;break;case o.ImageKind.RGBA_32BPP:V=6,St=8,S=nt*4;break;default:throw new Error("invalid format")}const x=new Uint8Array((1+S)*gt);let H=0,W=0;for(let d=0;d<gt;++d)x[H++]=0,x.set(p.subarray(W,W+S),H),W+=S,H+=S;if(mt===o.ImageKind.GRAYSCALE_1BPP&&Z){H=0;for(let d=0;d<gt;d++){H++;for(let y=0;y<S;y++)x[H++]^=255}}const j=new Uint8Array([nt>>24&255,nt>>16&255,nt>>8&255,nt&255,gt>>24&255,gt>>16&255,gt>>8&255,gt&255,St,V,0,0,0]),et=J(x),dt=r.length+s*3+j.length+et.length,bt=new Uint8Array(dt);let lt=0;return bt.set(r,lt),lt+=r.length,T("IHDR",j,bt,lt),lt+=s+j.length,T("IDATA",et,bt,lt),lt+=s+et.length,T("IEND",new Uint8Array(0),bt,lt),k(bt,"image/png",ut)}return function(mt,ut,Z){const nt=mt.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:mt.kind;return wt(mt,nt,ut,Z)}}();class g{constructor(){this.fontSizeScale=1,this.fontWeight=U.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=U.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,_){this.x=s,this.y=_}}let A=0,l=0,h=0;e.SVGGraphics=R=class{constructor(r,s,_=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new g,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=r,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!_,this._operatorIdMapping=[];for(const a in o.OPS)this._operatorIdMapping[o.OPS[a]]=a}getObject(r,s=null){return typeof r=="string"?r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r):s}save(){this.transformStack.push(this.transformMatrix);const r=this.current;this.extraStack.push(r),this.current=r.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(r){this.save(),this.executeOpTree(r),this.restore()}loadDependencies(r){const s=r.fnArray,_=r.argsArray;for(let a=0,T=s.length;a<T;a++)if(s[a]===o.OPS.dependency)for(const I of _[a]){const J=I.startsWith("g_")?this.commonObjs:this.objs,ht=new Promise(wt=>{J.get(I,wt)});this.current.dependencies.push(ht)}return Promise.all(this.current.dependencies)}transform(r,s,_,a,T,I){const J=[r,s,_,a,T,I];this.transformMatrix=o.Util.transform(this.transformMatrix,J),this.tgrp=null}getSVG(r,s){this.viewport=s;const _=this._initialize(s);return this.loadDependencies(r).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(r)),_))}convertOpList(r){const s=this._operatorIdMapping,_=r.argsArray,a=r.fnArray,T=[];for(let I=0,J=a.length;I<J;I++){const ht=a[I];T.push({fnId:ht,fn:s[ht],args:_[I]})}return b(T)}executeOpTree(r){for(const s of r){const _=s.fn,a=s.fnId,T=s.args;switch(a|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(T);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(T[0],T[1]);break;case o.OPS.setFont:this.setFont(T);break;case o.OPS.showText:this.showText(T[0]);break;case o.OPS.showSpacedText:this.showText(T[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(T[0],T[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(T[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(T[0]);break;case o.OPS.setHScale:this.setHScale(T[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(T[0],T[1],T[2],T[3],T[4],T[5]);break;case o.OPS.setTextRise:this.setTextRise(T[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(T[0]);break;case o.OPS.setLineWidth:this.setLineWidth(T[0]);break;case o.OPS.setLineJoin:this.setLineJoin(T[0]);break;case o.OPS.setLineCap:this.setLineCap(T[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(T[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(T[0],T[1],T[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(T[0],T[1],T[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(T);break;case o.OPS.setFillColorN:this.setFillColorN(T);break;case o.OPS.shadingFill:this.shadingFill(T[0]);break;case o.OPS.setDash:this.setDash(T[0],T[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(T[0]);break;case o.OPS.setFlatness:this.setFlatness(T[0]);break;case o.OPS.setGState:this.setGState(T[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(T[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(T[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(T[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(T[0],T[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(T[0],T[1],T[2],T[3],T[4],T[5]);break;case o.OPS.constructPath:this.constructPath(T[0],T[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,o.warn)(`Unimplemented operator ${_}`);break}}}setWordSpacing(r){this.current.wordSpacing=r}setCharSpacing(r){this.current.charSpacing=r}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(r,s,_,a,T,I){const J=this.current;J.textMatrix=J.lineMatrix=[r,s,_,a,T,I],J.textMatrixScale=Math.hypot(r,s),J.x=J.lineX=0,J.y=J.lineY=0,J.xcoords=[],J.ycoords=[],J.tspan=this.svgFactory.createElement("svg:tspan"),J.tspan.setAttributeNS(null,"font-family",J.fontFamily),J.tspan.setAttributeNS(null,"font-size",`${u(J.fontSize)}px`),J.tspan.setAttributeNS(null,"y",u(-J.y)),J.txtElement=this.svgFactory.createElement("svg:text"),J.txtElement.append(J.tspan)}beginText(){const r=this.current;r.x=r.lineX=0,r.y=r.lineY=0,r.textMatrix=o.IDENTITY_MATRIX,r.lineMatrix=o.IDENTITY_MATRIX,r.textMatrixScale=1,r.tspan=this.svgFactory.createElement("svg:tspan"),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtgrp=this.svgFactory.createElement("svg:g"),r.xcoords=[],r.ycoords=[]}moveText(r,s){const _=this.current;_.x=_.lineX+=r,_.y=_.lineY+=s,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size",`${u(_.fontSize)}px`),_.tspan.setAttributeNS(null,"y",u(-_.y))}showText(r){const s=this.current,_=s.font,a=s.fontSize;if(a===0)return;const T=s.fontSizeScale,I=s.charSpacing,J=s.wordSpacing,ht=s.fontDirection,wt=s.textHScale*ht,pt=_.vertical,mt=pt?1:-1,ut=_.defaultVMetrics,Z=a*s.fontMatrix[0];let nt=0;for(const V of r){if(V===null){nt+=ht*J;continue}else if(typeof V=="number"){nt+=mt*V*a/1e3;continue}const S=(V.isSpace?J:0)+I,p=V.fontChar;let x,H,W=V.width;if(pt){let et;const dt=V.vmetric||ut;et=V.vmetric?dt[1]:W*.5,et=-et*Z;const bt=dt[2]*Z;W=dt?-dt[0]:W,x=et/T,H=(nt+bt)/T}else x=nt/T,H=0;(V.isInFont||_.missingFile)&&(s.xcoords.push(s.x+x),pt&&s.ycoords.push(-s.y+H),s.tspan.textContent+=p);let j;pt?j=W*Z-S*ht:j=W*Z+S*ht,nt+=j}s.tspan.setAttributeNS(null,"x",s.xcoords.map(u).join(" ")),pt?s.tspan.setAttributeNS(null,"y",s.ycoords.map(u).join(" ")):s.tspan.setAttributeNS(null,"y",u(-s.y)),pt?s.y-=nt:s.x+=nt*wt,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${u(s.fontSize)}px`),s.fontStyle!==U.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==U.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const gt=s.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(gt===o.TextRenderingMode.FILL||gt===o.TextRenderingMode.FILL_STROKE?(s.fillColor!==U.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),gt===o.TextRenderingMode.STROKE||gt===o.TextRenderingMode.FILL_STROKE){const V=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,V)}let St=s.textMatrix;s.textRise!==0&&(St=St.slice(),St[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${m(St)} scale(${u(wt)}, -1)`),s.txtElement.setAttributeNS(O,"xml:space","preserve"),s.txtElement.append(s.tspan),s.txtgrp.append(s.txtElement),this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(r,s){this.setLeading(-s),this.moveText(r,s)}addFontStyle(r){if(!r.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const s=k(r.data,r.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${r.loadedName}"; src: url(${s}); }
`}setFont(r){const s=this.current,_=this.commonObjs.get(r[0]);let a=r[1];s.font=_,this.embedFonts&&!_.missingFile&&!this.embeddedFonts[_.loadedName]&&(this.addFontStyle(_),this.embeddedFonts[_.loadedName]=_),s.fontMatrix=_.fontMatrix||o.FONT_IDENTITY_MATRIX;let T="normal";_.black?T="900":_.bold&&(T="bold");const I=_.italic?"italic":"normal";a<0?(a=-a,s.fontDirection=-1):s.fontDirection=1,s.fontSize=a,s.fontFamily=_.loadedName,s.fontWeight=T,s.fontStyle=I,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",u(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var s;const r=this.current;r.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((s=r.txtElement)!=null&&s.hasChildNodes())&&(r.element=r.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(r){r>0&&(this.current.lineWidth=r)}setLineCap(r){this.current.lineCap=v[r]}setLineJoin(r){this.current.lineJoin=L[r]}setMiterLimit(r){this.current.miterLimit=r}setStrokeAlpha(r){this.current.strokeAlpha=r}setStrokeRGBColor(r,s,_){this.current.strokeColor=o.Util.makeHexColor(r,s,_)}setFillAlpha(r){this.current.fillAlpha=r}setFillRGBColor(r,s,_){this.current.fillColor=o.Util.makeHexColor(r,s,_),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(r){this.current.strokeColor=this._makeColorN_Pattern(r)}setFillColorN(r){this.current.fillColor=this._makeColorN_Pattern(r)}shadingFill(r){const s=this.viewport.width,_=this.viewport.height,a=o.Util.inverseTransform(this.transformMatrix),T=o.Util.applyTransform([0,0],a),I=o.Util.applyTransform([0,_],a),J=o.Util.applyTransform([s,0],a),ht=o.Util.applyTransform([s,_],a),wt=Math.min(T[0],I[0],J[0],ht[0]),pt=Math.min(T[1],I[1],J[1],ht[1]),mt=Math.max(T[0],I[0],J[0],ht[0]),ut=Math.max(T[1],I[1],J[1],ht[1]),Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x",wt),Z.setAttributeNS(null,"y",pt),Z.setAttributeNS(null,"width",mt-wt),Z.setAttributeNS(null,"height",ut-pt),Z.setAttributeNS(null,"fill",this._makeShadingPattern(r)),this.current.fillAlpha<1&&Z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Z)}_makeColorN_Pattern(r){return r[0]==="TilingPattern"?this._makeTilingPattern(r):this._makeShadingPattern(r)}_makeTilingPattern(r){const s=r[1],_=r[2],a=r[3]||o.IDENTITY_MATRIX,[T,I,J,ht]=r[4],wt=r[5],pt=r[6],mt=r[7],ut=`shading${h++}`,[Z,nt,gt,St]=o.Util.normalizeRect([...o.Util.applyTransform([T,I],a),...o.Util.applyTransform([J,ht],a)]),[V,S]=o.Util.singularValueDecompose2dScale(a),p=wt*V,x=pt*S,H=this.svgFactory.createElement("svg:pattern");H.setAttributeNS(null,"id",ut),H.setAttributeNS(null,"patternUnits","userSpaceOnUse"),H.setAttributeNS(null,"width",p),H.setAttributeNS(null,"height",x),H.setAttributeNS(null,"x",`${Z}`),H.setAttributeNS(null,"y",`${nt}`);const W=this.svg,j=this.transformMatrix,et=this.current.fillColor,dt=this.current.strokeColor,bt=this.svgFactory.create(gt-Z,St-nt);if(this.svg=bt,this.transformMatrix=a,mt===2){const lt=o.Util.makeHexColor(...s);this.current.fillColor=lt,this.current.strokeColor=lt}return this.executeOpTree(this.convertOpList(_)),this.svg=W,this.transformMatrix=j,this.current.fillColor=et,this.current.strokeColor=dt,H.append(bt.childNodes[0]),this.defs.append(H),`url(#${ut})`}_makeShadingPattern(r){switch(typeof r=="string"&&(r=this.objs.get(r)),r[0]){case"RadialAxial":const s=`shading${h++}`,_=r[3];let a;switch(r[1]){case"axial":const T=r[4],I=r[5];a=this.svgFactory.createElement("svg:linearGradient"),a.setAttributeNS(null,"id",s),a.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),a.setAttributeNS(null,"x1",T[0]),a.setAttributeNS(null,"y1",T[1]),a.setAttributeNS(null,"x2",I[0]),a.setAttributeNS(null,"y2",I[1]);break;case"radial":const J=r[4],ht=r[5],wt=r[6],pt=r[7];a=this.svgFactory.createElement("svg:radialGradient"),a.setAttributeNS(null,"id",s),a.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),a.setAttributeNS(null,"cx",ht[0]),a.setAttributeNS(null,"cy",ht[1]),a.setAttributeNS(null,"r",pt),a.setAttributeNS(null,"fx",J[0]),a.setAttributeNS(null,"fy",J[1]),a.setAttributeNS(null,"fr",wt);break;default:throw new Error(`Unknown RadialAxial type: ${r[1]}`)}for(const T of _){const I=this.svgFactory.createElement("svg:stop");I.setAttributeNS(null,"offset",T[0]),I.setAttributeNS(null,"stop-color",T[1]),a.append(I)}return this.defs.append(a),`url(#${s})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${r[0]}`)}}setDash(r,s){this.current.dashArray=r,this.current.dashPhase=s}constructPath(r,s){const _=this.current;let a=_.x,T=_.y,I=[],J=0;for(const ht of r)switch(ht|0){case o.OPS.rectangle:a=s[J++],T=s[J++];const wt=s[J++],pt=s[J++],mt=a+wt,ut=T+pt;I.push("M",u(a),u(T),"L",u(mt),u(T),"L",u(mt),u(ut),"L",u(a),u(ut),"Z");break;case o.OPS.moveTo:a=s[J++],T=s[J++],I.push("M",u(a),u(T));break;case o.OPS.lineTo:a=s[J++],T=s[J++],I.push("L",u(a),u(T));break;case o.OPS.curveTo:a=s[J+4],T=s[J+5],I.push("C",u(s[J]),u(s[J+1]),u(s[J+2]),u(s[J+3]),u(a),u(T)),J+=6;break;case o.OPS.curveTo2:I.push("C",u(a),u(T),u(s[J]),u(s[J+1]),u(s[J+2]),u(s[J+3])),a=s[J+2],T=s[J+3],J+=4;break;case o.OPS.curveTo3:a=s[J+2],T=s[J+3],I.push("C",u(s[J]),u(s[J+1]),u(a),u(T),u(a),u(T)),J+=4;break;case o.OPS.closePath:I.push("Z");break}I=I.join(" "),_.path&&r.length>0&&r[0]!==o.OPS.rectangle&&r[0]!==o.OPS.moveTo?I=_.path.getAttributeNS(null,"d")+I:(_.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(_.path)),_.path.setAttributeNS(null,"d",I),_.path.setAttributeNS(null,"fill","none"),_.element=_.path,_.setCurrentPoint(a,T)}endPath(){const r=this.current;if(r.path=null,!this.pendingClip)return;if(!r.element){this.pendingClip=null;return}const s=`clippath${A++}`,_=this.svgFactory.createElement("svg:clipPath");_.setAttributeNS(null,"id",s),_.setAttributeNS(null,"transform",m(this.transformMatrix));const a=r.element.cloneNode(!0);if(this.pendingClip==="evenodd"?a.setAttributeNS(null,"clip-rule","evenodd"):a.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,_.append(a),this.defs.append(_),r.activeClipUrl){r.clipGroup=null;for(const T of this.extraStack)T.clipGroup=null;_.setAttributeNS(null,"clip-path",r.activeClipUrl)}r.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(r){this.pendingClip=r}closePath(){const r=this.current;if(r.path){const s=`${r.path.getAttributeNS(null,"d")}Z`;r.path.setAttributeNS(null,"d",s)}}setLeading(r){this.current.leading=-r}setTextRise(r){this.current.textRise=r}setTextRenderingMode(r){this.current.textRenderingMode=r}setHScale(r){this.current.textHScale=r/100}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(const[s,_]of r)switch(s){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_);break;case"CA":this.setStrokeAlpha(_);break;case"ca":this.setFillAlpha(_);break;default:(0,o.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const r=this.current;r.element&&(r.element.setAttributeNS(null,"fill",r.fillColor),r.element.setAttributeNS(null,"fill-opacity",r.fillAlpha),this.endPath())}stroke(){const r=this.current;r.element&&(this._setStrokeAttributes(r.element),r.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(r,s=1){const _=this.current;let a=_.dashArray;s!==1&&a.length>0&&(a=a.map(function(T){return s*T})),r.setAttributeNS(null,"stroke",_.strokeColor),r.setAttributeNS(null,"stroke-opacity",_.strokeAlpha),r.setAttributeNS(null,"stroke-miterlimit",u(_.miterLimit)),r.setAttributeNS(null,"stroke-linecap",_.lineCap),r.setAttributeNS(null,"stroke-linejoin",_.lineJoin),r.setAttributeNS(null,"stroke-width",u(s*_.lineWidth)+"px"),r.setAttributeNS(null,"stroke-dasharray",a.map(u).join(" ")),r.setAttributeNS(null,"stroke-dashoffset",u(s*_.dashPhase)+"px")}eoFill(){var r;(r=this.current.element)==null||r.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var r;(r=this.current.element)==null||r.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","1px"),r.setAttributeNS(null,"height","1px"),r.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(r)}paintImageXObject(r){const s=this.getObject(r);if(!s){(0,o.warn)(`Dependent image with object ID ${r} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(r,s){const _=r.width,a=r.height,T=C(r,this.forceDataSchema,!!s),I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y","0"),I.setAttributeNS(null,"width",u(_)),I.setAttributeNS(null,"height",u(a)),this.current.element=I,this.clip("nonzero");const J=this.svgFactory.createElement("svg:image");J.setAttributeNS(P,"xlink:href",T),J.setAttributeNS(null,"x","0"),J.setAttributeNS(null,"y",u(-a)),J.setAttributeNS(null,"width",u(_)+"px"),J.setAttributeNS(null,"height",u(a)+"px"),J.setAttributeNS(null,"transform",`scale(${u(1/_)} ${u(-1/a)})`),s?s.append(J):this._ensureTransformGroup().append(J)}paintImageMaskXObject(r){const s=this.getObject(r.data,r);if(s.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const _=this.current,a=s.width,T=s.height,I=_.fillColor;_.maskId=`mask${l++}`;const J=this.svgFactory.createElement("svg:mask");J.setAttributeNS(null,"id",_.maskId);const ht=this.svgFactory.createElement("svg:rect");ht.setAttributeNS(null,"x","0"),ht.setAttributeNS(null,"y","0"),ht.setAttributeNS(null,"width",u(a)),ht.setAttributeNS(null,"height",u(T)),ht.setAttributeNS(null,"fill",I),ht.setAttributeNS(null,"mask",`url(#${_.maskId})`),this.defs.append(J),this._ensureTransformGroup().append(ht),this.paintInlineImageXObject(s,J)}paintFormXObjectBegin(r,s){if(Array.isArray(r)&&r.length===6&&this.transform(r[0],r[1],r[2],r[3],r[4],r[5]),s){const _=s[2]-s[0],a=s[3]-s[1],T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x",s[0]),T.setAttributeNS(null,"y",s[1]),T.setAttributeNS(null,"width",u(_)),T.setAttributeNS(null,"height",u(a)),this.current.element=T,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(r){const s=this.svgFactory.create(r.width,r.height),_=this.svgFactory.createElement("svg:defs");s.append(_),this.defs=_;const a=this.svgFactory.createElement("svg:g");return a.setAttributeNS(null,"transform",m(r.transform)),s.append(a),this.svg=a,s}_ensureClipGroup(){if(!this.current.clipGroup){const r=this.svgFactory.createElement("svg:g");r.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(r),this.current.clipGroup=r}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",m(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var f=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](f,f.exports,__w_pdfjs_require__),f.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return n.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return R.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return U.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return O.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return f.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return f.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return P.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return v.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return f.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return f.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return f.version}});var e=__w_pdfjs_require__(1),f=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),o=__w_pdfjs_require__(26),n=__w_pdfjs_require__(27),R=__w_pdfjs_require__(5),U=__w_pdfjs_require__(32),O=__w_pdfjs_require__(14),P=__w_pdfjs_require__(35),v=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;(function(t){var e=reactExports,f=pdfExports;function i(c){var w=Object.create(null);return c&&Object.keys(c).forEach(function(N){if(N!=="default"){var q=Object.getOwnPropertyDescriptor(c,N);Object.defineProperty(w,N,q.get?q:{enumerable:!0,get:function(){return c[N]}})}}),w.default=c,Object.freeze(w)}var o,n=i(e),R=i(f);t.AnnotationType=void 0,(o=t.AnnotationType||(t.AnnotationType={}))[o.Text=1]="Text",o[o.Link=2]="Link",o[o.FreeText=3]="FreeText",o[o.Line=4]="Line",o[o.Square=5]="Square",o[o.Circle=6]="Circle",o[o.Polygon=7]="Polygon",o[o.Polyline=8]="Polyline",o[o.Highlight=9]="Highlight",o[o.Underline=10]="Underline",o[o.Squiggly=11]="Squiggly",o[o.StrikeOut=12]="StrikeOut",o[o.Stamp=13]="Stamp",o[o.Caret=14]="Caret",o[o.Ink=15]="Ink",o[o.Popup=16]="Popup",o[o.FileAttachment=17]="FileAttachment";var U=function(c,w){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,q){N.__proto__=q}||function(N,q){for(var $ in q)Object.prototype.hasOwnProperty.call(q,$)&&(N[$]=q[$])},U(c,w)};function O(c,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function N(){this.constructor=c}U(c,w),c.prototype=w===null?Object.create(w):(N.prototype=w.prototype,new N)}var P,v=function(){return v=Object.assign||function(c){for(var w,N=1,q=arguments.length;N<q;N++)for(var $ in w=arguments[N])Object.prototype.hasOwnProperty.call(w,$)&&(c[$]=w[$]);return c},v.apply(this,arguments)};t.TextDirection=void 0,(P=t.TextDirection||(t.TextDirection={})).RightToLeft="RTL",P.LeftToRight="LTR";var L,k=n.createContext({currentTheme:"light",direction:t.TextDirection.LeftToRight,setCurrentTheme:function(){}}),C=function(c){var w=[];return Object.keys(c).forEach(function(N){N&&c[N]&&w.push(N)}),w.join(" ")},g=typeof window<"u"?n.useLayoutEffect:n.useEffect,b=function(c){var w=n.useRef(null),N=c.once,q=c.threshold,$=c.onVisibilityChanged;return g(function(){var K=w.current;if(K){var ct=new IntersectionObserver(function(rt){rt.forEach(function(G){var st=G.isIntersecting,at=G.intersectionRatio;$({isVisible:st,ratio:at}),st&&N&&(ct.unobserve(K),ct.disconnect())})},{threshold:q||0});return ct.observe(K),function(){ct.unobserve(K),ct.disconnect()}}},[]),w},u=function(c){var w=c.children,N=c.ignoreDirection,q=N!==void 0&&N,$=c.size,K=$===void 0?24:$,ct=n.useContext(k).direction,rt=!q&&ct===t.TextDirection.RightToLeft,G="".concat(K||24,"px");return n.createElement("svg",{"aria-hidden":"true",className:C({"rpv-core__icon":!0,"rpv-core__icon--rtl":rt}),focusable:"false",height:G,viewBox:"0 0 24 24",width:G},w)},m=function(){return n.createElement(u,{size:16},n.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},A=function(c){var w=c.children,N=c.testId,q=c.onClick,$=n.useContext(k).direction===t.TextDirection.RightToLeft,K=N?{"data-testid":N}:{};return n.createElement("button",v({className:C({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":$}),type:"button",onClick:q},K),w)},l=function(c){var w=c.size,N=w===void 0?"4rem":w,q=c.testId,$=n.useState(!1),K=$[0],ct=$[1],rt=q?{"data-testid":q}:{},G=b({onVisibilityChanged:function(st){ct(st.isVisible)}});return n.createElement("div",v({},rt,{className:C({"rpv-core__spinner":!0,"rpv-core__spinner--animating":K}),ref:G,style:{height:N,width:N}}))},h=function(c){var w=c.ariaLabel,N=w===void 0?"":w,q=c.autoFocus,$=q!==void 0&&q,K=c.placeholder,ct=K===void 0?"":K,rt=c.testId,G=c.type,st=G===void 0?"text":G,at=c.value,Ct=at===void 0?"":at,At=c.onChange,yt=c.onKeyDown,xt=yt===void 0?function(){}:yt,Mt=n.useContext(k).direction,Tt=n.useRef(),ne=Mt===t.TextDirection.RightToLeft,zt={ref:Tt,"data-testid":"","aria-label":N,className:C({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":ne}),placeholder:ct,value:Ct,onChange:function(Wt){return At(Wt.target.value)},onKeyDown:xt};return rt&&(zt["data-testid"]=rt),g(function(){if($){var Wt=Tt.current;if(Wt){var $t=window.scrollX,Nt=window.scrollY;Wt.focus(),window.scrollTo($t,Nt)}}},[]),st==="text"?n.createElement("input",v({type:"text"},zt)):n.createElement("input",v({type:"password"},zt))};(function(c){c[c.ExitFullScreen=0]="ExitFullScreen",c[c.FullScreenChange=1]="FullScreenChange",c[c.FullScreenElement=2]="FullScreenElement",c[c.FullScreenEnabled=3]="FullScreenEnabled",c[c.RequestFullScreen=4]="RequestFullScreen"})(L||(L={}));var r,s={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},_={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},a={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},T=typeof window<"u",I=T&&(L.FullScreenEnabled in document&&s||_.FullScreenEnabled in document&&_||a.FullScreenEnabled in document&&a)||s,J=function(){return T&&I.FullScreenEnabled in document&&document[I.FullScreenEnabled]===!0},ht=function(c){return T?c[I.ExitFullScreen]():Promise.resolve({})},wt=function(){return T?document[I.FullScreenElement]:null},pt=function(c,w){var N=n.useRef(),q=function(){N.current&&clearTimeout(N.current)};return n.useEffect(function(){return function(){return q()}},[]),n.useCallback(function(){for(var $=[],K=0;K<arguments.length;K++)$[K]=arguments[K];q(),N.current=setTimeout(function(){c.apply(void 0,$)},w)},[c,w])},mt=function(){var c=n.useRef(!1);return n.useEffect(function(){return c.current=!0,function(){c.current=!1}},[]),c},ut=function(c){var w=n.useRef(c);return n.useEffect(function(){w.current=c},[c]),w.current};(function(c){c.NotRenderedYet="NotRenderedYet",c.Rendering="Rendering",c.Rendered="Rendered"})(r||(r={}));var Z,nt=-9999,gt=function(c){var w=c.doc,N=w.numPages,q=w.loadingTask.docId,$=n.useMemo(function(){return Array(N).fill(null).map(function(rt,G){return{pageIndex:G,renderStatus:r.NotRenderedYet,visibility:nt}})},[q]),K=n.useRef({currentRenderingPage:-1,startRange:0,endRange:N-1,visibilities:$}),ct=function(rt,G){K.current.visibilities[rt].visibility=G};return{getHighestPriorityPage:function(){var rt=K.current.visibilities.slice(K.current.startRange,K.current.endRange+1).filter(function(At){return At.visibility>nt});if(!rt.length)return-1;for(var G=rt[0].pageIndex,st=rt[rt.length-1].pageIndex,at=rt.length,Ct=0;Ct<at;Ct++){if(rt[Ct].renderStatus===r.Rendering)return-1;if(rt[Ct].renderStatus===r.NotRenderedYet)return rt[Ct].pageIndex}return st+1<N&&K.current.visibilities[st+1].renderStatus!==r.Rendered?st+1:G-1>=0&&K.current.visibilities[G-1].renderStatus!==r.Rendered?G-1:-1},isInRange:function(rt){return rt>=K.current.startRange&&rt<=K.current.endRange},markNotRendered:function(){for(var rt=0;rt<N;rt++)K.current.visibilities[rt].renderStatus=r.NotRenderedYet},markRendered:function(rt){K.current.visibilities[rt].renderStatus=r.Rendered},markRendering:function(rt){K.current.currentRenderingPage!==-1&&K.current.currentRenderingPage!==rt&&K.current.visibilities[K.current.currentRenderingPage].renderStatus===r.Rendering&&(K.current.visibilities[K.current.currentRenderingPage].renderStatus=r.NotRenderedYet),K.current.visibilities[rt].renderStatus=r.Rendering,K.current.currentRenderingPage=rt},setOutOfRange:function(rt){ct(rt,nt)},setRange:function(rt,G){K.current.startRange=rt,K.current.endRange=G;for(var st=0;st<N;st++)(st<rt||st>G)&&(K.current.visibilities[st].visibility=nt,K.current.visibilities[st].renderStatus=r.NotRenderedYet)},setVisibility:ct}},St={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},V=n.createContext({l10n:St,setL10n:function(){}}),S=0,p=function(){return S++},x=function(c,w,N){var q=function($){var K=w.current;if(K){var ct=$.target;if(ct instanceof Element&&ct.shadowRoot){var rt=$.composedPath();rt.length>0&&!K.contains(rt[0])&&N()}else K.contains(ct)||N()}};n.useEffect(function(){if(c){var $={capture:!0};return document.addEventListener("click",q,$),function(){document.removeEventListener("click",q,$)}}},[])},H=function(c){var w=function(N){N.key==="Escape"&&c()};n.useEffect(function(){return document.addEventListener("keyup",w),function(){document.removeEventListener("keyup",w)}},[])},W=function(c){var w=c.ariaControlsSuffix,N=c.children,q=c.closeOnClickOutside,$=c.closeOnEscape,K=c.onToggle,ct=n.useRef(),rt=n.useContext(k).direction===t.TextDirection.RightToLeft;return n.useEffect(function(){var G=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=G}},[]),H(function(){ct.current&&$&&K()}),x(q,ct,K),g(function(){var G=ct.current;if(G){var st=.75*document.body.clientHeight;G.getBoundingClientRect().height>=st&&(G.style.overflow="auto",G.style.maxHeight="".concat(st,"px"))}},[]),n.createElement("div",{"aria-modal":"true",className:C({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":rt}),id:"rpv-core__modal-body-".concat(w),ref:ct,role:"dialog",tabIndex:-1},N)},j=function(c){var w=c.children;return n.createElement("div",{className:"rpv-core__modal-overlay"},w)};t.ToggleStatus=void 0,(Z=t.ToggleStatus||(t.ToggleStatus={})).Close="Close",Z.Open="Open",Z.Toggle="Toggle";var et,dt=function(c){var w=n.useState(c),N=w[0],q=w[1];return{opened:N,toggle:function($){switch($){case t.ToggleStatus.Close:q(!1);break;case t.ToggleStatus.Open:q(!0);break;case t.ToggleStatus.Toggle:default:q(function(K){return!K})}}}},bt=function(c){var w=c.content,N=c.isOpened,q=N!==void 0&&N,$=c.target,K=dt(q),ct=K.opened,rt=K.toggle;return n.createElement(n.Fragment,null,$&&$(rt,ct),ct&&w(rt))};t.Position=void 0,(et=t.Position||(t.Position={})).TopLeft="TOP_LEFT",et.TopCenter="TOP_CENTER",et.TopRight="TOP_RIGHT",et.RightTop="RIGHT_TOP",et.RightCenter="RIGHT_CENTER",et.RightBottom="RIGHT_BOTTOM",et.BottomLeft="BOTTOM_LEFT",et.BottomCenter="BOTTOM_CENTER",et.BottomRight="BOTTOM_RIGHT",et.LeftTop="LEFT_TOP",et.LeftCenter="LEFT_CENTER",et.LeftBottom="LEFT_BOTTOM";var lt,d,y,D,F,E,z,Y,tt=function(c,w,N,q,$){g(function(){var K=w.current,ct=c.current,rt=N.current;if(ct&&K&&rt){var G=rt.getBoundingClientRect(),st=function(At,yt,xt,Mt){var Tt=yt.getBoundingClientRect(),ne=At.getBoundingClientRect(),zt=ne.height,Wt=ne.width,$t=0,Nt=0;switch(xt){case t.Position.TopLeft:$t=Tt.top-zt,Nt=Tt.left;break;case t.Position.TopCenter:$t=Tt.top-zt,Nt=Tt.left+Tt.width/2-Wt/2;break;case t.Position.TopRight:$t=Tt.top-zt,Nt=Tt.left+Tt.width-Wt;break;case t.Position.RightTop:$t=Tt.top,Nt=Tt.left+Tt.width;break;case t.Position.RightCenter:$t=Tt.top+Tt.height/2-zt/2,Nt=Tt.left+Tt.width;break;case t.Position.RightBottom:$t=Tt.top+Tt.height-zt,Nt=Tt.left+Tt.width;break;case t.Position.BottomLeft:$t=Tt.top+Tt.height,Nt=Tt.left;break;case t.Position.BottomCenter:$t=Tt.top+Tt.height,Nt=Tt.left+Tt.width/2-Wt/2;break;case t.Position.BottomRight:$t=Tt.top+Tt.height,Nt=Tt.left+Tt.width-Wt;break;case t.Position.LeftTop:$t=Tt.top,Nt=Tt.left-Wt;break;case t.Position.LeftCenter:$t=Tt.top+Tt.height/2-zt/2,Nt=Tt.left-Wt;break;case t.Position.LeftBottom:$t=Tt.top+Tt.height-zt,Nt=Tt.left-Wt}return{left:Nt+(Mt.left||0),top:$t+(Mt.top||0)}}(ct,K,q,$),at=st.top,Ct=st.left;ct.style.top="".concat(at-G.top,"px"),ct.style.left="".concat(Ct-G.left,"px")}},[])},ft=function(c){var w,N=c.customClassName,q=c.position;return n.createElement("div",{className:C((w={"rpv-core__arrow":!0,"rpv-core__arrow--tl":q===t.Position.TopLeft,"rpv-core__arrow--tc":q===t.Position.TopCenter,"rpv-core__arrow--tr":q===t.Position.TopRight,"rpv-core__arrow--rt":q===t.Position.RightTop,"rpv-core__arrow--rc":q===t.Position.RightCenter,"rpv-core__arrow--rb":q===t.Position.RightBottom,"rpv-core__arrow--bl":q===t.Position.BottomLeft,"rpv-core__arrow--bc":q===t.Position.BottomCenter,"rpv-core__arrow--br":q===t.Position.BottomRight,"rpv-core__arrow--lt":q===t.Position.LeftTop,"rpv-core__arrow--lc":q===t.Position.LeftCenter,"rpv-core__arrow--lb":q===t.Position.LeftBottom},w["".concat(N)]=N!=="",w))})},B=function(c){var w=c.ariaControlsSuffix,N=c.children,q=c.closeOnClickOutside,$=c.offset,K=c.position,ct=c.targetRef,rt=c.onClose,G=n.useRef(),st=n.useRef(),at=n.useRef(),Ct=n.useContext(k).direction===t.TextDirection.RightToLeft;x(q,G,rt),tt(G,ct,at,K,$),g(function(){var yt=st.current;if(yt){var xt=.75*document.body.clientHeight;yt.getBoundingClientRect().height>=xt&&(yt.style.overflow="auto",yt.style.maxHeight="".concat(xt,"px"))}},[]);var At="rpv-core__popover-body-inner-".concat(w);return n.createElement(n.Fragment,null,n.createElement("div",{ref:at,style:{left:0,position:"absolute",top:0}}),n.createElement("div",{"aria-describedby":At,className:C({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Ct}),id:"rpv-core__popover-body-".concat(w),ref:G,role:"dialog",tabIndex:-1},n.createElement(ft,{customClassName:"rpv-core__popover-body-arrow",position:K}),n.createElement("div",{id:At,ref:st},N)))},Q=function(c){var w=c.closeOnEscape,N=c.onClose,q=n.useRef();return H(function(){q.current&&w&&N()}),n.createElement("div",{className:"rpv-core__popover-overlay",ref:q})},X=function(c){var w=c.ariaControlsSuffix,N=c.children,q=c.contentRef,$=c.offset,K=c.position,ct=c.targetRef,rt=n.useRef(),G=n.useContext(k).direction===t.TextDirection.RightToLeft;return tt(q,ct,rt,K,$),n.createElement(n.Fragment,null,n.createElement("div",{ref:rt,style:{left:0,position:"absolute",top:0}}),n.createElement("div",{className:C({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":G}),id:"rpv-core__tooltip-body-".concat(w),ref:q,role:"tooltip"},n.createElement(ft,{customClassName:"rpv-core__tooltip-body-arrow",position:K}),n.createElement("div",{className:"rpv-core__tooltip-body-content"},N)))};t.FullScreenMode=void 0,(lt=t.FullScreenMode||(t.FullScreenMode={})).Normal="Normal",lt.Entering="Entering",lt.Entered="Entered",lt.EnteredCompletely="EnteredCompletely",lt.Exitting="Exitting",lt.Exited="Exited",t.LayerRenderStatus=void 0,(d=t.LayerRenderStatus||(t.LayerRenderStatus={}))[d.PreRender=0]="PreRender",d[d.DidRender=1]="DidRender",t.PageMode=void 0,(y=t.PageMode||(t.PageMode={})).Attachments="UseAttachments",y.Bookmarks="UseOutlines",y.ContentGroup="UseOC",y.Default="UserNone",y.FullScreen="FullScreen",y.Thumbnails="UseThumbs",t.PasswordStatus=void 0,(D=t.PasswordStatus||(t.PasswordStatus={})).RequiredPassword="RequiredPassword",D.WrongPassword="WrongPassword",t.RotateDirection=void 0,(F=t.RotateDirection||(t.RotateDirection={})).Backward="Backward",F.Forward="Forward",t.ScrollMode=void 0,(E=t.ScrollMode||(t.ScrollMode={})).Page="Page",E.Horizontal="Horizontal",E.Vertical="Vertical",E.Wrapped="Wrapped",t.SpecialZoomLevel=void 0,(z=t.SpecialZoomLevel||(t.SpecialZoomLevel={})).ActualSize="ActualSize",z.PageFit="PageFit",z.PageWidth="PageWidth",t.ViewMode=void 0,(Y=t.ViewMode||(t.ViewMode={})).DualPage="DualPage",Y.DualPageWithCover="DualPageWithCover",Y.SinglePage="SinglePage";var vt,Pt=function(c,w){return c.reduce(function(N,q,$){return $%w?N[N.length-1].push(q):N.push([q]),N},[])},Dt=function(c,w){switch(w[1].name){case"XYZ":return{bottomOffset:function(N,q){return w[3]===null?q:w[3]},leftOffset:function(N,q){return w[2]===null?0:w[2]},pageIndex:c,scaleTo:w[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:c,scaleTo:t.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:w[2],leftOffset:0,pageIndex:c,scaleTo:t.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:c,scaleTo:1}}},Ft=new Map,Ht=new Map,le=function(c,w){return"".concat(c.loadingTask.docId,"___").concat(w.num,"R").concat(w.gen===0?"":w.gen)},fe=function(c,w,N){Ft.set(le(c,w),N)},_t=function(c,w){if(!c)return Promise.reject("The document is not loaded yet");var N="".concat(c.loadingTask.docId,"___").concat(w),q=Ht.get(N);return q?Promise.resolve(q):new Promise(function($,K){c.getPage(w+1).then(function(ct){Ht.set(N,ct),ct.ref&&fe(c,ct.ref,w),$(ct)})})},ot=function(c,w){return new Promise(function(N){new Promise(function(q){typeof w=="string"?c.getDestination(w).then(function($){q($)}):q(w)}).then(function(q){if(typeof q[0]=="object"&&q[0]!==null){var $=q[0],K=function(rt,G){var st=le(rt,G);return Ft.has(st)?Ft.get(st):null}(c,$);K===null?c.getPageIndex($).then(function(rt){fe(c,$,rt),ot(c,w).then(function(G){return N(G)})}):N(Dt(K,q))}else{var ct=Dt(q[0],q);N(ct)}})})};(function(c){c[c.Solid=1]="Solid",c[c.Dashed=2]="Dashed",c[c.Beveled=3]="Beveled",c[c.Inset=4]="Inset",c[c.Underline=5]="Underline"})(vt||(vt={}));var it,Ot=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),Zt=function(c,w,N,q){var $=parseInt(c,10);return $>=w&&$<=N?$:q},ae=function(c){return c.contentsObj?c.contentsObj.str:c.contents||""},se=function(c){return c.titleObj?c.titleObj.str:c.title||""},Ve=function(c){var w=c.annotation,N=n.useContext(k).direction,q=se(w),$=ae(w),K=N===t.TextDirection.RightToLeft,ct=n.useRef(),rt="";if(w.modificationDate){var G=function(st){var at=Ot.exec(st);if(!at)return null;var Ct=parseInt(at[1],10),At=Zt(at[2],1,12,1)-1,yt=Zt(at[3],1,31,1),xt=Zt(at[4],0,23,0),Mt=Zt(at[5],0,59,0),Tt=Zt(at[6],0,59,0),ne=at[7]||"Z",zt=Zt(at[8],0,23,0),Wt=Zt(at[9],0,59,0);switch(ne){case"-":xt+=zt,Mt+=Wt;break;case"+":xt-=zt,Mt-=Wt}return new Date(Date.UTC(Ct,At,yt,xt,Mt,Tt))}(w.modificationDate);rt=G?"".concat(G.toLocaleDateString(),", ").concat(G.toLocaleTimeString()):""}return n.useLayoutEffect(function(){if(ct.current){var st=document.querySelector('[data-annotation-id="'.concat(w.id,'"]'));if(st){var at=st;return at.style.zIndex+=1,function(){at.style.zIndex="".concat(parseInt(at.style.zIndex,10)-1)}}}},[]),n.createElement("div",{ref:ct,className:C({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":K}),style:{top:w.annotationType===t.AnnotationType.Popup?"":"100%"}},q&&n.createElement(n.Fragment,null,n.createElement("div",{className:C({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!K,"rpv-core__annotation-popup-title--rtl":K})},q),n.createElement("div",{className:"rpv-core__annotation-popup-date"},rt)),$&&n.createElement("div",{className:"rpv-core__annotation-popup-content"},$.split(`
`).map(function(st,at){return n.createElement(n.Fragment,{key:at},st,n.createElement("br",null))})))};(function(c){c.Click="Click",c.Hover="Hover"})(it||(it={}));var re,Ae=function(c){var w,N=c.annotation,q=c.children,$=c.ignoreBorder,K=c.hasPopup,ct=c.isRenderable,rt=c.page,G=c.viewport,st=N.rect,at=function(){var Gt=dt(!1),he=Gt.opened,ue=Gt.toggle,de=n.useState(it.Hover),pe=de[0],me=de[1];return{opened:he,closeOnHover:function(){pe===it.Hover&&ue(t.ToggleStatus.Close)},openOnHover:function(){pe===it.Hover&&ue(t.ToggleStatus.Open)},toggleOnClick:function(){switch(pe){case it.Click:he&&me(it.Hover),ue(t.ToggleStatus.Toggle);break;case it.Hover:me(it.Click),ue(t.ToggleStatus.Open)}}}}(),Ct=at.closeOnHover,At=at.opened,yt=at.openOnHover,xt=at.toggleOnClick,Mt=(w=[st[0],rt.view[3]+rt.view[1]-st[1],st[2],rt.view[3]+rt.view[1]-st[3]],[Math.min(w[0],w[2]),Math.min(w[1],w[3]),Math.max(w[0],w[2]),Math.max(w[1],w[3])]),Tt=st[2]-st[0],ne=st[3]-st[1],zt={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!$&&N.borderStyle.width>0){switch(N.borderStyle.style){case vt.Dashed:zt.borderStyle="dashed";break;case vt.Solid:zt.borderStyle="solid";break;case vt.Underline:zt=Object.assign({borderBottomStyle:"solid"},zt);case vt.Beveled:case vt.Inset:}var Wt=N.borderStyle.width;zt.borderWidth="".concat(Wt,"px"),N.borderStyle.style!==vt.Underline&&(Tt-=2*Wt,ne-=2*Wt);var $t=N.borderStyle,Nt=$t.horizontalCornerRadius,Yt=$t.verticalCornerRadius;(Nt>0||Yt>0)&&(zt.borderRadius="".concat(Nt,"px / ").concat(Yt,"px")),N.color?zt.borderColor="rgb(".concat(0|N.color[0],", ").concat(0|N.color[1],", ").concat(0|N.color[2],")"):zt.borderWidth="0"}return n.createElement(n.Fragment,null,ct&&q({popup:{opened:At,closeOnHover:Ct,openOnHover:yt,toggleOnClick:xt},slot:{attrs:{style:Object.assign({height:"".concat(ne,"px"),left:"".concat(Mt[0],"px"),top:"".concat(Mt[1],"px"),transform:"matrix(".concat(G.transform.join(","),")"),transformOrigin:"-".concat(Mt[0],"px -").concat(Mt[1],"px"),width:"".concat(Tt,"px")},zt)},children:n.createElement(n.Fragment,null,K&&At&&n.createElement(Ve,{annotation:N}))}}))},Le=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct);return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(G){return n.createElement("div",v({},G.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":w.id,onClick:G.popup.toggleOnClick,onMouseEnter:G.popup.openOnHover,onMouseLeave:G.popup.closeOnHover}),G.slot.children)})},Ze=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct),G=w.rect,st=G[2]-G[0],at=G[3]-G[1],Ct=w.borderStyle.width;return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(At){return n.createElement("div",v({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":w.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),n.createElement("svg",{height:"".concat(at,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(st," ").concat(at),width:"".concat(st,"px")},n.createElement("circle",{cy:at/2,fill:"none",rx:st/2-Ct/2,ry:at/2-Ct/2,stroke:"transparent",strokeWidth:Ct||1})),At.slot.children)})},$e=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=se(w),K=ae(w),ct=!(w.hasPopup!==!1||!$&&!K),rt=function(){var G,st,at,Ct,At=w.file;At&&(G=At.filename,st=At.content,at=typeof st=="string"?"":URL.createObjectURL(new Blob([st],{type:""})),(Ct=document.createElement("a")).style.display="none",Ct.href=at||G,Ct.setAttribute("download",function(yt){var xt=yt.split("/").pop();return xt?xt.split("#")[0].split("?")[0]:yt}(G)),document.body.appendChild(Ct),Ct.click(),document.body.removeChild(Ct),at&&URL.revokeObjectURL(at))};return n.createElement(Ae,{annotation:w,hasPopup:ct,ignoreBorder:!0,isRenderable:!0,page:N,viewport:q},function(G){return n.createElement("div",v({},G.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":w.id,onClick:G.popup.toggleOnClick,onDoubleClick:rt,onMouseEnter:G.popup.openOnHover,onMouseLeave:G.popup.closeOnHover}),G.slot.children)})},hn=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct);return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(G){return n.createElement("div",v({},G.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":w.id,onClick:G.popup.toggleOnClick,onMouseEnter:G.popup.openOnHover,onMouseLeave:G.popup.closeOnHover}),G.slot.children)})},xe=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=se(w),K=ae(w),ct=!(!$&&!K),rt=!w.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(w.parentType)!==-1;return g(function(){if(w.parentId){var G=document.querySelector('[data-annotation-id="'.concat(w.parentId,'"]')),st=document.querySelector('[data-annotation-id="'.concat(w.id,'"]'));if(G&&st){var at=parseFloat(G.style.left),Ct=parseFloat(G.style.top)+parseFloat(G.style.height);st.style.left="".concat(at,"px"),st.style.top="".concat(Ct,"px"),st.style.transformOrigin="-".concat(at,"px -").concat(Ct,"px")}}},[]),n.createElement(Ae,{annotation:w,hasPopup:rt,ignoreBorder:!1,isRenderable:ct,page:N,viewport:q},function(G){return n.createElement("div",v({},G.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":w.id}),n.createElement(Ve,{annotation:w}))})},an=function(c){var w=c.annotation,N=c.childAnnotation,q=c.page,$=c.viewport,K=w.hasPopup===!1,ct=se(w),rt=ae(w),G=!!(w.hasPopup||ct||rt);if(w.quadPoints&&w.quadPoints.length>0){var st=w.quadPoints.map(function(at){return Object.assign({},w,{rect:[at[2].x,at[2].y,at[1].x,at[1].y],quadPoints:[]})});return n.createElement(n.Fragment,null,st.map(function(at,Ct){return n.createElement(an,{key:Ct,annotation:at,childAnnotation:N,page:q,viewport:$})}))}return n.createElement(Ae,{annotation:w,hasPopup:K,ignoreBorder:!0,isRenderable:G,page:q,viewport:$},function(at){return n.createElement(n.Fragment,null,n.createElement("div",v({},at.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":w.id,onClick:at.popup.toggleOnClick,onMouseEnter:at.popup.openOnHover,onMouseLeave:at.popup.closeOnHover}),at.slot.children),N&&N.annotationType===t.AnnotationType.Popup&&at.popup.opened&&n.createElement(xe,{annotation:N,page:q,viewport:$}))})},dn=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct),G=w.rect,st=G[2]-G[0],at=G[3]-G[1],Ct=w.borderStyle.width;return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(At){return n.createElement("div",v({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":w.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),w.inkLists&&w.inkLists.length&&n.createElement("svg",{height:"".concat(at,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(st," ").concat(at),width:"".concat(st,"px")},w.inkLists.map(function(yt,xt){return n.createElement("polyline",{key:xt,fill:"none",stroke:"transparent",strokeWidth:Ct||1,points:yt.map(function(Mt){return"".concat(Mt.x-G[0],",").concat(G[3]-Mt.y)}).join(" ")})})),At.slot.children)})},bn=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct),G=w.rect,st=G[2]-G[0],at=G[3]-G[1],Ct=w.borderStyle.width;return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(At){return n.createElement("div",v({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":w.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),n.createElement("svg",{height:"".concat(at,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(st," ").concat(at),width:"".concat(st,"px")},n.createElement("line",{stroke:"transparent",strokeWidth:Ct||1,x1:G[2]-w.lineCoordinates[0],x2:G[2]-w.lineCoordinates[2],y1:G[3]-w.lineCoordinates[1],y2:G[3]-w.lineCoordinates[3]})),At.slot.children)})},yn=/^([^\w]*)(javascript|data|vbscript)/im,sn=/&#(\w+)(^\w|;)?/g,Ue=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,on=/^([^:]+):/gm,_n=function(c,w){var N,q=(N=c||"",N.replace(sn,function(rt,G){return String.fromCharCode(G)})).replace(Ue,"").trim();if(!q)return w;var $=q[0];if($==="."||$==="/")return q;var K=q.match(on);if(!K)return q;var ct=K[0];return yn.test(ct)?w:q},ni=function(c){var w,N=c.annotation,q=c.annotationContainerRef,$=c.doc,K=c.outlines,ct=c.page,rt=c.pageIndex,G=c.scale,st=c.viewport,at=c.onExecuteNamedAction,Ct=c.onJumpFromLinkAnnotation,At=c.onJumpToDest,yt=n.useRef(),xt=K&&K.length&&N.dest&&typeof N.dest=="string"?(w=K.find(function(zt){return zt.dest===N.dest}))===null||w===void 0?void 0:w.title:"",Mt=!!(N.url||N.dest||N.action||N.unsafeUrl),Tt={};if(N.url||N.unsafeUrl){var ne=_n(N.url||N.unsafeUrl,"");ne?Tt={"data-target":"external",href:ne,rel:"noopener noreferrer nofollow",target:N.newWindow?"_blank":"",title:ne}:Mt=!1}else Tt={href:"","data-annotation-link":N.id,onClick:function(zt){zt.preventDefault(),N.action?at(N.action):ot($,N.dest).then(function(Wt){var $t=yt.current,Nt=q.current;if($t&&Nt){var Yt=$t.getBoundingClientRect();Nt.style.setProperty("height","100%"),Nt.style.setProperty("width","100%");var Gt=Nt.getBoundingClientRect();Nt.style.removeProperty("height"),Nt.style.removeProperty("width");var he=(Yt.left-Gt.left)/G,ue=(Gt.bottom-Yt.bottom+Yt.height)/G;Ct({bottomOffset:ue,label:xt,leftOffset:he,pageIndex:rt})}At(Wt)})}};return xt&&(Tt=Object.assign({},Tt,{title:xt,"aria-label":xt})),n.createElement(Ae,{annotation:N,hasPopup:!1,ignoreBorder:!1,isRenderable:Mt,page:ct,viewport:st},function(zt){return n.createElement("div",v({},zt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":N.id,"data-testid":"core__annotation--link-".concat(N.id)}),n.createElement("a",v({ref:yt},Tt)))})},ri=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct),G=w.rect,st=G[2]-G[0],at=G[3]-G[1],Ct=w.borderStyle.width;return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(At){return n.createElement("div",v({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":w.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),w.vertices&&w.vertices.length&&n.createElement("svg",{height:"".concat(at,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(st," ").concat(at),width:"".concat(st,"px")},n.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Ct||1,points:w.vertices.map(function(yt){return"".concat(yt.x-G[0],",").concat(G[3]-yt.y)}).join(" ")})),At.slot.children)})},ii=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct),G=w.rect,st=G[2]-G[0],at=G[3]-G[1],Ct=w.borderStyle.width;return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(At){return n.createElement("div",v({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":w.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),w.vertices&&w.vertices.length&&n.createElement("svg",{height:"".concat(at,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(st," ").concat(at),width:"".concat(st,"px")},n.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Ct||1,points:w.vertices.map(function(yt){return"".concat(yt.x-G[0],",").concat(G[3]-yt.y)}).join(" ")})),At.slot.children)})},ai=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct),G=w.rect,st=G[2]-G[0],at=G[3]-G[1],Ct=w.borderStyle.width;return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(At){return n.createElement("div",v({},At.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":w.id,onClick:At.popup.toggleOnClick,onMouseEnter:At.popup.openOnHover,onMouseLeave:At.popup.closeOnHover}),n.createElement("svg",{height:"".concat(at,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(st," ").concat(at),width:"".concat(st,"px")},n.createElement("rect",{height:at-Ct,fill:"none",stroke:"transparent",strokeWidth:Ct||1,x:Ct/2,y:Ct/2,width:st-Ct})),At.slot.children)})},si=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct);return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(G){return n.createElement("div",v({},G.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":w.id,onClick:G.popup.toggleOnClick,onMouseEnter:G.popup.openOnHover,onMouseLeave:G.popup.closeOnHover}),G.slot.children)})},oi=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct);return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(G){return n.createElement("div",v({},G.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":w.id,onClick:G.popup.toggleOnClick,onMouseEnter:G.popup.openOnHover,onMouseLeave:G.popup.closeOnHover}),G.slot.children)})},ci=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct);return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(G){return n.createElement("div",v({},G.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":w.id,onClick:G.popup.toggleOnClick,onMouseEnter:G.popup.openOnHover,onMouseLeave:G.popup.closeOnHover}),G.slot.children)})},li=function(){return n.createElement(u,{size:16},n.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),n.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),n.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),n.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},ui=function(){return n.createElement(u,{size:16},n.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),n.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),n.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),n.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),n.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),n.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),n.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),n.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),n.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),n.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},hi=function(){return n.createElement(u,{size:16},n.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),n.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},di=function(){return n.createElement(u,{size:16},n.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),n.createElement("path",{d:"M6 4.5L6 0.5"}),n.createElement("path",{d:"M18 4.5L18 0.5"}),n.createElement("path",{d:"M10 4.5L10 0.5"}),n.createElement("path",{d:"M14 4.5L14 0.5"}))},fi=function(){return n.createElement(u,{size:16},n.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),n.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),n.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},pi=function(){return n.createElement(u,{size:16},n.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},gi=function(c){var w=c.annotation,N=c.childAnnotation,q=c.page,$=c.viewport,K=w.hasPopup===!1,ct=se(w),rt=ae(w),G=!!(w.hasPopup||ct||rt),st=w.name?w.name.toLowerCase():"";return n.createElement(Ae,{annotation:w,hasPopup:K,ignoreBorder:!1,isRenderable:G,page:q,viewport:$},function(at){return n.createElement(n.Fragment,null,n.createElement("div",v({},at.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":w.id,onClick:at.popup.toggleOnClick,onMouseEnter:at.popup.openOnHover,onMouseLeave:at.popup.closeOnHover}),st&&n.createElement("div",{className:"rpv-core__annotation-text-icon"},st==="check"&&n.createElement(m,null),st==="comment"&&n.createElement(li,null),st==="help"&&n.createElement(ui,null),st==="insert"&&n.createElement(pi,null),st==="key"&&n.createElement(hi,null),st==="note"&&n.createElement(di,null),(st==="newparagraph"||st==="paragraph")&&n.createElement(fi,null)),at.slot.children),N&&N.annotationType===t.AnnotationType.Popup&&at.popup.opened&&n.createElement(xe,{annotation:N,page:q,viewport:$}))})},mi=function(c){var w=c.annotation,N=c.page,q=c.viewport,$=w.hasPopup===!1,K=se(w),ct=ae(w),rt=!!(w.hasPopup||K||ct);return n.createElement(Ae,{annotation:w,hasPopup:$,ignoreBorder:!0,isRenderable:rt,page:N,viewport:q},function(G){return n.createElement("div",v({},G.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":w.id,onClick:G.popup.toggleOnClick,onMouseEnter:G.popup.openOnHover,onMouseLeave:G.popup.closeOnHover}),G.slot.children)})},vi=function(c){var w=c.annotations,N=c.doc,q=c.outlines,$=c.page,K=c.pageIndex,ct=c.plugins,rt=c.rotation,G=c.scale,st=c.onExecuteNamedAction,at=c.onJumpFromLinkAnnotation,Ct=c.onJumpToDest,At=n.useRef(),yt=$.getViewport({rotation:rt,scale:G}).clone({dontFlip:!0}),xt=w.filter(function(Mt){return!Mt.parentId});return g(function(){var Mt=At.current;Mt&&ct.forEach(function(Tt){Tt.onAnnotationLayerRender&&Tt.onAnnotationLayerRender({annotations:xt,container:Mt,pageIndex:K,rotation:rt,scale:G})})},[]),n.createElement("div",{ref:At,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(K)},xt.map(function(Mt){var Tt=w.find(function(ne){return ne.parentId===Mt.id});switch(Mt.annotationType){case t.AnnotationType.Caret:return n.createElement(Le,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.Circle:return n.createElement(Ze,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.FileAttachment:return n.createElement($e,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.FreeText:return n.createElement(hn,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.Highlight:return n.createElement(an,{key:Mt.id,annotation:Mt,childAnnotation:Tt,page:$,viewport:yt});case t.AnnotationType.Ink:return n.createElement(dn,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.Line:return n.createElement(bn,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.Link:return n.createElement(ni,{key:Mt.id,annotation:Mt,annotationContainerRef:At,doc:N,outlines:q,page:$,pageIndex:K,scale:G,viewport:yt,onExecuteNamedAction:st,onJumpFromLinkAnnotation:at,onJumpToDest:Ct});case t.AnnotationType.Polygon:return n.createElement(ri,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.Polyline:return n.createElement(ii,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.Popup:return n.createElement(xe,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.Square:return n.createElement(ai,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.Squiggly:return n.createElement(si,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.Stamp:return n.createElement(oi,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.StrikeOut:return n.createElement(ci,{key:Mt.id,annotation:Mt,page:$,viewport:yt});case t.AnnotationType.Text:return n.createElement(gi,{key:Mt.id,annotation:Mt,childAnnotation:Tt,page:$,viewport:yt});case t.AnnotationType.Underline:return n.createElement(mi,{key:Mt.id,annotation:Mt,page:$,viewport:yt});default:return n.createElement(n.Fragment,{key:Mt.id})}}))},bi=function(c){var w=c.page,N=c.renderAnnotations,q=mt(),$=n.useState({loading:!0,annotations:[]}),K=$[0],ct=$[1];return n.useEffect(function(){w.getAnnotations({intent:"display"}).then(function(rt){q.current&&ct({loading:!1,annotations:rt})})},[]),K.loading?n.createElement(n.Fragment,null):N(K.annotations)},yi=function(c){var w=c.doc,N=c.outlines,q=c.page,$=c.pageIndex,K=c.plugins,ct=c.rotation,rt=c.scale,G=c.onExecuteNamedAction,st=c.onJumpFromLinkAnnotation,at=c.onJumpToDest;return n.createElement(bi,{page:q,renderAnnotations:function(Ct){return n.createElement(vi,{annotations:Ct,doc:w,outlines:N,page:q,pageIndex:$,plugins:K,rotation:ct,scale:rt,onExecuteNamedAction:G,onJumpFromLinkAnnotation:st,onJumpToDest:at})}})},Pn=function(c,w){var N=c%w;return N===0?c:Math.floor(c-N)},_i=function(c){var w=c.canvasLayerRef,N=c.height,q=c.page,$=c.pageIndex,K=c.plugins,ct=c.rotation,rt=c.scale,G=c.width,st=c.onRenderCanvasCompleted,at=n.useRef();return g(function(){var Ct=at.current;Ct&&Ct.cancel();var At=w.current;At.removeAttribute("data-testid"),K.forEach(function(Gt){Gt.onCanvasLayerRender&&Gt.onCanvasLayerRender({ele:At,pageIndex:$,rotation:ct,scale:rt,status:t.LayerRenderStatus.PreRender})});var yt=q.getViewport({rotation:ct,scale:rt}),xt=window.devicePixelRatio||1,Mt=Math.sqrt(16777216/(yt.width*yt.height)),Tt=xt>Mt;Tt?At.style.transform="scale(1, 1)":At.style.removeProperty("transform");var ne=Math.min(Mt,xt),zt=function(Gt,he){var ue,de;if(Math.floor(Gt)===Gt)return[Gt,1];var pe=1/Gt;if(pe>he)return[1,he];if(Math.floor(pe)===pe)return[1,pe];for(var me=Gt>1?pe:Gt,De=0,Ee=1,Fe=1,ke=1;;){var Me=De+Fe,Re=Ee+ke;if(Re>he)break;me<=Me/Re?(Fe=(ue=[Me,Re])[0],ke=ue[1]):(De=(de=[Me,Re])[0],Ee=de[1])}return me<(De/Ee+Fe/ke)/2?me===Gt?[De,Ee]:[Ee,De]:me===Gt?[Fe,ke]:[ke,Fe]}(ne,8),Wt=zt[0],$t=zt[1];At.width=Pn(yt.width*ne,Wt),At.height=Pn(yt.height*ne,Wt),At.style.width="".concat(Pn(yt.width,$t),"px"),At.style.height="".concat(Pn(yt.height,$t),"px"),At.hidden=!0;var Nt=At.getContext("2d",{alpha:!1}),Yt=Tt||xt!==1?[ne,0,0,ne,0,0]:null;return at.current=q.render({canvasContext:Nt,transform:Yt,viewport:yt}),at.current.promise.then(function(){At.hidden=!1,At.setAttribute("data-testid","core__canvas-layer-".concat($)),K.forEach(function(Gt){Gt.onCanvasLayerRender&&Gt.onCanvasLayerRender({ele:At,pageIndex:$,rotation:ct,scale:rt,status:t.LayerRenderStatus.DidRender})}),st()},function(){st()}),function(){At&&(At.width=0,At.height=0)}},[]),n.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(N,"px"),width:"".concat(G,"px")}},n.createElement("canvas",{ref:w}))},Ai=function(c){var w=c.height,N=c.page,q=c.rotation,$=c.scale,K=c.width,ct=n.useRef();return g(function(){var rt=ct.current,G=N.getViewport({rotation:q,scale:$});N.getOperatorList().then(function(st){(function(){var at=ct.current;at&&(at.innerHTML="")})(),new R.SVGGraphics(N.commonObjs,N.objs).getSVG(st,G).then(function(at){at.style.height="".concat(w,"px"),at.style.width="".concat(K,"px"),rt.appendChild(at)})})},[]),n.createElement("div",{className:"rpv-core__svg-layer",ref:ct})},Ci=function(c){var w=c.containerRef,N=c.page,q=c.pageIndex,$=c.plugins,K=c.rotation,ct=c.scale,rt=c.onRenderTextCompleted,G=n.useRef(),st=function(){var at=w.current;at&&([].slice.call(at.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Ct){return at.removeChild(Ct)}),[].slice.call(at.querySelectorAll('br[role="presentation"]')).forEach(function(Ct){return at.removeChild(Ct)}))};return g(function(){var at=G.current;at&&at.cancel();var Ct=w.current;if(Ct){Ct.removeAttribute("data-testid");var At=N.getViewport({rotation:K,scale:ct});return $.forEach(function(yt){yt.onTextLayerRender&&yt.onTextLayerRender({ele:Ct,pageIndex:q,scale:ct,status:t.LayerRenderStatus.PreRender})}),N.getTextContent().then(function(yt){st(),G.current=R.renderTextLayer({container:Ct,textContent:yt,textContentSource:yt,viewport:At}),G.current.promise.then(function(){Ct.setAttribute("data-testid","core__text-layer-".concat(q)),[].slice.call(Ct.children).forEach(function(xt){xt.classList.contains("rpv-core__text-layer-text--not")||xt.classList.add("rpv-core__text-layer-text")}),$.forEach(function(xt){xt.onTextLayerRender&&xt.onTextLayerRender({ele:Ct,pageIndex:q,scale:ct,status:t.LayerRenderStatus.DidRender})}),rt()},function(){Ct.removeAttribute("data-testid"),rt()})}),function(){var yt;st(),(yt=G.current)===null||yt===void 0||yt.cancel()}}},[]),n.createElement("div",{className:"rpv-core__text-layer",ref:w})},Si=function(c){var w=c.doc,N=c.measureRef,q=c.outlines,$=c.pageIndex,K=c.pageRotation,ct=c.pageSize,rt=c.plugins,G=c.renderPage,st=c.renderQueueKey,at=c.rotation,Ct=c.scale,At=c.shouldRender,yt=c.viewMode,xt=c.onExecuteNamedAction,Mt=c.onJumpFromLinkAnnotation,Tt=c.onJumpToDest,ne=c.onRenderCompleted,zt=c.onRotatePage,Wt=mt(),$t=n.useState(null),Nt=$t[0],Yt=$t[1],Gt=n.useState(!1),he=Gt[0],ue=Gt[1],de=n.useState(!1),pe=de[0],me=de[1],De=n.useRef(),Ee=n.useRef(),Fe=Math.abs(at+K)%180==0,ke=ct.pageWidth*Ct,Me=ct.pageHeight*Ct,Re=Fe?ke:Me,Te=Fe?Me:ke,He=(ct.rotation+at+K)%360,Ye=n.useRef(0),Xe=G||function(Ne){return n.createElement(n.Fragment,null,Ne.canvasLayer.children,Ne.textLayer.children,Ne.annotationLayer.children)};return n.useEffect(function(){Yt(null),ue(!1),me(!1)},[K,at,Ct]),n.useEffect(function(){At&&Wt.current&&!Nt&&_t(w,$).then(function(Ne){Wt.current&&(Ye.current=st,Yt(Ne))})},[At,Nt]),n.useEffect(function(){he&&pe&&(st!==Ye.current?(Yt(null),ue(!1),me(!1)):ne($))},[he,pe]),n.createElement("div",{className:C({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":yt===t.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":yt===t.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":yt===t.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat($),ref:N,style:{height:"".concat(Te,"px"),width:"".concat(Re,"px")}},Nt?n.createElement(n.Fragment,null,Xe({annotationLayer:{attrs:{},children:n.createElement(yi,{doc:w,outlines:q,page:Nt,pageIndex:$,plugins:rt,rotation:He,scale:Ct,onExecuteNamedAction:xt,onJumpFromLinkAnnotation:Mt,onJumpToDest:Tt})},canvasLayer:{attrs:{},children:n.createElement(_i,{canvasLayerRef:De,height:Te,page:Nt,pageIndex:$,plugins:rt,rotation:He,scale:Ct,width:Re,onRenderCanvasCompleted:function(){Wt.current&&ue(!0)}})},canvasLayerRendered:he,doc:w,height:Te,pageIndex:$,rotation:He,scale:Ct,svgLayer:{attrs:{},children:n.createElement(Ai,{height:Te,page:Nt,rotation:He,scale:Ct,width:Re})},textLayer:{attrs:{},children:n.createElement(Ci,{containerRef:Ee,page:Nt,pageIndex:$,plugins:rt,rotation:He,scale:Ct,onRenderTextCompleted:function(){Wt.current&&me(!0)}})},textLayerRendered:pe,width:Re,markRendered:ne,onRotatePage:function(Ne){return zt($,Ne)}}),rt.map(function(Ne,ze){return Ne.renderPageLayer?n.createElement(n.Fragment,{key:ze},Ne.renderPageLayer({canvasLayerRef:De,canvasLayerRendered:he,doc:w,height:Te,pageIndex:$,rotation:He,scale:Ct,textLayerRef:Ee,textLayerRendered:pe,width:Re})):n.createElement(n.Fragment,{key:ze})})):n.createElement(l,{testId:"core__page-layer-loading-".concat($)}))},Ei=function(c,w){var N=w.rect;return c.height!==N.height||c.width!==N.width?N:c};(function(c){c.Horizontal="Horizontal",c.Vertical="Vertical",c.Both="Both"})(re||(re={}));var Pi=function(c){return 1-Math.pow(1-c,4)},wn=1e-4,gr={left:0,top:0},mr={capture:!1,passive:!0},wi=function(c){var w=c.elementRef,N=c.enableSmoothScroll,q=c.isRtl,$=c.scrollDirection,K=c.onSmoothScroll,ct=n.useState(gr),rt=ct[0],G=ct[1],st=n.useState(w.current),at=st[0],Ct=st[1],At=q?-1:1,yt=n.useRef($);yt.current=$;var xt=n.useRef(gr),Mt=n.useRef(!0),Tt=n.useCallback(function(){Mt.current=!0,N&&G(xt.current),K(!1)},[]),ne=n.useCallback(function(){if(at){switch(yt.current){case re.Horizontal:xt.current={left:At*at.scrollLeft,top:0};break;case re.Both:xt.current={left:At*at.scrollLeft,top:at.scrollTop};break;case re.Vertical:default:xt.current={left:0,top:at.scrollTop}}N&&!Mt.current||G(xt.current)}},[at]);g(function(){Ct(w.current)}),g(function(){if(at)return at.addEventListener("scroll",ne,mr),function(){at.removeEventListener("scroll",ne,mr)}},[at]);var zt=n.useCallback(function(Wt,$t){var Nt=w.current;if(!Nt)return Promise.resolve();var Yt={left:0,top:0};switch(yt.current){case re.Horizontal:Yt.left=At*Wt.left;break;case re.Both:Yt.left=At*Wt.left,Yt.top=Wt.top;break;case re.Vertical:default:Yt.top=Wt.top}return $t?(Mt.current=!1,K(!0),new Promise(function(Gt,he){(function(ue,de,pe,me,De,Ee){De===void 0&&(De=function(ze){return ze}),Ee===void 0&&(Ee=function(){});var Fe=0,ke=0,Me=!1;switch(de){case re.Horizontal:ke=ue.scrollLeft,Fe=0;case re.Both:ke=ue.scrollLeft,Fe=ue.scrollTop;break;case re.Vertical:default:ke=0,Fe=ue.scrollTop}var Re=function(){Me||(Me=!0,ue.scrollLeft=pe.left,ue.scrollTop=pe.top,Ee())};if(Math.abs(Fe-pe.top)<=wn&&de===re.Vertical)Re();else if(Math.abs(ke-pe.left)<=wn&&de===re.Horizontal)Re();else{var Te,He=-1,Ye=ke-pe.left,Xe=Fe-pe.top,Ne=function(ze){He===-1&&(He=ze);var Je=ze-He,Xt=Math.min(Je/me,1),qt=De(Xt),Bt={left:ke-Ye*qt,top:Fe-Xe*qt};switch(de){case re.Horizontal:ue.scrollLeft=Bt.left;break;case re.Both:ue.scrollLeft=Bt.left,ue.scrollTop=Bt.top;break;case re.Vertical:default:ue.scrollTop=Bt.top}Math.abs(Bt.top-pe.top)<=wn&&Math.abs(Bt.left-pe.left)<=wn&&!Me&&(window.cancelAnimationFrame(Te),Re()),Je<me?Te=window.requestAnimationFrame(Ne):window.cancelAnimationFrame(Te)};Te=window.requestAnimationFrame(Ne)}})(Nt,yt.current,Yt,400,Pi,function(){Tt(),Gt()})})):new Promise(function(Gt,he){switch(yt.current){case re.Horizontal:Nt.scrollLeft=Yt.left;break;case re.Both:Nt.scrollLeft=Yt.left,Nt.scrollTop=Yt.top;break;case re.Vertical:default:Nt.scrollTop=Yt.top}Gt()})},[w]);return{scrollOffset:rt,scrollTo:zt}},An=function(c,w,N){return Math.max(c,Math.min(N,w))},ki=function(c,w){if(w!==t.ViewMode.DualPageWithCover)return 0;if(!function($){var K=$.length;if(K===1)return!1;for(var ct=1;ct<K;ct++)if($[ct].height!==$[0].height||$[ct].width!==$[0].width)return!0;return!1}(c))return 2*c[0].width;var N=Pt(c.slice(1),2).map(function($){return $.length===2?$[0].width+$[1].width:$[0].width}),q=[c[0].width].concat(N);return Math.max.apply(Math,q)},Ti={left:0,top:0},Mi={left:0,top:0},Ln={left:0,top:0},Ri={left:0,top:0},xi={height:0,width:0},vr={left:0,top:0},br="data-virtual-index",Di=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Fi=function(c){var w=c.enableSmoothScroll,N=c.isRtl,q=c.numberOfItems,$=c.parentRef,K=c.setRenderRange,ct=c.sizes,rt=c.scrollMode,G=c.viewMode,st=n.useState(!1),at=st[0],Ct=st[1],At=n.useCallback(function(Xt){return Ct(Xt)},[]),yt=n.useRef(rt);yt.current=rt;var xt=n.useRef(G);xt.current=G;var Mt=rt===t.ScrollMode.Wrapped||G===t.ViewMode.DualPageWithCover||G===t.ViewMode.DualPage?re.Both:rt===t.ScrollMode.Horizontal?re.Horizontal:re.Vertical,Tt=wi({elementRef:$,enableSmoothScroll:w,isRtl:N,scrollDirection:Mt,onSmoothScroll:At}),ne=Tt.scrollOffset,zt=Tt.scrollTo,Wt=function(Xt){var qt=Xt.elementRef,Bt=n.useState(qt.current),Ut=Bt[0],jt=Bt[1],Kt=n.useRef(!1),Jt=n.useReducer(Ei,{height:0,width:0}),Vt=Jt[0],Lt=Jt[1];return g(function(){qt.current!==Ut&&jt(qt.current)}),g(function(){if(Ut&&!Kt.current){Kt.current=!0;var te=Ut.getBoundingClientRect(),ie=te.height,Ce=te.width;Lt({rect:{height:ie,width:Ce}})}},[Ut]),n.useEffect(function(){if(Ut){var te=new ResizeObserver(function(ie,Ce){ie.forEach(function(ye){if(ye.target===Ut){var Be=ye.contentRect,We=Be.height,ee=Be.width;Lt({rect:{height:We,width:ee}})}})});return te.observe(Ut),function(){te.unobserve(Ut)}}},[Ut]),Vt}({elementRef:$}),$t=n.useRef({scrollOffset:vr,measurements:[]});$t.current.scrollOffset=ne;var Nt=n.useMemo(function(){return Array(q).fill(-1)},[]),Yt=n.useState(Nt),Gt=Yt[0],he=Yt[1],ue=n.useMemo(function(){var Xt=new IntersectionObserver(function(qt){qt.forEach(function(Bt){var Ut=Bt.isIntersecting?Bt.intersectionRatio:-1,jt=Bt.target.getAttribute(br);if(jt){var Kt=parseInt(jt,10);0<=Kt&&Kt<q&&he(function(Jt){return Jt[Kt]=Ut,function(Vt,Lt,te){for(var ie,Ce=0,ye=Lt.length;Ce<ye;Ce++)!ie&&Ce in Lt||(ie||(ie=Array.prototype.slice.call(Lt,0,Ce)),ie[Ce]=Lt[Ce]);return Vt.concat(ie||Array.prototype.slice.call(Lt))}([],Jt)})}})},{threshold:Di});return Xt},[]),de=n.useMemo(function(){return rt===t.ScrollMode.Page&&G===t.ViewMode.SinglePage?function(Xt,qt,Bt){for(var Ut=[],jt=0;jt<Xt;jt++){var Kt={height:Math.max(qt.height,Bt[jt].height),width:Math.max(qt.width,Bt[jt].width)},Jt=jt===0?Ri:Ut[jt-1].end,Vt={left:Jt.left+Kt.width,top:Jt.top+Kt.height};Ut[jt]={index:jt,start:Jt,size:Kt,end:Vt,visibility:-1}}return Ut}(q,Wt,ct):G===t.ViewMode.DualPageWithCover?function(Xt,qt,Bt,Ut){for(var jt=[],Kt=0,Jt=0,Vt=Ln,Lt=0;Lt<Xt;Lt++){var te=Lt===0?{height:Ut===t.ScrollMode.Page?Math.max(qt.height,Bt[Lt].height):Bt[Lt].height,width:Ut===t.ScrollMode.Page?Math.max(qt.width,Bt[Lt].width):Bt[Lt].width}:{height:Ut===t.ScrollMode.Page?Math.max(qt.height,Bt[Lt].height):Bt[Lt].height,width:Math.max(qt.width/2,Bt[Lt].width)};Ut===t.ScrollMode.Page?Vt=Lt===0?Ln:{left:Lt%2==0?te.width:0,top:Math.floor((Lt-1)/2)*te.height+jt[0].end.top}:Lt===0?(Vt=Ln,Kt=Bt[0].height,Jt=0):Lt%2==1?(Vt={left:0,top:Kt+=Jt},Jt=Lt===Xt-1?Bt[Lt].height:Math.max(Bt[Lt].height,Bt[Lt+1].height)):Vt={left:jt[Lt-1].end.left,top:Kt};var ie={left:Vt.left+te.width,top:Vt.top+te.height};jt[Lt]={index:Lt,start:Vt,size:te,end:ie,visibility:-1}}return jt}(q,Wt,ct,rt):G===t.ViewMode.DualPage?function(Xt,qt,Bt,Ut){for(var jt=[],Kt=0,Jt=0,Vt=Mi,Lt=0;Lt<Xt;Lt++){var te={height:Ut===t.ScrollMode.Page?Math.max(qt.height,Bt[Lt].height):Bt[Lt].height,width:Math.max(qt.width/2,Bt[Lt].width)};Ut===t.ScrollMode.Page?Vt={left:Lt%2==0?0:te.width,top:Math.floor(Lt/2)*te.height}:Lt%2==0?(Vt={left:0,top:Kt+=Jt},Jt=Lt===Xt-1?Bt[Lt].height:Math.max(Bt[Lt].height,Bt[Lt+1].height)):Vt={left:jt[Lt-1].end.left,top:Kt};var ie={left:Vt.left+te.width,top:Vt.top+te.height};jt[Lt]={index:Lt,start:Vt,size:te,end:ie,visibility:-1}}return jt}(q,Wt,ct,rt):function(Xt,qt,Bt,Ut){for(var jt=[],Kt=0,Jt={left:0,top:0},Vt=0,Lt=Ti,te=0;te<Xt;te++){var ie=Bt[te];if(te===0)Kt=ie.width,Jt={left:0,top:0},Vt=ie.height;else switch(Ut){case t.ScrollMode.Wrapped:(Kt+=ie.width)<qt.width?(Lt={left:jt[te-1].end.left,top:Jt.top},Vt=Math.max(Vt,ie.height)):(Kt=ie.width,Jt={left:(Lt={left:Jt.left,top:Jt.top+Vt}).left,top:Lt.top},Vt=ie.height);break;case t.ScrollMode.Horizontal:case t.ScrollMode.Vertical:default:Lt=jt[te-1].end}var Ce={left:Lt.left+ie.width,top:Lt.top+ie.height};jt[te]={index:te,start:Lt,size:ie,end:Ce,visibility:-1}}return jt}(q,Wt,ct,rt)},[rt,ct,G,Wt]),pe=de[q-1]?{height:de[q-1].end.top,width:de[q-1].end.left}:xi;$t.current.measurements=de;var me=n.useMemo(function(){var Xt=function(te,ie,Ce,ye){var Be=0;switch(te){case re.Horizontal:Be=ye.left;break;case re.Vertical:default:Be=ye.top}var We=ie.length-1,ee=function(be,Qe,pn,Tn){for(;be<=Qe;){var cn=(be+Qe)/2|0,Cn=Tn(cn);if(Cn<pn)be=cn+1;else{if(!(Cn>pn))return cn;Qe=cn-1}}return be>0?be-1:0}(0,We,Be,function(be){switch(te){case re.Horizontal:return ie[be].start.left;case re.Both:case re.Vertical:default:return ie[be].start.top}});if(te===re.Both)for(var je=ie[ee].start.top;ee-1>=0&&ie[ee-1].start.top===je&&ie[ee-1].start.left>=ye.left;)ee--;for(var Se=ee;Se<=We;){var Pe={top:ie[Se].start.top-ye.top,left:ie[Se].start.left-ye.left},Oe={height:Ce.height-Pe.top,width:Ce.width-Pe.left};if(te===re.Horizontal&&Oe.width<0||te===re.Vertical&&Oe.height<0||te===re.Both&&(Oe.width<0||Oe.height<0))break;Se++}return{start:ee,end:Se}}(Mt,de,Wt,ne),qt=Xt.start,Bt=Xt.end,Ut=Gt.slice(An(0,q,qt),An(0,q,Bt)),jt=qt+Ut.reduce(function(te,ie,Ce,ye){return ie>ye[te]?Ce:te},0),Kt=jt=An(0,q-1,jt),Jt=K({endPage:Bt,numPages:q,startPage:qt}),Vt=Jt.startPage,Lt=Jt.endPage;switch(Vt=Math.max(Vt,0),Lt=Math.min(Lt,q-1),G){case t.ViewMode.DualPageWithCover:jt>0&&(Kt=jt%2==1?jt:jt-1),Vt=Vt===0?0:Vt%2==1?Vt:Vt-1,q-(Lt=Lt%2==1?Lt-1:Lt)<=2&&(Lt=q-1);break;case t.ViewMode.DualPage:Kt=jt%2==0?jt:jt-1,Vt=Vt%2==0?Vt:Vt-1,Lt=Lt%2==1?Lt:Lt-1;break;case t.ViewMode.SinglePage:default:Kt=jt}return{startPage:Vt,endPage:Lt,maxVisbilityIndex:Kt}},[de,Wt,ne,G,Gt]),De=me.startPage,Ee=me.endPage,Fe=me.maxVisbilityIndex,ke=n.useMemo(function(){for(var Xt=[],qt=function(Ut){var jt=de[Ut],Kt=v(v({},jt),{visibility:Gt[Ut]!==void 0?Gt[Ut]:-1,measureRef:function(Jt){Jt&&(Jt.setAttribute(br,"".concat(Ut)),ue.observe(Jt))}});Xt.push(Kt)},Bt=De;Bt<=Ee;Bt++)qt(Bt);return Xt},[De,Ee,Gt,de]),Me=n.useCallback(function(Xt,qt){var Bt=$t.current.measurements[An(0,q-1,Xt)],Ut=yt.current===t.ScrollMode.Page?vr:qt;return Bt?zt({left:Ut.left+Bt.start.left,top:Ut.top+Bt.start.top},w):Promise.resolve()},[zt,w]),Re=n.useCallback(function(Xt,qt){var Bt=$t.current.measurements,Ut=Bt[Xt].start,jt=Bt.find(function(Jt){return Jt.start.top-Ut.top>1e-12});if(!jt)return Promise.resolve();var Kt=jt.index;switch(xt.current){case t.ViewMode.DualPage:Kt=Kt%2==0?Kt:Kt+1;break;case t.ViewMode.DualPageWithCover:Kt=Kt%2==1?Kt:Kt+1}return Me(Kt,qt)},[]),Te=n.useCallback(function(Xt,qt){for(var Bt=$t.current.measurements,Ut=Bt[Xt].start,jt=Xt,Kt=!1,Jt=q-1;Jt>=0;Jt--)if(Ut.top-Bt[Jt].start.top>1e-12){Kt=!0,jt=Bt[Jt].index;break}if(!Kt)return Promise.resolve();switch(xt.current){case t.ViewMode.DualPage:jt=jt%2==0?jt:jt-1;break;case t.ViewMode.DualPageWithCover:jt=jt%2==0?jt-1:jt}return jt===Xt&&(jt=Xt-1),Me(jt,qt)},[]),He=n.useCallback(function(Xt,qt){if(xt.current===t.ViewMode.DualPageWithCover||xt.current===t.ViewMode.DualPage)return Re(Xt,qt);switch(yt.current){case t.ScrollMode.Wrapped:return Re(Xt,qt);case t.ScrollMode.Horizontal:case t.ScrollMode.Vertical:default:return Me(Xt+1,qt)}},[]),Ye=n.useCallback(function(Xt,qt){if(xt.current===t.ViewMode.DualPageWithCover||xt.current===t.ViewMode.DualPage)return Te(Xt,qt);switch(yt.current){case t.ScrollMode.Wrapped:return Te(Xt,qt);case t.ScrollMode.Horizontal:case t.ScrollMode.Vertical:default:return Me(Xt-1,qt)}},[]),Xe=n.useCallback(function(){return function(Xt,qt){switch(qt){case t.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Xt.width,"px")};case t.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Xt.height,"px"),width:"100%"}}}(pe,yt.current)},[pe]),Ne=n.useCallback(function(Xt){return function(qt,Bt,Ut){return Ut!==t.ScrollMode.Page?{}:{height:"".concat(Bt.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(qt.start.top,"px)")}}(Xt,Wt,yt.current)},[Wt]),ze=n.useCallback(function(Xt){return function(qt,Bt,Ut,jt,Kt){var Jt,Vt,Lt,te,ie,Ce,ye,Be=Bt?"right":"left",We=Bt?-1:1,ee=Ut.length,je=qt.start.left*We,Se=qt.size,Pe=Se.height,Oe=Se.width;if(jt===t.ViewMode.DualPageWithCover){var be=Kt===t.ScrollMode.Page?0:qt.start.top;return qt.index===0||ee%2==0&&qt.index===ee-1?((Jt={height:"".concat(Pe,"px"),minWidth:"".concat(ki(Ut,jt),"px"),width:"100%"})[Be]=0,Jt.position="absolute",Jt.top=0,Jt.transform="translate(".concat(je,"px, ").concat(be,"px)"),Jt):((Vt={height:"".concat(Pe,"px"),width:"".concat(Oe,"px")})[Be]=0,Vt.position="absolute",Vt.top=0,Vt.transform="translate(".concat(je,"px, ").concat(be,"px)"),Vt)}if(jt===t.ViewMode.DualPage)return(Lt={height:"".concat(Pe,"px"),width:"".concat(Oe,"px")})[Be]=0,Lt.position="absolute",Lt.top=0,Lt.transform="translate(".concat(je,"px, ").concat(Kt===t.ScrollMode.Page?0:qt.start.top,"px)"),Lt;switch(Kt){case t.ScrollMode.Horizontal:return(te={height:"100%",width:"".concat(Oe,"px")})[Be]=0,te.position="absolute",te.top=0,te.transform="translateX(".concat(je,"px)"),te;case t.ScrollMode.Page:return(ie={height:"".concat(Pe,"px"),width:"".concat(Oe,"px")})[Be]=0,ie.position="absolute",ie.top=0,ie;case t.ScrollMode.Wrapped:return(Ce={height:"".concat(Pe,"px"),width:"".concat(Oe,"px")})[Be]=0,Ce.position="absolute",Ce.top=0,Ce.transform="translate(".concat(je,"px, ").concat(qt.start.top,"px)"),Ce;case t.ScrollMode.Vertical:default:return(ye={height:"".concat(Pe,"px"),width:"100%"})[Be]=0,ye.position="absolute",ye.top=0,ye.transform="translateY(".concat(qt.start.top,"px)"),ye}}(Xt,N,ct,xt.current,yt.current)},[N,ct]),Je=n.useCallback(function(Xt,qt){var Bt=$t.current,Ut=Bt.measurements,jt=Bt.scrollOffset,Kt=Ut[An(0,q-1,qt)];if(Kt){var Jt=yt.current===t.ScrollMode.Page?{left:Kt.start.left,top:Kt.start.top}:{left:jt.left*Xt,top:jt.top*Xt};return zt(Jt,!1)}return Promise.resolve()},[]);return n.useEffect(function(){return function(){ue.disconnect()}},[]),{boundingClientRect:Wt,isSmoothScrolling:at,startPage:De,endPage:Ee,maxVisbilityIndex:Fe,virtualItems:ke,getContainerStyles:Xe,getItemContainerStyles:Ne,getItemStyles:ze,scrollToItem:Me,scrollToNextItem:He,scrollToPreviousItem:Ye,zoom:Je}},Nn=function(c,w,N,q,$,K){var ct=N;switch(!0){case($===t.ViewMode.DualPageWithCover&&K>=3):case($===t.ViewMode.DualPage&&K>=3):ct=2*N;break;default:ct=N}switch(q){case t.SpecialZoomLevel.ActualSize:return 1;case t.SpecialZoomLevel.PageFit:return Math.min((c.clientWidth-17)/ct,(c.clientHeight-16)/w);case t.SpecialZoomLevel.PageWidth:return(c.clientWidth-17)/ct}},Oi=function(c){var w,N,q=c.getCurrentPage,$=(w=50,N=n.useRef([]),n.useEffect(function(){return function(){N.current=[]}},[]),{push:function(st){var at=N.current;at.length+1>w&&at.shift(),at.push(st),N.current=at},map:function(st){return N.current.map(function(at){return st(at)})},pop:function(){var st=N.current;if(st.length===0)return null;var at=st.pop();return N.current=st,at}}),K=function(st){var at=n.useRef([]);return n.useEffect(function(){return function(){at.current=[]}},[]),{dequeue:function(){var Ct=at.current;if(Ct.length===0)return null;var At=Ct.shift();return at.current=Ct,At||null},enqueue:function(Ct){var At=at.current;At.length+1>st&&At.pop(),at.current=[Ct].concat(At)},map:function(Ct){return at.current.map(function(At){return Ct(At)})}}}(50),ct=function(){var st=K.dequeue();return st&&$.push(st),st&&st.pageIndex===q()?ct():st},rt=function(){var st=$.pop();return st&&K.enqueue(st),st&&st.pageIndex===q()?rt():st},G=n.useCallback(function(st){$.push(st)},[]);return{getNextDestination:ct,getPreviousDestination:rt,markVisitedDestination:G}},yr=function(c){var w=[];return c.map(function(N){w=w.concat(N).concat(function(q){var $=[];return q.items&&q.items.length>0&&($=$.concat(yr(q.items))),$}(N))}),w},_r={capture:!1,passive:!0},Ii={height:0,width:0},Bn={height:0,width:0},Li=function(c){var w=c.getCurrentPage,N=c.getCurrentScrollMode,q=c.jumpToPage,$=c.targetRef,K=n.useState(t.FullScreenMode.Normal),ct=K[0],rt=K[1],G=function(){var Gt=n.useState(Ii),he=Gt[0],ue=Gt[1],de=pt(function(){ue({height:window.innerHeight,width:window.innerWidth})},100);return g(function(){return window.addEventListener("resize",de,_r),function(){window.removeEventListener("resize",de,_r)}},[]),he}(),st=n.useState(Bn),at=st[0],Ct=st[1],At=n.useRef(Bn),yt=n.useRef(w()),xt=n.useRef(Bn),Mt=n.useState($.current),Tt=Mt[0],ne=Mt[1],zt=n.useRef();g(function(){$.current!==Tt&&ne($.current)},[]),g(function(){if(Tt){var Gt=new ResizeObserver(function(he){he.forEach(function(ue){var de=ue.target.getBoundingClientRect(),pe=de.height,me=de.width;Ct({height:pe,width:me})})});return Gt.observe(Tt),function(){Gt.unobserve(Tt),Gt.disconnect()}}},[Tt]);var Wt=n.useCallback(function(Gt){var he=wt();return he&&he!==Gt?(rt(t.FullScreenMode.Normal),ht(he)):Promise.resolve()},[]),$t=n.useCallback(function(Gt){Gt&&J()&&(ne(Gt),Wt(Gt).then(function(){zt.current=Gt,rt(t.FullScreenMode.Entering),function(he){T&&he[I.RequestFullScreen]()}(Gt)}))},[]),Nt=n.useCallback(function(){wt()&&(rt(t.FullScreenMode.Exitting),ht(document))},[]),Yt=n.useCallback(function(){Tt&&wt()!==Tt&&rt(t.FullScreenMode.Exitting)},[Tt]);return n.useEffect(function(){switch(ct){case t.FullScreenMode.Entering:zt.current&&(zt.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),yt.current=w(),At.current={height:window.innerHeight,width:window.innerWidth};break;case t.FullScreenMode.Entered:N()===t.ScrollMode.Page?q(yt.current).then(function(){rt(t.FullScreenMode.EnteredCompletely)}):rt(t.FullScreenMode.EnteredCompletely);break;case t.FullScreenMode.Exitting:zt.current&&(zt.current.style.backgroundColor="",zt.current=null),yt.current=w();break;case t.FullScreenMode.Exited:rt(t.FullScreenMode.Normal),N()===t.ScrollMode.Page&&q(yt.current)}},[ct]),n.useEffect(function(){if(ct!==t.FullScreenMode.Normal)return ct===t.FullScreenMode.Entering&&G.height===at.height&&G.width===at.width&&G.height>0&&G.width>0&&(xt.current.height===0||G.height==xt.current.height)?(xt.current={height:window.innerHeight,width:window.innerWidth},void rt(t.FullScreenMode.Entered)):void(ct===t.FullScreenMode.Exitting&&At.current.height===G.height&&At.current.width===G.width&&G.height>0&&G.width>0&&rt(t.FullScreenMode.Exited))},[ct,G,at]),n.useEffect(function(){var Gt;return Gt=Yt,T&&document.addEventListener(I.FullScreenChange,Gt),function(){(function(he){T&&document.removeEventListener(I.FullScreenChange,he)})(Yt)}},[Tt]),{enterFullScreenMode:$t,exitFullScreenMode:Nt,fullScreenMode:ct}},Ni={buildPageStyles:function(){return{}},transformSize:function(c){return c.size}},fn={left:0,top:0},Bi=function(c){var w=c.currentFile,N=c.defaultScale,q=c.doc,$=c.enableSmoothScroll,K=c.initialPage,ct=c.initialRotation,rt=c.initialScale,G=c.pageLayout,st=c.pageSizes,at=c.plugins,Ct=c.renderPage,At=c.scrollMode,yt=c.setRenderRange,xt=c.viewMode,Mt=c.viewerState,Tt=c.onDocumentLoad,ne=c.onOpenFile,zt=c.onPageChange,Wt=c.onRotate,$t=c.onRotatePage,Nt=c.onZoom,Yt=q.numPages,Gt=q.loadingTask.docId,he=n.useContext(V).l10n,ue=n.useContext(k),de=ue.direction===t.TextDirection.RightToLeft,pe=n.useRef(),me=n.useRef(),De=n.useState(K),Ee=De[0],Fe=De[1],ke=n.useRef(null),Me=Oi({getCurrentPage:function(){return ee.current.pageIndex}}),Re=n.useState(ct),Te=Re[0],He=Re[1],Ye=ut(Te),Xe=n.useState(!1),Ne=Xe[0],ze=Xe[1],Je=n.useState(new Map),Xt=Je[0],qt=Je[1],Bt=n.useState(At),Ut=Bt[0],jt=Bt[1],Kt=ut(Ut),Jt=n.useState(xt),Vt=Jt[0],Lt=Jt[1],te=ut(Vt),ie=function(kt){var Qt=mt(),oe=n.useState([]),ve=oe[0],ge=oe[1];return n.useEffect(function(){kt.getOutline().then(function(ce){if(Qt.current&&ce!==null){var Ie=yr(ce);ge(Ie)}})},[]),ve}(q),Ce=n.useState(rt),ye=Ce[0],Be=Ce[1],We=ut(ye),ee=n.useRef(Mt),je=n.useRef(typeof N=="string"?N:null),Se=n.useRef(-1),Pe=n.useRef(-1),Oe=n.useRef(K),be=Li({getCurrentPage:function(){return ee.current.pageIndex},getCurrentScrollMode:function(){return ee.current.scrollMode},jumpToPage:function(kt){return en(kt)},targetRef:me}),Qe=n.useState(-1),pn=Qe[0],Tn=Qe[1],cn=n.useState(0),Cn=cn[0],Wi=cn[1],qe=gt({doc:q});n.useEffect(function(){return function(){Ft.clear(),Ht.clear()}},[Gt]);var Er=n.useMemo(function(){return Object.assign({},Ni,G)},[]),qi=n.useMemo(function(){return Array(Yt).fill(0).map(function(kt,Qt){var oe=[st[Qt].pageHeight,st[Qt].pageWidth],ve=Math.abs(Te)%180==0?{height:oe[0],width:oe[1]}:{height:oe[1],width:oe[0]},ge={height:ve.height*ye,width:ve.width*ye};return Er.transformSize({numPages:Yt,pageIndex:Qt,size:ge})})},[Te,ye]),_e=Fi({enableSmoothScroll:$,isRtl:de,numberOfItems:Yt,parentRef:me,scrollMode:Ut,setRenderRange:yt,sizes:qi,viewMode:Vt}),Gi=pt(function(){!je.current||ee.current.fullScreenMode!==t.FullScreenMode.Normal||K>0&&Oe.current===K||ln(je.current)},200);(function(kt){var Qt=kt.targetRef,oe=kt.onResize;g(function(){var ve=new ResizeObserver(function(ce){ce.forEach(function(Ie){oe(Ie.target)})}),ge=Qt.current;if(ge)return ve.observe(ge),function(){ve.unobserve(ge)}},[])})({targetRef:me,onResize:Gi});var tn=function(kt){var Qt=kt;at.forEach(function(oe){oe.onViewerStateChange&&(Qt=oe.onViewerStateChange(Qt))}),ee.current=Qt},Xi=function(){return me.current},$i=function(){return ee.current},Yi=n.useCallback(function(kt){Me.markVisitedDestination(kt)},[]),Un=n.useCallback(function(kt){var Qt=kt.pageIndex,oe=kt.bottomOffset,ve=kt.leftOffset,ge=kt.scaleTo,ce=me.current,Ie=ee.current;return ce&&Ie?new Promise(function(nn,Xn){_t(q,Qt).then(function(Mn){var rn=Mn.getViewport({scale:1}),Rn=0,Dr=(typeof oe=="function"?oe(rn.width,rn.height):oe)||0,xn=(typeof ve=="function"?ve(rn.width,rn.height):ve)||0,gn=Ie.scale;switch(ge){case t.SpecialZoomLevel.PageFit:Rn=0,xn=0,ln(t.SpecialZoomLevel.PageFit);break;case t.SpecialZoomLevel.PageWidth:gn=Nn(ce,st[Qt].pageHeight,st[Qt].pageWidth,t.SpecialZoomLevel.PageWidth,xt,Yt),Rn=(rn.height-Dr)*gn,xn*=gn,ln(gn);break;default:Rn=(rn.height-Dr)*gn,xn*=gn}switch(Ie.scrollMode){case t.ScrollMode.Horizontal:_e.scrollToItem(Qt,{left:xn,top:0}).then(function(){nn()});break;case t.ScrollMode.Vertical:default:_e.scrollToItem(Qt,{left:0,top:Rn}).then(function(){nn()})}})}):Promise.resolve()},[]),Pr=n.useCallback(function(kt){return Me.markVisitedDestination(kt),Un(kt)},[]),Ki=n.useCallback(function(){var kt=Me.getNextDestination();return kt?Un(kt):Promise.resolve()},[]),Ji=n.useCallback(function(){var kt=Me.getPreviousDestination();return kt?Un(kt):Promise.resolve()},[]),Zi=n.useCallback(function(){return _e.scrollToNextItem(ee.current.pageIndex,fn)},[]),en=n.useCallback(function(kt){return 0<=kt&&kt<Yt?_e.scrollToItem(kt,fn):Promise.resolve()},[]),Qi=n.useCallback(function(){return _e.scrollToPreviousItem(ee.current.pageIndex,fn)},[]),wr=n.useCallback(function(kt){var Qt,oe;(Qt=kt.name,oe=Qt.split(/\./).pop(),oe?oe.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(ve){var ge=new FileReader;ge.readAsArrayBuffer(kt),ge.onload=function(){var ce=new Uint8Array(ge.result);ve(ce)}}).then(function(ve){ne(kt.name,ve)})},[ne]),kr=n.useCallback(function(kt){var Qt=kt===t.RotateDirection.Backward?-90:90,oe=ee.current.rotation,ve=oe===360||oe===-360?Qt:oe+Qt;qe.markNotRendered(),He(ve),tn(v(v({},ee.current),{rotation:ve})),Wt({direction:kt,doc:q,rotation:ve})},[]),Vn=n.useCallback(function(kt,Qt){var oe=Qt===t.RotateDirection.Backward?-90:90,ve=ee.current.pagesRotation,ge=(ve.has(kt)?ve.get(kt):ct)+oe,ce=ve.set(kt,ge);qt(ce),ze(function(Ie){return!Ie}),tn(v(v({},ee.current),{pagesRotation:ce,rotatedPage:kt})),$t({direction:Qt,doc:q,pageIndex:kt,rotation:ge}),qe.markRendering(kt),Tn(kt)},[]),Tr=n.useCallback(function(kt){tn(v(v({},ee.current),{scrollMode:kt})),jt(kt)},[]),Mr=n.useCallback(function(kt){tn(v(v({},ee.current),{viewMode:kt})),Lt(kt)},[]),ln=n.useCallback(function(kt){var Qt=me.current,oe=ee.current.pageIndex;if(!(oe<0||oe>=Yt)){var ve=st[oe].pageHeight,ge=st[oe].pageWidth,ce=Qt?typeof kt=="string"?Nn(Qt,ve,ge,kt,ee.current.viewMode,Yt):kt:1;je.current=typeof kt=="string"?kt:null,ce!==ee.current.scale&&(Wi(function(Ie){return Ie+1}),qe.markNotRendered(),Be(ce),Nt({doc:q,scale:ce}),tn(v(v({},ee.current),{scale:ce})))}},[]),ta=n.useCallback(function(kt){be.enterFullScreenMode(kt)},[]),ea=n.useCallback(function(){be.exitFullScreenMode()},[]);n.useEffect(function(){tn(v(v({},ee.current),{fullScreenMode:be.fullScreenMode}))},[be.fullScreenMode]),n.useEffect(function(){var kt={enterFullScreenMode:ta,exitFullScreenMode:ea,getPagesContainer:Xi,getViewerState:$i,jumpToDestination:Pr,jumpToNextDestination:Ki,jumpToPreviousDestination:Ji,jumpToNextPage:Zi,jumpToPreviousPage:Qi,jumpToPage:en,openFile:wr,rotate:kr,rotatePage:Vn,setViewerState:tn,switchScrollMode:Tr,switchViewMode:Mr,zoom:ln};return at.forEach(function(Qt){Qt.install&&Qt.install(kt)}),function(){at.forEach(function(Qt){Qt.uninstall&&Qt.uninstall(kt)})}},[Gt]),n.useEffect(function(){Tt({doc:q,file:w}),at.forEach(function(kt){kt.onDocumentLoad&&kt.onDocumentLoad({doc:q,file:w})})},[Gt]);var zn,Wn,qn,Rr=_e.boundingClientRect;zn=function(){K&&en(K)},Wn=Rr.height>0&&Rr.width>0,qn=n.useRef(!1),g(function(){Wn&&!qn.current&&(qn.current=!0,zn())},[zn,Wn]),g(function(){var kt=ee.current.pageIndex;kt>-1&&Kt!==Ut&&_e.scrollToItem(kt,fn).then(function(){be.fullScreenMode===t.FullScreenMode.EnteredCompletely&&($||qe.markNotRendered(),Se.current=-1)})},[Ut]),g(function(){var kt=ee.current.pageIndex;kt>-1&&Ye!==Te&&_e.scrollToItem(kt,fn)},[Te]),g(function(){We!=0&&We!=ee.current.scale&&_e.zoom(ee.current.scale/We,ee.current.pageIndex).then(function(){be.fullScreenMode===t.FullScreenMode.EnteredCompletely&&(Pe.current=-1)})},[ye]),g(function(){if(te!==ee.current.viewMode){var kt=_e.startPage,Qt=_e.endPage,oe=_e.virtualItems;qe.markNotRendered(),qe.setRange(kt,Qt);for(var ve=function(ce){var Ie=oe.find(function(nn){return nn.index===ce});Ie&&qe.setVisibility(ce,Ie.visibility)},ge=kt;ge<=Qt;ge++)ve(ge);Gn()}},[Vt]),g(function(){var kt=ee.current.pageIndex;kt>-1&&te!==Vt&&_e.scrollToItem(kt,fn)},[Vt]),g(function(){var kt=ee.current.pageIndex;kt>0&&kt===K&&Oe.current===K&&je.current&&(Oe.current=-1,ln(je.current))},[Ee]),n.useEffect(function(){_e.isSmoothScrolling||ke.current!==null&&ke.current===Ee||(ke.current=Ee,zt({currentPage:Ee,doc:q}))},[Ee,_e.isSmoothScrolling]),n.useEffect(function(){be.fullScreenMode===t.FullScreenMode.Entering&&ee.current.scrollMode===t.ScrollMode.Page&&(Se.current=ee.current.pageIndex),be.fullScreenMode===t.FullScreenMode.EnteredCompletely&&ee.current.scrollMode===t.ScrollMode.Page&&$&&(Se.current=-1),be.fullScreenMode===t.FullScreenMode.EnteredCompletely&&je.current&&(Pe.current=ee.current.pageIndex,ln(je.current))},[be.fullScreenMode]),n.useEffect(function(){if(be.fullScreenMode!==t.FullScreenMode.Entering&&be.fullScreenMode!==t.FullScreenMode.Exitting&&!_e.isSmoothScrolling){var kt=_e.startPage,Qt=_e.endPage,oe=_e.maxVisbilityIndex,ve=_e.virtualItems,ge=oe,ce=be.fullScreenMode===t.FullScreenMode.Entered||be.fullScreenMode===t.FullScreenMode.EnteredCompletely;if(!(ce&&ge!==Se.current&&Se.current>-1||ce&&ge!==Pe.current&&Pe.current>-1)){Fe(ge),tn(v(v({},ee.current),{pageIndex:ge})),qe.setRange(kt,Qt);for(var Ie=function(Xn){var Mn=ve.find(function(rn){return rn.index===Xn});Mn&&qe.setVisibility(Xn,Mn.visibility)},nn=kt;nn<=Qt;nn++)Ie(nn);Gn()}}},[_e.startPage,_e.endPage,_e.isSmoothScrolling,_e.maxVisbilityIndex,be.fullScreenMode,Ne,Te,ye]);var na=n.useCallback(function(kt){qe.markRendered(kt),Gn()},[Cn]),Gn=function(){var kt=qe.getHighestPriorityPage();kt>-1&&qe.isInRange(kt)&&(qe.markRendering(kt),Tn(kt))},ra=function(kt){var Qt=Ee-1,oe=Ee+1;switch(kt){case"FirstPage":en(0);break;case"LastPage":en(Yt-1);break;case"NextPage":oe<Yt&&en(oe);break;case"PrevPage":Qt>=0&&en(Qt)}},ia=n.useCallback(function(){var kt=_e.virtualItems,Qt=[];switch(Vt){case t.ViewMode.DualPage:Qt=Pt(kt,2);break;case t.ViewMode.DualPageWithCover:kt.length&&(Qt=kt[0].index===0?[[kt[0]]].concat(Pt(kt.slice(1),2)):Pt(kt,2));break;case t.ViewMode.SinglePage:default:Qt=Pt(kt,1)}var oe=he&&he.core?he.core.pageLabel:"Page {{pageIndex}}",ve={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:pe,style:{height:"100%"}},children:n.createElement(n.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:C({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Ut===t.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":de,"rpv-core__inner-pages--single":Ut===t.ScrollMode.Page,"rpv-core__inner-pages--vertical":Ut===t.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":Ut===t.ScrollMode.Wrapped}),ref:me,style:{height:"100%",position:"relative"}},children:n.createElement("div",{"data-testid":"core__inner-current-page-".concat(Ee),style:Object.assign({"--scale-factor":ye},_e.getContainerStyles())},Qt.map(function(ge){return n.createElement("div",{className:C({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":Ut===t.ScrollMode.Page}),style:_e.getItemContainerStyles(ge[0]),key:"".concat(ge[0].index,"-").concat(Vt)},ge.map(function(ce){var Ie=Vt===t.ViewMode.DualPageWithCover&&(ce.index===0||Yt%2==0&&ce.index===Yt-1);return n.createElement("div",{"aria-label":oe.replace("{{pageIndex}}","".concat(ce.index+1)),className:C({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Vt===t.ViewMode.DualPage&&ce.index%2==0,"rpv-core__inner-page--dual-odd":Vt===t.ViewMode.DualPage&&ce.index%2==1,"rpv-core__inner-page--dual-cover":Ie,"rpv-core__inner-page--dual-cover-even":Vt===t.ViewMode.DualPageWithCover&&!Ie&&ce.index%2==0,"rpv-core__inner-page--dual-cover-odd":Vt===t.ViewMode.DualPageWithCover&&!Ie&&ce.index%2==1,"rpv-core__inner-page--single":Vt===t.ViewMode.SinglePage&&Ut===t.ScrollMode.Page}),role:"region",key:"".concat(ce.index,"-").concat(Vt),style:Object.assign({},_e.getItemStyles(ce),Er.buildPageStyles({numPages:Yt,pageIndex:ce.index,scrollMode:Ut,viewMode:Vt}))},n.createElement(Si,{doc:q,measureRef:ce.measureRef,outlines:ie,pageIndex:ce.index,pageRotation:Xt.has(ce.index)?Xt.get(ce.index):0,pageSize:st[ce.index],plugins:at,renderPage:Ct,renderQueueKey:Cn,rotation:Te,scale:ye,shouldRender:pn===ce.index,viewMode:Vt,onExecuteNamedAction:ra,onJumpFromLinkAnnotation:Yi,onJumpToDest:Pr,onRenderCompleted:na,onRotatePage:Vn}))}))}))}};return at.forEach(function(ge){ge.renderViewer&&(ve=ge.renderViewer({containerRef:pe,doc:q,pagesContainerRef:me,pagesRotation:Xt,pageSizes:st,rotation:Te,slot:ve,themeContext:ue,jumpToPage:en,openFile:wr,rotate:kr,rotatePage:Vn,switchScrollMode:Tr,switchViewMode:Mr,zoom:ln}))}),ve},[at,_e]),xr=n.useCallback(function(kt){return n.createElement("div",v({},kt.attrs,{style:kt.attrs&&kt.attrs.style?kt.attrs.style:{}}),kt.children,kt.subSlot&&xr(kt.subSlot))},[]);return xr(ia())},Ar=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],ji=function(c){var w=c.defaultScale,N=c.doc,q=c.render,$=c.scrollMode,K=c.viewMode,ct=n.useRef(),rt=n.useState({pageSizes:[],scale:0}),G=rt[0],st=rt[1];return n.useLayoutEffect(function(){var at=Array(N.numPages).fill(0).map(function(Ct,At){return new Promise(function(yt,xt){_t(N,At).then(function(Mt){var Tt=Mt.getViewport({scale:1});yt({pageHeight:Tt.height,pageWidth:Tt.width,rotation:Tt.rotation})})})});Promise.all(at).then(function(Ct){var At=ct.current;if(At&&Ct.length!==0){var yt=Ct[0].pageWidth,xt=Ct[0].pageHeight,Mt=At.parentElement,Tt=(Mt.clientWidth-45)/yt,ne=(Mt.clientHeight-45)/xt,zt=Tt;switch($){case t.ScrollMode.Horizontal:zt=Math.min(Tt,ne);break;case t.ScrollMode.Vertical:default:zt=Tt}var Wt,$t,Nt=w?typeof w=="string"?Nn(Mt,xt,yt,w,K,N.numPages):w:(Wt=zt,($t=Ar.findIndex(function(Yt){return Yt>=Wt}))===-1||$t===0?Wt:Ar[$t-1]);st({pageSizes:Ct,scale:Nt})}})},[N.loadingTask.docId]),G.pageSizes.length===0||G.scale===0?n.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:ct},n.createElement(l,null)):q(G.pageSizes,G.scale)},kn=function(){},jn=function(c){function w(N,q){var $=c.call(this)||this;return $.verifyPassword=N,$.passwordStatus=q,$}return O(w,c),w}(kn),Hi=function(c){var w=c.passwordStatus,N=c.renderProtectedView,q=c.verifyPassword,$=c.onDocumentAskPassword,K=n.useContext(V).l10n,ct=n.useState(""),rt=ct[0],G=ct[1],st=n.useContext(k).direction===t.TextDirection.RightToLeft,at=function(){return q(rt)};return n.useEffect(function(){$&&$({verifyPassword:q})},[]),N?N({passwordStatus:w,verifyPassword:q}):n.createElement("div",{className:"rpv-core__asking-password-wrapper"},n.createElement("div",{className:C({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":st})},n.createElement("div",{className:"rpv-core__asking-password-message"},w===t.PasswordStatus.RequiredPassword&&K.core.askingPassword.requirePasswordToOpen,w===t.PasswordStatus.WrongPassword&&K.core.wrongPassword.tryAgain),n.createElement("div",{className:"rpv-core__asking-password-body"},n.createElement("div",{className:C({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!st,"rpv-core__asking-password-input--rtl":st})},n.createElement(h,{testId:"core__asking-password-input",type:"password",value:rt,onChange:G,onKeyDown:function(Ct){Ct.key==="Enter"&&at()}})),n.createElement(A,{onClick:at},K.core.askingPassword.submit))))},Cr=function(c){function w(N){var q=c.call(this)||this;return q.doc=N,q}return O(w,c),w}(kn),Sr=function(c){function w(N){var q=c.call(this)||this;return q.error=N,q}return O(w,c),w}(kn),Hn=function(c){function w(N){var q=c.call(this)||this;return q.percentages=N,q}return O(w,c),w}(kn),Ui=function(c){var w=c.characterMap,N=c.file,q=c.httpHeaders,$=c.render,K=c.renderError,ct=c.renderLoader,rt=c.renderProtectedView,G=c.transformGetDocumentParams,st=c.withCredentials,at=c.onDocumentAskPassword,Ct=n.useContext(k).direction===t.TextDirection.RightToLeft,At=n.useState(new Hn(0)),yt=At[0],xt=At[1],Mt=n.useRef(""),Tt=mt();return n.useEffect(function(){Mt.current="",xt(new Hn(0));var ne=new R.PDFWorker({name:"PDFWorker_".concat(Date.now())}),zt=Object.assign({httpHeaders:q,withCredentials:st,worker:ne},typeof N=="string"?{url:N}:{data:N},w?{cMapUrl:w.url,cMapPacked:w.isCompressed}:{}),Wt=G?G(zt):zt,$t=R.getDocument(Wt);return $t.onPassword=function(Nt,Yt){switch(Yt){case R.PasswordResponses.NEED_PASSWORD:Tt.current&&xt(new jn(Nt,t.PasswordStatus.RequiredPassword));break;case R.PasswordResponses.INCORRECT_PASSWORD:Tt.current&&xt(new jn(Nt,t.PasswordStatus.WrongPassword))}},$t.onProgress=function(Nt){var Yt=Nt.total>0?Math.min(100,100*Nt.loaded/Nt.total):100;Tt.current&&Mt.current===""&&xt(new Hn(Yt))},$t.promise.then(function(Nt){Mt.current=Nt.loadingTask.docId,Tt.current&&xt(new Cr(Nt))},function(Nt){return Tt.current&&!ne.destroyed&&xt(new Sr({message:Nt.message||"Cannot load document",name:Nt.name}))}),function(){$t.destroy(),ne.destroy()}},[N]),yt instanceof jn?n.createElement(Hi,{passwordStatus:yt.passwordStatus,renderProtectedView:rt,verifyPassword:yt.verifyPassword,onDocumentAskPassword:at}):yt instanceof Cr?$(yt.doc):yt instanceof Sr?K?K(yt.error):n.createElement("div",{className:C({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Ct})},n.createElement("div",{className:"rpv-core__doc-error-text"},yt.error.message)):n.createElement("div",{"data-testid":"core__doc-loading",className:C({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Ct})},ct?ct(yt.percentages):n.createElement(l,null))},Vi=function(c,w){var N=n.useMemo(function(){return c==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":c},[]),q=n.useState(N),$=q[0],K=q[1],ct=ut($);return n.useEffect(function(){if(c==="auto"){var rt=window.matchMedia("(prefers-color-scheme: dark)"),G=function(st){K(st.matches?"dark":"light")};return rt.addEventListener("change",G),function(){return rt.removeEventListener("change",G)}}},[]),n.useEffect(function(){$!==ct&&w&&w($)},[$]),n.useEffect(function(){c!==$&&K(c)},[c]),{currentTheme:$,setCurrentTheme:K}},zi=function(c){return{startPage:c.startPage-3,endPage:c.endPage+3}};t.Button=function(c){var w=c.children,N=c.testId,q=c.onClick,$=n.useContext(k).direction===t.TextDirection.RightToLeft,K=N?{"data-testid":N}:{};return n.createElement("button",v({className:C({"rpv-core__button":!0,"rpv-core__button--rtl":$}),type:"button",onClick:q},K),w)},t.Icon=u,t.LazyRender=function(c){var w=c.attrs,N=c.children,q=c.testId,$=n.useState(!1),K=$[0],ct=$[1],rt=q?v(v({},w),{"data-testid":q}):w,G=b({once:!0,onVisibilityChanged:function(st){st.isVisible&&ct(!0)}});return n.createElement("div",v({ref:G},rt),K&&N)},t.LocalizationContext=V,t.Menu=function(c){var w=c.children,N=n.useRef(),q=n.useRef([]),$=n.useContext(k).direction===t.TextDirection.RightToLeft,K=function(rt){if(N.current)switch(rt.key){case"Tab":rt.preventDefault();break;case"ArrowDown":rt.preventDefault(),ct(function(G,st){return st+1});break;case"ArrowUp":rt.preventDefault(),ct(function(G,st){return st-1});break;case"End":rt.preventDefault(),ct(function(G,st){return G.length-1});break;case"Home":rt.preventDefault(),ct(function(G,st){return 0})}},ct=function(rt){if(N.current){var G=q.current,st=G.findIndex(function(Ct){return Ct.getAttribute("tabindex")==="0"}),at=Math.min(G.length-1,Math.max(0,rt(G,st)));st>=0&&st<=G.length-1&&G[st].setAttribute("tabindex","-1"),G[at].setAttribute("tabindex","0"),G[at].focus()}};return g(function(){var rt=N.current;if(rt){var G=function(st){var at=[];return st.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Ct){if(Ct instanceof HTMLElement){var At=Ct.parentElement;(At===st||window.getComputedStyle(At).display!=="none")&&at.push(Ct)}}),at}(rt);q.current=G}},[]),g(function(){return document.addEventListener("keydown",K),function(){document.removeEventListener("keydown",K)}},[]),n.createElement("div",{ref:N,"aria-orientation":"vertical",className:C({"rpv-core__menu":!0,"rpv-core__menu--rtl":$}),role:"menu",tabIndex:0},w)},t.MenuDivider=function(){return n.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},t.MenuItem=function(c){var w=c.checked,N=w!==void 0&&w,q=c.children,$=c.icon,K=$===void 0?null:$,ct=c.isDisabled,rt=ct!==void 0&&ct,G=c.testId,st=c.onClick,at=n.useContext(k).direction===t.TextDirection.RightToLeft,Ct=G?{"data-testid":G}:{};return n.createElement("button",v({className:C({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":rt,"rpv-core__menu-item--ltr":!at,"rpv-core__menu-item--rtl":at}),role:"menuitem",tabIndex:-1,type:"button",onClick:st},Ct),n.createElement("div",{className:C({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!at,"rpv-core__menu-item-icon--rtl":at})},K),n.createElement("div",{className:C({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!at,"rpv-core__menu-item-label--rtl":at})},q),n.createElement("div",{className:C({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!at,"rpv-core__menu-item-check--rtl":at})},N&&n.createElement(m,null)))},t.MinimalButton=function(c){var w=c.ariaLabel,N=w===void 0?"":w,q=c.ariaKeyShortcuts,$=q===void 0?"":q,K=c.children,ct=c.isDisabled,rt=ct!==void 0&&ct,G=c.isSelected,st=G!==void 0&&G,at=c.testId,Ct=c.onClick,At=n.useContext(k).direction===t.TextDirection.RightToLeft,yt=at?{"data-testid":at}:{};return n.createElement("button",v({"aria-label":N},$&&{"aria-keyshortcuts":$},rt&&{"aria-disabled":!0},{className:C({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":rt,"rpv-core__minimal-button--rtl":At,"rpv-core__minimal-button--selected":st}),type:"button",onClick:Ct},yt),K)},t.Modal=function(c){var w=c.ariaControlsSuffix,N=c.closeOnClickOutside,q=c.closeOnEscape,$=c.content,K=c.isOpened,ct=K!==void 0&&K,rt=c.target,G=w||"".concat(p());return n.createElement(bt,{target:rt?function(st,at){return n.createElement("div",{"aria-expanded":at?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(G)},rt(st,at))}:null,content:function(st){return n.createElement(j,null,n.createElement(W,{ariaControlsSuffix:G,closeOnClickOutside:N,closeOnEscape:q,onToggle:st},$(st)))},isOpened:ct})},t.Popover=function(c){var w=c.ariaHasPopup,N=w===void 0?"dialog":w,q=c.ariaControlsSuffix,$=c.closeOnClickOutside,K=c.closeOnEscape,ct=c.content,rt=c.lockScroll,G=rt===void 0||rt,st=c.offset,at=c.position,Ct=c.target,At=dt(!1),yt=At.opened,xt=At.toggle,Mt=n.useRef(),Tt=n.useMemo(function(){return q||"".concat(p())},[]);return n.createElement("div",{ref:Mt,"aria-expanded":yt?"true":"false","aria-haspopup":N,"aria-controls":"rpv-core__popver-body-".concat(Tt)},Ct(xt,yt),yt&&n.createElement(n.Fragment,null,G&&n.createElement(Q,{closeOnEscape:K,onClose:xt}),n.createElement(B,{ariaControlsSuffix:Tt,closeOnClickOutside:$,offset:st,position:at,targetRef:Mt,onClose:xt},ct(xt))))},t.PrimaryButton=A,t.ProgressBar=function(c){var w=c.progress,N=n.useContext(k).direction===t.TextDirection.RightToLeft;return n.createElement("div",{className:C({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":N})},n.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(w,"%")}},w,"%"))},t.Separator=function(){return n.createElement("div",{className:"rpv-core__separator"})},t.Spinner=l,t.Splitter=function(c){var w=c.constrain,N=n.useContext(k).direction===t.TextDirection.RightToLeft,q=n.useRef(),$=n.useRef(),K=n.useRef(),ct=n.useRef(0),rt=n.useRef(0),G=n.useRef(0),st=n.useRef(0),at={capture:!0},Ct=function(yt){var xt=q.current,Mt=$.current,Tt=K.current;if(xt&&Mt&&Tt){var ne=st.current,zt=yt.clientX-ct.current,Wt=G.current+(N?-zt:zt),$t=xt.parentElement.getBoundingClientRect().width,Nt=100*Wt/$t;if(xt.classList.add("rpv-core__splitter--resizing"),w){var Yt=$t-Wt-ne;if(!w({firstHalfPercentage:Nt,firstHalfSize:Wt,secondHalfPercentage:100*Yt/$t,secondHalfSize:Yt}))return}Mt.style.width="".concat(Nt,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),Mt.classList.add("rpv-core__splitter-sibling--resizing"),Tt.classList.add("rpv-core__splitter-sibling--resizing")}},At=function(yt){var xt=q.current,Mt=$.current,Tt=K.current;xt&&Mt&&Tt&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),xt.classList.remove("rpv-core__splitter--resizing"),Mt.classList.remove("rpv-core__splitter-sibling--resizing"),Tt.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Ct,at),document.removeEventListener("mouseup",At,at))};return n.useEffect(function(){var yt=q.current;yt&&(st.current=yt.getBoundingClientRect().width,$.current=yt.previousElementSibling,K.current=yt.nextElementSibling)},[]),n.createElement("div",{ref:q,className:"rpv-core__splitter",onMouseDown:function(yt){var xt=$.current;xt&&(ct.current=yt.clientX,rt.current=yt.clientY,G.current=xt.getBoundingClientRect().width,document.addEventListener("mousemove",Ct,at),document.addEventListener("mouseup",At,at))}})},t.TextBox=h,t.ThemeContext=k,t.Tooltip=function(c){var w=c.ariaControlsSuffix,N=c.content,q=c.offset,$=c.position,K=c.target,ct=dt(!1),rt=ct.opened,G=ct.toggle,st=n.useRef(),at=n.useRef(),Ct=n.useMemo(function(){return w||"".concat(p())},[]);H(function(){st.current&&document.activeElement&&st.current.contains(document.activeElement)&&yt()});var At=function(){G(t.ToggleStatus.Open)},yt=function(){G(t.ToggleStatus.Close)};return n.createElement(n.Fragment,null,n.createElement("div",{ref:st,"aria-describedby":"rpv-core__tooltip-body-".concat(Ct),onBlur:function(xt){xt.relatedTarget instanceof HTMLElement&&xt.currentTarget.parentElement&&xt.currentTarget.parentElement.contains(xt.relatedTarget)?at.current&&(at.current.style.display="none"):yt()},onFocus:At,onMouseEnter:At,onMouseLeave:yt},K),rt&&n.createElement(X,{ariaControlsSuffix:Ct,contentRef:at,offset:q,position:$,targetRef:st},N()))},t.Viewer=function(c){var w=c.characterMap,N=c.defaultScale,q=c.enableSmoothScroll,$=q===void 0||q,K=c.fileUrl,ct=c.httpHeaders,rt=ct===void 0?{}:ct,G=c.initialPage,st=G===void 0?0:G,at=c.pageLayout,Ct=c.initialRotation,At=Ct===void 0?0:Ct,yt=c.localization,xt=c.plugins,Mt=xt===void 0?[]:xt,Tt=c.renderError,ne=c.renderLoader,zt=c.renderPage,Wt=c.renderProtectedView,$t=c.scrollMode,Nt=$t===void 0?t.ScrollMode.Vertical:$t,Yt=c.setRenderRange,Gt=Yt===void 0?zi:Yt,he=c.transformGetDocumentParams,ue=c.theme,de=ue===void 0?{direction:t.TextDirection.LeftToRight,theme:"light"}:ue,pe=c.viewMode,me=pe===void 0?t.ViewMode.SinglePage:pe,De=c.withCredentials,Ee=De!==void 0&&De,Fe=c.onDocumentAskPassword,ke=c.onDocumentLoad,Me=ke===void 0?function(){}:ke,Re=c.onPageChange,Te=Re===void 0?function(){}:Re,He=c.onRotate,Ye=He===void 0?function(){}:He,Xe=c.onRotatePage,Ne=Xe===void 0?function(){}:Xe,ze=c.onSwitchTheme,Je=ze===void 0?function(){}:ze,Xt=c.onZoom,qt=Xt===void 0?function(){}:Xt,Bt=n.useState({data:K,name:typeof K=="string"?K:"",shouldLoad:!1}),Ut=Bt[0],jt=Bt[1],Kt=function(Se,Pe){jt({data:Pe,name:Se,shouldLoad:!0})},Jt=n.useState(!1),Vt=Jt[0],Lt=Jt[1],te=ut(Ut);n.useEffect(function(){var Se,Pe,Oe,be;Se=te.data,be=typeof(Pe=K),(Oe=typeof Se)=="string"&&be==="string"&&Se===Pe||Oe==="object"&&be==="object"&&Se.length===Pe.length&&Se.every(function(Qe,pn){return Qe===Pe[pn]})||jt({data:K,name:typeof K=="string"?K:"",shouldLoad:Vt})},[K,Vt]);var ie=b({onVisibilityChanged:function(Se){Lt(Se.isVisible),Se.isVisible&&jt(function(Pe){return Object.assign({},Pe,{shouldLoad:!0})})}}),Ce=typeof de=="string"?{direction:t.TextDirection.LeftToRight,theme:de}:de,ye=n.useState(yt||St),Be=ye[0],We=ye[1],ee={l10n:Be,setL10n:We},je=Object.assign({},{direction:Ce.direction},Vi(Ce.theme||"light",Je));return n.useEffect(function(){yt&&We(yt)},[yt]),n.createElement(V.Provider,{value:ee},n.createElement(k.Provider,{value:je},n.createElement("div",{ref:ie,className:"rpv-core__viewer rpv-core__viewer--".concat(je.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Ut.shouldLoad&&n.createElement(Ui,{characterMap:w,file:Ut.data,httpHeaders:rt,render:function(Se){return n.createElement(ji,{defaultScale:N,doc:Se,render:function(Pe,Oe){return n.createElement(Bi,{currentFile:{data:Ut.data,name:Ut.name},defaultScale:N,doc:Se,enableSmoothScroll:$,initialPage:st,initialRotation:At,initialScale:Oe,pageLayout:at,pageSizes:Pe,plugins:Mt,renderPage:zt,scrollMode:Nt,setRenderRange:Gt,viewMode:me,viewerState:{file:Ut,fullScreenMode:t.FullScreenMode.Normal,pageIndex:-1,pageHeight:Pe[0].pageHeight,pageWidth:Pe[0].pageWidth,pagesRotation:new Map,rotation:At,scale:Oe,scrollMode:Nt,viewMode:me},onDocumentLoad:Me,onOpenFile:Kt,onPageChange:Te,onRotate:Ye,onRotatePage:Ne,onZoom:qt})},scrollMode:Nt,viewMode:me})},renderError:Tt,renderLoader:ne,renderProtectedView:Wt,transformGetDocumentParams:he,withCredentials:Ee,onDocumentAskPassword:Fe}))))},t.Worker=function(c){var w=c.children,N=c.workerUrl;return R.GlobalWorkerOptions.workerSrc=N,n.createElement(n.Fragment,null,w)},t.chunk=Pt,t.classNames=C,t.createStore=function(c){var w=c||{},N={},q=function(K,ct){var rt;w=v(v({},w),((rt={})[K]=ct,rt)),(N[K]||[]).forEach(function(G){return G(w[K])})},$=function(K){return w[K]};return{subscribe:function(K,ct){N[K]=(N[K]||[]).concat(ct)},unsubscribe:function(K,ct){N[K]=(N[K]||[]).filter(function(rt){return rt!==ct})},update:function(K,ct){q(K,ct)},updateCurrentValue:function(K,ct){var rt=$(K);rt!==void 0&&q(K,ct(rt))},get:function(K){return $(K)}}},t.getDestination=ot,t.getPage=_t,t.isFullScreenEnabled=J,t.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},t.useDebounceCallback=pt,t.useIntersectionObserver=b,t.useIsMounted=mt,t.useIsomorphicLayoutEffect=g,t.usePrevious=ut,t.useRenderQueue=gt})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=core_min;var libExports=lib.exports;const index=getDefaultExportFromCjs(libExports),index$1=_mergeNamespaces({__proto__:null,default:index},[libExports]),PageRouter=reactExports.lazy(()=>__vitePreload(()=>import("./PageRouter-DVocmFZ6.js").then(t=>t.l),__vite__mapDeps([0,1,2])));function App(){const t=themeFromSourceColor(argbFromHex("#E62727"));applyTheme(t,{target:document.body});const[e,f]=reactExports.useState(null),i=new URL("/assets/pdf.worker.min-DFOQrV6Q.js",import.meta.url).toString();return reactExports.useEffect(()=>{fetch("components.json").then(o=>o.json()).then(o=>{f(o),console.log("Finished fetching."),console.log(o)})},[]),e?(console.log("Received json."),jsxRuntimeExports.jsx(libExports.Worker,{workerUrl:i,children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:jsxRuntimeExports.jsx(CircularProgress,{})}),children:jsxRuntimeExports.jsx(PageRouter,{json:e})})})):jsxRuntimeExports.jsx(Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:jsxRuntimeExports.jsx(CircularProgress,{})})}const App$1=Object.freeze(Object.defineProperty({__proto__:null,default:App},Symbol.toStringTag,{value:"Module"}));export{App$1 as A,Box as B,CircularProgress as C,generateUtilityClasses as a,createSimplePaletteValueFilter as b,composeClasses as c,defaultTheme$1 as d,extendSxProp as e,slotShouldForwardProp as f,generateUtilityClass as g,index$1 as i,libExports as l,memoTheme as m,rootShouldForwardProp as r,styled as s,useDefaultProps as u};
